<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 12 (filtered)">
<title>ItsNat</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Tms Rmn";
	panose-1:2 2 6 3 4 5 5 2 3 4;}
@font-face
	{font-family:Helv;
	panose-1:2 11 6 4 2 2 2 3 2 4;}
@font-face
	{font-family:"New York";
	panose-1:2 4 5 3 6 5 6 2 3 4;}
@font-face
	{font-family:System;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 1 6 1 0 1 1 1 1 1;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:Dotum;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimHei;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:MingLiU;
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:Mincho;
	panose-1:2 2 6 9 4 3 5 8 3 5;}
@font-face
	{font-family:Gulim;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:Century;
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Angsana New";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Cordia New";
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:Mangal;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Latha;
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sylfaen;
	panose-1:1 10 5 2 5 3 6 3 3 3;}
@font-face
	{font-family:Vrinda;
	panose-1:1 1 6 0 1 1 1 1 1 1;}
@font-face
	{font-family:Raavi;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Shruti;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sendnya;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gautami;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Tunga;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Estrangelo Edessa";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;}
@font-face
	{font-family:Monospaced;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Marlett;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Lucida Console";
	panose-1:2 11 6 9 4 5 4 2 2 4;}
@font-face
	{font-family:"Lucida Sans Unicode";
	panose-1:2 11 6 2 3 5 4 2 2 4;}
@font-face
	{font-family:"Arial Black";
	panose-1:2 11 10 4 2 1 2 2 2 4;}
@font-face
	{font-family:"Comic Sans MS";
	panose-1:3 15 7 2 3 3 2 2 2 4;}
@font-face
	{font-family:Impact;
	panose-1:2 11 8 6 3 9 2 5 2 4;}
@font-face
	{font-family:Georgia;
	panose-1:2 4 5 2 5 4 5 2 3 3;}
@font-face
	{font-family:"Franklin Gothic Medium";
	panose-1:2 11 6 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Palatino Linotype";
	panose-1:2 4 5 2 5 5 5 3 3 4;}
@font-face
	{font-family:Webdings;
	panose-1:5 3 1 2 1 5 9 6 7 3;}
@font-face
	{font-family:"MV Boli";}
@font-face
	{font-family:"Microsoft Sans Serif";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Kartika;
	panose-1:2 2 5 3 3 4 4 6 2 3;}
@font-face
	{font-family:"Book Antiqua";
	panose-1:2 4 6 2 5 3 5 3 3 4;}
@font-face
	{font-family:"Bookman Old Style";
	panose-1:2 5 6 4 5 5 5 2 2 4;}
@font-face
	{font-family:"Monotype Corsiva";
	panose-1:3 1 1 1 1 2 1 1 1 1;}
@font-face
	{font-family:"Agency FB";
	panose-1:2 11 5 3 2 2 2 2 2 4;}
@font-face
	{font-family:"Arial Rounded MT Bold";
	panose-1:2 15 7 4 3 5 4 3 2 4;}
@font-face
	{font-family:"Blackadder ITC";
	panose-1:4 2 5 5 5 16 7 2 13 2;}
@font-face
	{font-family:"Bodoni MT";
	panose-1:2 7 6 3 8 6 6 2 2 3;}
@font-face
	{font-family:"Bodoni MT Black";
	panose-1:2 7 10 3 8 6 6 2 2 3;}
@font-face
	{font-family:"Bodoni MT Condensed";
	panose-1:2 7 6 6 8 6 6 2 2 3;}
@font-face
	{font-family:"Bradley Hand ITC";
	panose-1:3 7 4 2 5 3 2 3 2 3;}
@font-face
	{font-family:"Calisto MT";
	panose-1:2 4 6 3 5 5 5 3 3 4;}
@font-face
	{font-family:Castellar;
	panose-1:2 10 4 2 6 4 6 1 3 1;}
@font-face
	{font-family:"Century Gothic";
	panose-1:2 11 5 2 2 2 2 2 2 4;}
@font-face
	{font-family:"Century Schoolbook";
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Copperplate Gothic Bold";
	panose-1:2 14 7 5 2 2 6 2 4 4;}
@font-face
	{font-family:"Copperplate Gothic Light";
	panose-1:2 14 5 7 2 2 6 2 4 4;}
@font-face
	{font-family:"Curlz MT";
	panose-1:4 4 4 4 5 7 2 2 2 2;}
@font-face
	{font-family:"Edwardian Script ITC";
	panose-1:3 3 3 2 4 7 7 13 8 4;}
@font-face
	{font-family:Elephant;
	panose-1:2 2 9 4 9 5 5 2 3 3;}
@font-face
	{font-family:"Engravers MT";
	panose-1:2 9 7 7 8 5 5 2 3 4;}
@font-face
	{font-family:"Eras Bold ITC";
	panose-1:2 11 9 7 3 5 4 2 2 4;}
@font-face
	{font-family:"Eras Demi ITC";
	panose-1:2 11 8 5 3 5 4 2 8 4;}
@font-face
	{font-family:"Eras Light ITC";
	panose-1:2 11 4 2 3 5 4 2 8 4;}
@font-face
	{font-family:"Eras Medium ITC";
	panose-1:2 11 6 2 3 5 4 2 8 4;}
@font-face
	{font-family:"Felix Titling";
	panose-1:4 6 5 5 6 2 2 2 10 4;}
@font-face
	{font-family:Forte;
	panose-1:3 6 9 2 4 5 2 7 2 3;}
@font-face
	{font-family:"Franklin Gothic Book";
	panose-1:2 11 5 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi";
	panose-1:2 11 7 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi Cond";
	panose-1:2 11 7 6 3 4 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Heavy";
	panose-1:2 11 9 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Medium Cond";
	panose-1:2 11 6 6 3 4 2 2 2 4;}
@font-face
	{font-family:"French Script MT";
	panose-1:3 2 4 2 4 6 7 4 6 5;}
@font-face
	{font-family:Gigi;
	panose-1:4 4 5 4 6 16 7 2 13 2;}
@font-face
	{font-family:"Gill Sans MT Ext Condensed Bold";
	panose-1:2 11 9 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans MT";
	panose-1:2 11 5 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans MT Condensed";
	panose-1:2 11 5 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans Ultra Bold";
	panose-1:2 11 10 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans Ultra Bold Condensed";
	panose-1:2 11 10 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Gloucester MT Extra Condensed";
	panose-1:2 3 8 8 2 6 1 1 1 1;}
@font-face
	{font-family:"Goudy Old Style";
	panose-1:2 2 5 2 5 3 5 2 3 3;}
@font-face
	{font-family:"Goudy Stout";
	panose-1:2 2 9 4 7 3 11 2 4 1;}
@font-face
	{font-family:Haettenschweiler;
	panose-1:2 11 7 6 4 9 2 6 2 4;}
@font-face
	{font-family:"Imprint MT Shadow";
	panose-1:4 2 6 5 6 3 3 3 2 2;}
@font-face
	{font-family:"Lucida Sans";
	panose-1:2 11 6 2 3 5 4 2 2 4;}
@font-face
	{font-family:"Lucida Sans Typewriter";
	panose-1:2 11 5 9 3 5 4 3 2 4;}
@font-face
	{font-family:"Maiandra GD";
	panose-1:2 14 5 2 3 3 8 2 2 4;}
@font-face
	{font-family:"OCR A Extended";
	panose-1:2 1 5 9 2 1 2 1 3 3;}
@font-face
	{font-family:"Palace Script MT";
	panose-1:3 3 3 2 2 6 7 12 11 5;}
@font-face
	{font-family:Papyrus;
	panose-1:3 7 5 2 6 5 2 3 2 5;}
@font-face
	{font-family:Perpetua;
	panose-1:2 2 5 2 6 4 1 2 3 3;}
@font-face
	{font-family:"Perpetua Titling MT";
	panose-1:2 2 5 2 6 5 5 2 8 4;}
@font-face
	{font-family:Pristina;
	panose-1:3 6 4 2 4 4 6 8 2 4;}
@font-face
	{font-family:"Rage Italic";
	panose-1:3 7 5 2 4 5 7 7 3 4;}
@font-face
	{font-family:Rockwell;
	panose-1:2 6 6 3 2 2 5 2 4 3;}
@font-face
	{font-family:"Rockwell Condensed";
	panose-1:2 6 6 3 5 4 5 2 1 4;}
@font-face
	{font-family:"Rockwell Extra Bold";
	panose-1:2 6 9 3 4 5 5 2 4 3;}
@font-face
	{font-family:"Script MT Bold";
	panose-1:3 4 6 2 4 6 7 8 9 4;}
@font-face
	{font-family:"Tw Cen MT";
	panose-1:2 11 6 2 2 1 4 2 6 3;}
@font-face
	{font-family:"Tw Cen MT Condensed";
	panose-1:2 11 6 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Wingdings 2";
	panose-1:5 2 1 2 1 5 7 7 7 7;}
@font-face
	{font-family:"Wingdings 3";
	panose-1:5 4 1 2 1 8 7 7 7 7;}
@font-face
	{font-family:"Tw Cen MT Condensed Extra Bold";
	panose-1:2 11 8 3 2 2 2 2 2 4;}
@font-face
	{font-family:Candara;
	panose-1:2 14 5 2 3 3 3 2 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:Constantia;
	panose-1:2 3 6 2 5 3 6 3 3 3;}
@font-face
	{font-family:Corbel;
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"Bitstream Vera Sans Mono";
	panose-1:2 11 6 9 3 8 4 2 2 4;}
@font-face
	{font-family:"Bitstream Vera Serif";
	panose-1:2 6 6 3 5 6 5 2 2 4;}
@font-face
	{font-family:"Bitstream Vera Sans";
	panose-1:2 11 6 3 3 8 4 2 2 4;}
@font-face
	{font-family:Nina;
	panose-1:2 11 6 6 3 5 4 4 2 4;}
@font-face
	{font-family:"Lingoes Unicode";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"\@Lingoes Unicode";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"MT Extra";
	panose-1:5 5 1 2 1 2 5 2 2 2;}
@font-face
	{font-family:"MS Outlook";
	panose-1:5 1 1 0 1 0 0 0 0 0;}
@font-face
	{font-family:"Bookshelf Symbol 7";
	panose-1:5 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"MS Reference Sans Serif";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"MS Reference Specialty";
	panose-1:5 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Garamond;
	panose-1:2 2 4 4 3 3 1 1 8 3;}
@font-face
	{font-family:Algerian;
	panose-1:4 2 7 5 4 10 2 6 7 2;}
@font-face
	{font-family:"Baskerville Old Face";
	panose-1:2 2 6 2 8 5 5 2 3 3;}
@font-face
	{font-family:"Bauhaus 93";
	panose-1:4 3 9 5 2 11 2 2 12 2;}
@font-face
	{font-family:"Bell MT";
	panose-1:2 2 5 3 6 3 5 2 3 3;}
@font-face
	{font-family:"Berlin Sans FB";
	panose-1:2 14 6 2 2 5 2 2 3 6;}
@font-face
	{font-family:"Berlin Sans FB Demi";
	panose-1:2 14 8 2 2 5 2 2 3 6;}
@font-face
	{font-family:"Bernard MT Condensed";
	panose-1:2 5 8 6 6 9 5 2 4 4;}
@font-face
	{font-family:"Bodoni MT Poster Compressed";
	panose-1:2 7 7 6 8 6 1 5 2 4;}
@font-face
	{font-family:"Britannic Bold";
	panose-1:2 11 9 3 6 7 3 2 2 4;}
@font-face
	{font-family:Broadway;
	panose-1:4 4 9 5 8 11 2 2 5 2;}
@font-face
	{font-family:"Brush Script MT";
	panose-1:3 6 8 2 4 4 6 7 3 4;}
@font-face
	{font-family:"Californian FB";
	panose-1:2 7 4 3 6 8 11 3 2 4;}
@font-face
	{font-family:Centaur;
	panose-1:2 3 5 4 5 2 5 2 3 4;}
@font-face
	{font-family:Chiller;
	panose-1:4 2 4 4 3 16 7 2 6 2;}
@font-face
	{font-family:"Colonna MT";
	panose-1:4 2 8 5 6 2 2 3 2 3;}
@font-face
	{font-family:"Cooper Black";
	panose-1:2 8 9 4 4 3 11 2 4 4;}
@font-face
	{font-family:"Footlight MT Light";
	panose-1:2 4 6 2 6 3 10 2 3 4;}
@font-face
	{font-family:"Freestyle Script";
	panose-1:3 8 4 2 3 2 5 11 4 4;}
@font-face
	{font-family:"Harlow Solid Italic";
	panose-1:4 3 6 4 2 15 2 2 13 2;}
@font-face
	{font-family:Harrington;
	panose-1:4 4 5 5 5 10 2 2 7 2;}
@font-face
	{font-family:"High Tower Text";
	panose-1:2 4 5 2 5 5 6 3 3 3;}
@font-face
	{font-family:Jokerman;
	panose-1:4 9 6 5 6 13 6 2 7 2;}
@font-face
	{font-family:"Juice ITC";
	panose-1:4 4 4 3 4 10 2 2 2 2;}
@font-face
	{font-family:"Kristen ITC";
	panose-1:3 5 5 2 4 2 2 3 2 2;}
@font-face
	{font-family:"Kunstler Script";
	panose-1:3 3 4 2 2 6 7 13 13 6;}
@font-face
	{font-family:"Lucida Bright";
	panose-1:2 4 6 2 5 5 5 2 3 4;}
@font-face
	{font-family:"Lucida Calligraphy";
	panose-1:3 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"Lucida Fax";
	panose-1:2 6 6 2 5 5 5 2 2 4;}
@font-face
	{font-family:"Lucida Handwriting";
	panose-1:3 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:Magneto;
	panose-1:4 3 8 5 5 8 2 2 13 2;}
@font-face
	{font-family:"Matura MT Script Capitals";
	panose-1:3 2 8 2 6 6 2 7 2 2;}
@font-face
	{font-family:Mistral;
	panose-1:3 9 7 2 3 4 7 2 4 3;}
@font-face
	{font-family:"Modern No\. 20";
	panose-1:2 7 7 4 7 5 5 2 3 3;}
@font-face
	{font-family:"Niagara Engraved";
	panose-1:4 2 5 2 7 7 3 3 2 2;}
@font-face
	{font-family:"Niagara Solid";
	panose-1:4 2 5 2 7 7 2 2 2 2;}
@font-face
	{font-family:"Old English Text MT";
	panose-1:3 4 9 2 4 5 8 3 8 6;}
@font-face
	{font-family:Onyx;
	panose-1:4 5 6 2 8 7 2 2 2 3;}
@font-face
	{font-family:Parchment;
	panose-1:3 4 6 2 4 7 8 4 8 4;}
@font-face
	{font-family:Playbill;
	panose-1:4 5 6 3 10 6 2 2 2 2;}
@font-face
	{font-family:"Poor Richard";
	panose-1:2 8 5 2 5 5 5 2 7 2;}
@font-face
	{font-family:Ravie;
	panose-1:4 4 8 5 5 8 9 2 6 2;}
@font-face
	{font-family:"Informal Roman";
	panose-1:3 6 4 2 3 4 6 11 2 4;}
@font-face
	{font-family:"Showcard Gothic";
	panose-1:4 2 9 4 2 1 2 2 6 4;}
@font-face
	{font-family:"Snap ITC";
	panose-1:4 4 10 7 6 10 2 2 2 2;}
@font-face
	{font-family:Stencil;
	panose-1:4 4 9 5 13 8 2 2 4 4;}
@font-face
	{font-family:"Tempus Sans ITC";
	panose-1:4 2 4 4 3 13 7 2 2 2;}
@font-face
	{font-family:"Viner Hand ITC";
	panose-1:3 7 5 2 3 5 2 2 2 3;}
@font-face
	{font-family:Vivaldi;
	panose-1:3 2 6 2 5 5 6 9 8 4;}
@font-face
	{font-family:"Vladimir Script";
	panose-1:3 5 4 2 4 4 7 7 3 5;}
@font-face
	{font-family:"Wide Latin";
	panose-1:2 10 10 7 5 5 5 2 4 4;}
@font-face
	{font-family:"Segoe UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"\@MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:"Arial Narrow";
	panose-1:2 11 5 6 2 2 2 3 2 4;}
@font-face
	{font-family:"Open Sans";
	panose-1:2 11 6 6 3 5 4 2 2 4;}
@font-face
	{font-family:OpenSymbol;
	panose-1:5 1 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Source Sans Pro";
	panose-1:2 11 5 3 3 4 3 2 2 4;}
@font-face
	{font-family:"Source Code Pro";
	panose-1:2 11 5 9 3 4 3 2 2 4;}
@font-face
	{font-family:"Linux Biolinum G";
	panose-1:2 0 5 3 0 0 0 0 0 0;}
@font-face
	{font-family:"PT Serif";
	panose-1:2 10 6 3 4 5 5 2 2 4;}
@font-face
	{font-family:"Liberation Mono";
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Liberation Sans";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Liberation Serif";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Linux Libertine Display G";
	panose-1:2 0 5 3 0 0 0 0 0 0;}
@font-face
	{font-family:"Linux Libertine G";
	panose-1:2 0 5 3 0 0 0 0 0 0;}
@font-face
	{font-family:Caladea;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Source Sans Pro Black";
	panose-1:2 11 8 3 3 4 3 2 2 4;}
@font-face
	{font-family:"Liberation Sans Narrow";
	panose-1:2 11 6 6 2 2 2 3 2 4;}
@font-face
	{font-family:Carlito;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Source Sans Pro ExtraLight";
	panose-1:2 11 3 3 3 4 3 2 2 4;}
@font-face
	{font-family:"Source Sans Pro Light";
	panose-1:2 11 4 3 3 4 3 2 2 4;}
@font-face
	{font-family:"Source Sans Pro Semibold";
	panose-1:2 11 6 3 3 4 3 2 2 4;}
@font-face
	{font-family:"DejaVu Sans Condensed";
	panose-1:2 11 6 6 3 8 4 2 2 4;}
@font-face
	{font-family:Arimo;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Gentium Basic";
	panose-1:2 0 5 3 6 0 0 2 0 4;}
@font-face
	{font-family:"Gentium Book Basic";
	panose-1:2 0 5 3 6 0 0 2 0 4;}
@font-face
	{font-family:"DejaVu Sans";
	panose-1:2 11 6 3 3 8 4 2 2 4;}
@font-face
	{font-family:"DejaVu Sans Mono";
	panose-1:2 11 6 9 3 8 4 2 2 4;}
@font-face
	{font-family:"DejaVu Serif Condensed";
	panose-1:2 6 6 6 5 6 5 2 2 4;}
@font-face
	{font-family:"DejaVu Serif";
	panose-1:2 6 6 3 5 6 5 2 2 4;}
@font-face
	{font-family:"DejaVu Sans Light";
	panose-1:2 11 2 3 3 8 4 2 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
h1
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:12.0pt;
	margin-left:19.85pt;
	text-align:justify;
	text-indent:-19.85pt;
	page-break-before:always;
	font-size:14.0pt;
	font-family:"Verdana","sans-serif";
	color:#FF6600;
	text-transform:uppercase;
	font-weight:bold;}
h2
	{margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:18.0pt;
	margin-left:42.55pt;
	text-align:justify;
	text-indent:-42.55pt;
	font-size:12.0pt;
	font-family:"Verdana","sans-serif";
	color:#FF6600;
	text-transform:uppercase;
	font-weight:bold;
	font-style:italic;}
h3
	{mso-style-link:"Título 3 Car";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:12.0pt;
	margin-left:48.2pt;
	text-align:justify;
	text-indent:-48.2pt;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:#808836;
	font-weight:bold;}
h4
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:2.0cm;
	text-align:justify;
	text-indent:-2.0cm;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:#808836;
	font-weight:normal;}
h5
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:50.4pt;
	text-align:justify;
	text-indent:-50.4pt;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";
	color:blue;
	font-weight:normal;}
h6
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:57.6pt;
	text-align:justify;
	text-indent:-57.6pt;
	font-size:11.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;
	font-weight:normal;
	font-style:italic;}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:64.8pt;
	text-align:justify;
	text-indent:-64.8pt;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:72.0pt;
	text-align:justify;
	text-indent:-72.0pt;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;
	font-style:italic;}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:79.2pt;
	text-align:justify;
	text-indent:-79.2pt;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;
	font-weight:bold;
	font-style:italic;}
p.MsoIndex1, li.MsoIndex1, div.MsoIndex1
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:11.0pt;
	text-align:justify;
	text-indent:-11.0pt;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;}
p.MsoIndex2, li.MsoIndex2, div.MsoIndex2
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:24.0pt;
	text-align:justify;
	text-indent:-12.0pt;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoIndex3, li.MsoIndex3, div.MsoIndex3
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:36.0pt;
	text-align:justify;
	text-indent:-12.0pt;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoIndex4, li.MsoIndex4, div.MsoIndex4
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:48.0pt;
	text-align:justify;
	text-indent:-12.0pt;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoIndex5, li.MsoIndex5, div.MsoIndex5
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:60.0pt;
	text-align:justify;
	text-indent:-12.0pt;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoIndex6, li.MsoIndex6, div.MsoIndex6
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:72.0pt;
	text-align:justify;
	text-indent:-12.0pt;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoIndex7, li.MsoIndex7, div.MsoIndex7
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:84.0pt;
	text-align:justify;
	text-indent:-12.0pt;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoIndex8, li.MsoIndex8, div.MsoIndex8
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:96.0pt;
	text-align:justify;
	text-indent:-12.0pt;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoIndex9, li.MsoIndex9, div.MsoIndex9
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:108.0pt;
	text-align:justify;
	text-indent:-12.0pt;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	font-size:14.0pt;
	font-family:"Times New Roman","serif";
	color:windowtext;
	text-transform:uppercase;
	font-weight:bold;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:10.0pt;
	margin-bottom:.0001pt;
	font-size:13.0pt;
	font-family:"Times New Roman","serif";
	font-variant:small-caps;
	color:windowtext;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:20.0pt;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";
	color:windowtext;
	font-style:italic;}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:30.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";
	color:windowtext;}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:40.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";
	color:windowtext;}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:50.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";
	color:windowtext;}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:60.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";
	color:windowtext;}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:70.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";
	color:windowtext;}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:80.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";
	color:windowtext;}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	line-height:12.0pt;
	font-size:9.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	font-size:9.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;
	font-style:italic;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;
	font-style:italic;}
p.MsoIndexHeading, li.MsoIndexHeading, div.MsoIndexHeading
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;
	font-weight:bold;}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;
	font-weight:bold;}
p.MsoTof, li.MsoTof, div.MsoTof
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;}
span.MsoFootnoteReference
	{vertical-align:super;}
span.MsoEndnoteReference
	{vertical-align:super;}
p.MsoEndnoteText, li.MsoEndnoteText, div.MsoEndnoteText
	{mso-style-link:"Texto nota al final Car";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoToaHeading, li.MsoToaHeading, div.MsoToaHeading
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;
	font-weight:bold;}
p.MsoList, li.MsoList, div.MsoList
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:71.7pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:-17.85pt;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;
	letter-spacing:-.25pt;}
p.MsoListBullet, li.MsoListBullet, div.MsoListBullet
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:72.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:-18.0pt;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;
	letter-spacing:-.25pt;}
p.MsoListNumber, li.MsoListNumber, div.MsoListNumber
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";
	color:windowtext;}
p.MsoListBullet2, li.MsoListBullet2, div.MsoListBullet2
	{margin-top:3.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:32.05pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:-17.85pt;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoListBullet3, li.MsoListBullet3, div.MsoListBullet3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:108.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:-18.0pt;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;
	letter-spacing:-.25pt;}
p.MsoListBullet4, li.MsoListBullet4, div.MsoListBullet4
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:126.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:-18.0pt;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;
	letter-spacing:-.25pt;}
p.MsoListBullet5, li.MsoListBullet5, div.MsoListBullet5
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:144.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:-18.0pt;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;
	letter-spacing:-.25pt;}
p.MsoListNumber2, li.MsoListNumber2, div.MsoListNumber2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:89.85pt;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";
	color:windowtext;}
p.MsoListNumber3, li.MsoListNumber3, div.MsoListNumber3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:108.0pt;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";
	color:windowtext;}
p.MsoListNumber4, li.MsoListNumber4, div.MsoListNumber4
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:126.0pt;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";
	color:windowtext;}
p.MsoListNumber5, li.MsoListNumber5, div.MsoListNumber5
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:144.0pt;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";
	color:windowtext;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:12.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:22.0pt;
	font-family:"Arial","sans-serif";
	color:#FF6600;
	text-transform:uppercase;
	font-weight:bold;}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;
	font-weight:bold;}
p.MsoBodyTextIndent, li.MsoBodyTextIndent, div.MsoBodyTextIndent
	{mso-style-name:"Sangría de texto normal\,Sangría de t\. independiente";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoListContinue, li.MsoListContinue, div.MsoListContinue
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:14.15pt;
	text-align:justify;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;}
p.MsoListContinue2, li.MsoListContinue2, div.MsoListContinue2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:1.0cm;
	text-align:justify;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;}
p.MsoListContinue3, li.MsoListContinue3, div.MsoListContinue3
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:42.45pt;
	text-align:justify;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;}
p.MsoListContinue4, li.MsoListContinue4, div.MsoListContinue4
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:56.6pt;
	text-align:justify;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;}
p.MsoListContinue5, li.MsoListContinue5, div.MsoListContinue5
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:70.75pt;
	text-align:justify;
	font-size:11.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;}
p.MsoNoteHeading, li.MsoNoteHeading, div.MsoNoteHeading
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoBodyText2, li.MsoBodyText2, div.MsoBodyText2
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;
	font-weight:bold;}
p.MsoBodyText3, li.MsoBodyText3, div.MsoBodyText3
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:center;
	line-height:150%;
	font-size:24.0pt;
	font-family:"Verdana","sans-serif";
	color:blue;
	font-weight:bold;}
p.MsoBodyTextIndent2, li.MsoBodyTextIndent2, div.MsoBodyTextIndent2
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	text-indent:35.4pt;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoBodyTextIndent3, li.MsoBodyTextIndent3, div.MsoBodyTextIndent3
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:27.35pt;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoDocumentMap, li.MsoDocumentMap, div.MsoDocumentMap
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	background:navy;
	font-size:10.0pt;
	font-family:"Tahoma","sans-serif";
	color:windowtext;}
p
	{margin-right:0cm;
	margin-left:0cm;
	font-size:10.0pt;
	font-family:"Arial Unicode MS","sans-serif";
	color:black;}
code
	{font-family:"Arial Unicode MS","sans-serif";}
pre
	{mso-style-link:"HTML con formato previo Car";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Arial Unicode MS","sans-serif";
	color:black;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Texto de globo Car";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";
	color:windowtext;}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:36.0pt;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:36.0pt;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.Reference, li.Reference, div.Reference
	{mso-style-name:Reference;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:32.4pt;
	text-align:justify;
	text-indent:-18.2pt;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	color:windowtext;}
p.TitleofFigure, li.TitleofFigure, div.TitleofFigure
	{mso-style-name:"Title of Figure";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:center;
	text-indent:0cm;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.TitleofTable, li.TitleofTable, div.TitleofTable
	{mso-style-name:"Title of Table";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:12.0pt;
	margin-left:0cm;
	text-align:center;
	text-indent:0cm;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";
	color:windowtext;}
p.ListNumberlevel1, li.ListNumberlevel1, div.ListNumberlevel1
	{mso-style-name:"List Number level 1";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:31.2pt;
	text-align:justify;
	text-indent:-9.95pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	color:windowtext;}
span.a201
	{mso-style-name:a201;
	font-family:"Arial","sans-serif";}
span.magazinehdg1
	{mso-style-name:magazinehdg1;
	font-family:"Verdana","sans-serif";
	color:#333333;
	font-weight:bold;}
span.artcopy1
	{mso-style-name:artcopy1;
	font-family:"Trebuchet MS","sans-serif";
	color:#333333;
	text-decoration:none none;}
p.byline, li.byline, div.byline
	{mso-style-name:byline;
	margin-right:15.0pt;
	margin-left:0cm;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";
	color:#3A4959;
	font-weight:bold;
	font-style:italic;}
span.bold
	{mso-style-name:bold;}
span.contenttitle1
	{mso-style-name:contenttitle1;
	font-family:"Verdana","sans-serif";
	color:#002597;
	font-weight:bold;}
p.headline, li.headline, div.headline
	{mso-style-name:headline;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial Unicode MS","sans-serif";
	color:windowtext;}
span.title
	{mso-style-name:title;}
p.CdigoFuenteCar, li.CdigoFuenteCar, div.CdigoFuenteCar
	{mso-style-name:"Código Fuente Car";
	mso-style-link:"Código Fuente Car Car";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:17.0pt;
	font-size:11.0pt;
	font-family:"Courier New";
	color:windowtext;}
p.CdigoFuenteCarCxSpFirst, li.CdigoFuenteCarCxSpFirst, div.CdigoFuenteCarCxSpFirst
	{mso-style-name:"Código Fuente CarCxSpFirst";
	mso-style-link:"Código Fuente Car Car";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:17.0pt;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Courier New";
	color:windowtext;}
p.CdigoFuenteCarCxSpMiddle, li.CdigoFuenteCarCxSpMiddle, div.CdigoFuenteCarCxSpMiddle
	{mso-style-name:"Código Fuente CarCxSpMiddle";
	mso-style-link:"Código Fuente Car Car";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:17.0pt;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Courier New";
	color:windowtext;}
p.CdigoFuenteCarCxSpLast, li.CdigoFuenteCarCxSpLast, div.CdigoFuenteCarCxSpLast
	{mso-style-name:"Código Fuente CarCxSpLast";
	mso-style-link:"Código Fuente Car Car";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:17.0pt;
	font-size:11.0pt;
	font-family:"Courier New";
	color:windowtext;}
p.EstiloCdigoFuenteIzquierda125cm, li.EstiloCdigoFuenteIzquierda125cm, div.EstiloCdigoFuenteIzquierda125cm
	{mso-style-name:"Estilo Código Fuente + Izquierda\:  125 cm";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:35.45pt;
	font-size:11.0pt;
	font-family:"Courier New";
	color:windowtext;}
p.EstiloCdigoFuenteIzquierda125cmCxSpFirst, li.EstiloCdigoFuenteIzquierda125cmCxSpFirst, div.EstiloCdigoFuenteIzquierda125cmCxSpFirst
	{mso-style-name:"Estilo Código Fuente + Izquierda\:  125 cmCxSpFirst";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:35.45pt;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Courier New";
	color:windowtext;}
p.EstiloCdigoFuenteIzquierda125cmCxSpMiddle, li.EstiloCdigoFuenteIzquierda125cmCxSpMiddle, div.EstiloCdigoFuenteIzquierda125cmCxSpMiddle
	{mso-style-name:"Estilo Código Fuente + Izquierda\:  125 cmCxSpMiddle";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:35.45pt;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Courier New";
	color:windowtext;}
p.EstiloCdigoFuenteIzquierda125cmCxSpLast, li.EstiloCdigoFuenteIzquierda125cmCxSpLast, div.EstiloCdigoFuenteIzquierda125cmCxSpLast
	{mso-style-name:"Estilo Código Fuente + Izquierda\:  125 cmCxSpLast";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:35.45pt;
	font-size:11.0pt;
	font-family:"Courier New";
	color:windowtext;}
p.EstiloIzquierdaAntes0ptoDespus0pto, li.EstiloIzquierdaAntes0ptoDespus0pto, div.EstiloIzquierdaAntes0ptoDespus0pto
	{mso-style-name:"Estilo Izquierda Antes\:  0 pto Después\:  0 pto";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	color:windowtext;}
p.NormalCourierNew, li.NormalCourierNew, div.NormalCourierNew
	{mso-style-name:"Normal + Courier New";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Courier New";
	color:windowtext;}
span.CdigoFuenteCarCar
	{mso-style-name:"Código Fuente Car Car";
	mso-style-link:"Código Fuente Car";
	font-family:"Courier New";}
p.httponlaeterraes, li.httponlaeterraes, div.httponlaeterraes
	{mso-style-name:"http\:\/\/onlae\.terra\.es\/";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Courier New";
	color:windowtext;}
p.Microsoftsdocumentation, li.Microsoftsdocumentation, div.Microsoftsdocumentation
	{mso-style-name:"Microsoft’s documentation";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Courier New";
	color:windowtext;}
span.java-layer-method1
	{mso-style-name:java-layer-method1;
	font-family:"Monospaced","serif";
	font-weight:bold;}
span.java-keywords1
	{mso-style-name:java-keywords1;
	font-family:"Monospaced","serif";
	color:#000099;
	font-weight:bold;}
span.java-numeric-literals1
	{mso-style-name:java-numeric-literals1;
	color:#780000;}
span.java-string-literal1
	{mso-style-name:java-string-literal1;
	color:#99006B;}
span.java-block-comment1
	{mso-style-name:java-block-comment1;
	color:#737373;}
span.xml-pi-start1
	{mso-style-name:xml-pi-start1;
	font-family:"Monospaced","serif";
	color:#00007C;
	font-weight:bold;}
span.xml-pi-content1
	{mso-style-name:xml-pi-content1;
	color:#00007C;}
span.xml-comment1
	{mso-style-name:xml-comment1;
	color:#006666;}
span.xml-tag1
	{mso-style-name:xml-tag1;
	color:blue;}
span.xml-attribute1
	{mso-style-name:xml-attribute1;
	color:#007C00;}
span.xml-value1
	{mso-style-name:xml-value1;
	color:#99006B;}
span.java-errors1
	{mso-style-name:java-errors1;
	background:#FFAFAF;}
span.style21
	{mso-style-name:style21;
	color:#A0A0A0;}
span.style51
	{mso-style-name:style51;
	color:#0000A0;
	font-weight:bold;}
span.style11
	{mso-style-name:style11;}
span.style101
	{mso-style-name:style101;
	color:red;}
span.style41
	{mso-style-name:style41;
	color:#F000F0;}
span.style91
	{mso-style-name:style91;
	color:#00A000;}
span.body
	{mso-style-name:body;}
span.style61
	{mso-style-name:style61;
	color:blue;}
span.style121
	{mso-style-name:style121;
	color:blue;}
span.xml-error1
	{mso-style-name:xml-error1;
	background:#FFAFAF;}
span.xml-cdata-section1
	{mso-style-name:xml-cdata-section1;
	color:#7C6200;}
span.html-tag1
	{mso-style-name:html-tag1;
	color:blue;}
span.html-operator1
	{mso-style-name:html-operator1;
	color:#007C00;}
span.html-value1
	{mso-style-name:html-value1;
	color:#99006B;}
span.html-sgml-comment1
	{mso-style-name:html-sgml-comment1;
	color:gray;}
span.html-sgml-declaration1
	{mso-style-name:html-sgml-declaration1;
	color:#BF9221;}
span.jsp-html-tag1
	{mso-style-name:jsp-html-tag1;
	color:blue;}
span.jsp-html-argument1
	{mso-style-name:jsp-html-argument1;
	color:#007C00;}
span.jsp-xml-value1
	{mso-style-name:jsp-xml-value1;
	color:#99006B;}
span.java-annotation1
	{mso-style-name:java-annotation1;
	color:#006F00;}
span.html-character1
	{mso-style-name:html-character1;
	color:#B20000;}
span.ts
	{mso-style-name:ts;}
span.sts
	{mso-style-name:sts;}
p.NormalMonospaced, li.NormalMonospaced, div.NormalMonospaced
	{mso-style-name:"Normal + Monospaced\,Negrita\,Negro";
	mso-style-link:"Normal + Monospaced Car\,Negrita Car\,Negro Car";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Courier New";
	color:black;}
span.NormalMonospacedCar
	{mso-style-name:"Normal + Monospaced Car\,Negrita Car\,Negro Car";
	mso-style-link:"Normal + Monospaced\,Negrita\,Negro";
	font-family:"Courier New";
	color:black;}
span.literal1
	{mso-style-name:literal1;
	color:#0000E6;}
span.character1
	{mso-style-name:character1;
	color:#CE7B00;}
span.tag1
	{mso-style-name:tag1;
	color:#0000E6;}
span.argument1
	{mso-style-name:argument1;
	color:#009900;}
span.value1
	{mso-style-name:value1;
	color:#CE7B00;}
span.comment1
	{mso-style-name:comment1;
	color:#969696;}
span.st01
	{mso-style-name:st01;
	font-family:"Monospaced","serif";
	color:#CE7B00;
	font-weight:bold;}
span.keyword-directive1
	{mso-style-name:keyword-directive1;
	color:#0000E6;}
span.sgml-declaration1
	{mso-style-name:sgml-declaration1;
	color:#628FB5;}
span.TextonotaalfinalCar
	{mso-style-name:"Texto nota al final Car";
	mso-style-link:"Texto nota al final";
	font-family:"Verdana","sans-serif";}
span.HTMLconformatoprevioCar
	{mso-style-name:"HTML con formato previo Car";
	mso-style-link:"HTML con formato previo";
	font-family:"Arial Unicode MS","sans-serif";
	color:black;}
span.st11
	{mso-style-name:st11;
	color:#0000E6;}
span.st21
	{mso-style-name:st21;
	color:#009900;}
span.st31
	{mso-style-name:st31;
	color:#CE7B00;}
span.st41
	{mso-style-name:st41;
	color:#969696;}
span.st51
	{mso-style-name:st51;
	font-family:"Monospaced","serif";
	color:#CE7B00;
	font-weight:bold;}
span.comment
	{mso-style-name:comment;}
span.start-tag
	{mso-style-name:start-tag;}
span.attribute-name
	{mso-style-name:attribute-name;}
span.attribute-value
	{mso-style-name:attribute-value;}
span.end-tag
	{mso-style-name:end-tag;}
span.TextodegloboCar
	{mso-style-name:"Texto de globo Car";
	mso-style-link:"Texto de globo";
	font-family:"Tahoma","sans-serif";}
span.Ttulo3Car
	{mso-style-name:"Título 3 Car";
	mso-style-link:"Título 3";
	font-family:"Verdana","sans-serif";
	color:#808836;
	font-weight:bold;}
p.character, li.character, div.character
	{mso-style-name:character;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	color:#CE7B00;}
p.keyword-directive, li.keyword-directive, div.keyword-directive
	{mso-style-name:keyword-directive;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	color:#0000E6;}
span.msoIns
	{mso-style-name:"";
	text-decoration:underline;
	color:teal;}
span.msoDel
	{mso-style-name:"";
	text-decoration:line-through;
	color:red;}
.MsoChpDefault
	{font-size:10.0pt;}
 /* Page Definitions */
 @page WordSection1
	{size:21.0cm 842.0pt;
	margin:21.3pt 2.0cm 78.0pt 2.0cm;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=ES link=blue vlink=purple>

<div class=WordSection1>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'><span lang=EN-US>         
<span style='color:blue'>                                                                                  </span></span></p>

<p class=MsoNormal><span lang=EN-US>    </span></p>

<p class=MsoNormal align=center style='margin:0cm;margin-bottom:.0001pt;
text-align:center'><b><span lang=EN-US style='font-size:22.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><b><span
lang=EN-US style='font-size:34.0pt;line-height:150%;color:#FF6600'>Java Easy
Persistent Layer</span></b></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><b><span
lang=EN-US style='font-size:34.0pt;line-height:150%;color:#FF6600'>(JEPLayer)</span></b></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><b><span
style='font-size:32.0pt;line-height:150%;color:#FF6600'>Reference Manual</span></b></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><b><span
style='font-size:30.0pt;line-height:150%;color:#FF6600'>v1.2</span></b></p>

<p class=MsoNormal align=center style='text-align:center;line-height:150%'><b><span
style='font-size:18.0pt;line-height:150%'>Doc. version 1.0</span></b></p>

<p class=MsoNormal align=center style='margin:0cm;margin-bottom:.0001pt;
text-align:center'><b><span style='font-size:14.0pt'>Mar. 5, 2015</span></b></p>

<p class=MsoNormal align=center style='margin:0cm;margin-bottom:.0001pt;
text-align:center'><b><span style='font-size:14.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal align=center style='margin:0cm;margin-bottom:.0001pt;
text-align:center'><b><span style='font-size:14.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal align=center style='margin:0cm;margin-bottom:.0001pt;
text-align:center'><b><span style='font-size:14.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal align=center style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:9.35pt;margin-bottom:.0001pt;text-align:center;
text-indent:-9.35pt'><b><span style='font-size:14.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal align=center style='margin:0cm;margin-bottom:.0001pt;
text-align:center'><b><span style='font-size:14.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal align=center style='margin:0cm;margin-bottom:.0001pt;
text-align:center'><b><span style='font-size:14.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal align=center style='margin:0cm;margin-bottom:.0001pt;
text-align:center'><b><span style='font-size:14.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal align=center style='margin:0cm;margin-bottom:.0001pt;
text-align:center'><b><span style='font-size:14.0pt'>&nbsp;</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left'><b><span style='font-size:14.0pt'>© 2011-2015 Jose María
Arranz Santamaría </span></b><span style='color:blue'><br clear=all
style='page-break-before:always'>
</span></p>

<p class=MsoTitle><a name="_Toc462226985"></a><a name="_Toc413219483"></a><a
name="_Toc403905495"></a><a name="_Toc389654290"><span lang=EN-US>Table of
contents</span></a></p>

<p class=MsoToc1><span
lang=EN-GB><a href="#_Toc339112566"><span lang=EN-US>1. INTRODUCTION</span><span
style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112567">1.1<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>WHY ANOTHER JDBC BASED
TOOL<span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112568">1.2<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>WHAT IS DIFFERENT IN
JEPLAYER<span style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></p>

<p class=MsoToc1><span lang=EN-GB><a href="#_Toc339112569">2. CONSIDERATIONS<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112570">2.1<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>DOCUMENT SCOPE<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112571">2.2<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>DOCUMENT CONVENTIONS<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112572">2.3<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>LICENSE<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112573">2.4<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>COPYRIGHTS<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112574">2.5<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>REQUIRED DEVELOPER
TECHNICAL SKILLS<span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></p>

<p class=MsoToc1><span lang=EN-GB><a href="#_Toc339112575">3. REQUIREMENTS AND
INSTALLATION<span style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112576">3.1<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>TECHNICAL REQUIREMENTS,
LIMITATIONS AND DEPENDENCIES<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112577">3.2<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>JEPLAYER DISTRIBUTION<span
style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112578"><span lang=EN-US>3.2.1</span><span
lang=ES style='font-family:"Calibri","sans-serif";color:windowtext;font-style:
normal;text-decoration:none'>        </span><span lang=EN-US>Binaries version</span><span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112579"><span lang=EN-US>3.2.2</span><span
lang=ES style='font-family:"Calibri","sans-serif";color:windowtext;font-style:
normal;text-decoration:none'>        </span><span lang=EN-US>Development
version</span><span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112580">3.3<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>JEPLAYER SETUP<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></p>

<p class=MsoToc1><span lang=EN-GB><a href="#_Toc339112581">4. JEPLAYER
ARCHITECTURE<span style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112582">4.1<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>PURE
INTERFACE/IMPLEMENTATION PATTERN<span style='color:windowtext;display:none;
text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112583">4.2<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>LAYERED ARCHITECTURE<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112584"><span lang=EN-US>4.3</span><span
lang=ES style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span><span lang=EN-US>DATA
ACCESS LAYERS (DAL) AND DATA ACCESS OBJECTS (DAO)</span><span style='color:
windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112585"><span lang=EN-US>4.3.1</span><span
lang=ES style='font-family:"Calibri","sans-serif";color:windowtext;font-style:
normal;text-decoration:none'>        </span><span lang=EN-US>Data Access Layer
(DAL)</span><span style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112586"><span lang=EN-US>4.3.2</span><span
lang=ES style='font-family:"Calibri","sans-serif";color:windowtext;font-style:
normal;text-decoration:none'>        </span><span lang=EN-US>Data Access Object
(DAO)</span><span style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112587">4.4<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>PACKAGES<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112588">4.5<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>PERFORMANCE AND SECURITY<span
style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112589">4.5.1<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Performance<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112590">4.5.2<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Security<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></p>

<p class=MsoToc1><span lang=EN-GB><a href="#_Toc339112591">5. DEVELOPMENT WITH
JEPLAYER<span style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>9</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112592">5.1<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>CREATING A DATABASE
MODEL<span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>9</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112593">5.2<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>CREATING A DATA ACCESS
OBJECT (DAO)<span style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>11</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112594">5.2.1<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Insertion with automatic generation of
primary key<span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>13</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112595">5.2.2<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Options to declare and provide parameters
in SQL sentences<span style='color:windowtext;display:none;text-decoration:
none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>14</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112596">5.2.3<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Specifying listeners to control the
persistent lifecycle<span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>15</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112597">5.2.4<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Executing non-SELECT SQL sentences<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>17</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112598">5.2.5<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Select returning POJOs of your user data
object model<span style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>18</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112599">5.2.6<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Select returning POJOs of data model using
an automatic bean mapper<span style='color:windowtext;display:none;text-decoration:
none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>19</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112600">5.2.7<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Select a range of returning POJOs with
JEPLDAOQuery<span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>20</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112601">5.3<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>ADVANCED USES OF DAO AND
LISTENERS<span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>21</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112602">5.3.1<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Select query with a max number of rows
using a listener and the JEPLTask<span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>21</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112603">5.3.2<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Select query paged specified by index
range<span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>23</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112604">5.4<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>FREE-HAND QUERIES<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>24</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112605">5.5<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>GROUPING PERSISTENT
ACTIONS: JEPLTASKS<span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>24</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112606">5.6<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>NON-JTA TRANSACTIONS<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>25</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112607">5.6.1<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Transactional behavior configured in
JEPLDataSource level<span style='color:windowtext;display:none;text-decoration:
none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>26</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112608">5.6.2<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Transactional behavior configured with an
annotation in JEPLTask level<span style='color:windowtext;display:none;
text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>26</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112609">5.6.3<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Transactional behavior configured with a
parameter in JEPLTask level<span style='color:windowtext;display:none;
text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>27</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112610">5.6.4<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Transactional behavior configured with
JEPLConnectionListener<span style='color:windowtext;display:none;text-decoration:
none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>27</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112611">5.6.5<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Manual demarcation of a transaction with
JEPLConnectionListener<span style='color:windowtext;display:none;text-decoration:
none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>28</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112612">5.6.6<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Manual demarcation of a transaction using
JEPLTransaction<span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>29</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112613">5.6.7<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Manual demarcation of a transaction inside
JEPLTask<span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>29</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112614">5.6.8<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Nested transactional tasks<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>30</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112615">5.7<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>JTA TRANSACTIONS<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>30</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112616">5.7.1<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Tested JTA environments<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>31</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112617">5.7.2<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>How JEPLayer works in JTA mode<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>31</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112618">5.7.3<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Transactional behavior configured in
JEPLDataSource level<span style='color:windowtext;display:none;text-decoration:
none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>32</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112619">5.7.4<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Transactional behavior configured with an
annotation in JEPLTask level<span style='color:windowtext;display:none;
text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>33</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112620">5.7.5<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Transactional behavior configured with a
parameter in JEPLTask level<span style='color:windowtext;display:none;
text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>34</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112621">5.7.6<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Manual demarcation of a transaction with
JEPLConnectionListener<span style='color:windowtext;display:none;text-decoration:
none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>34</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112622">5.7.7<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Manual demarcation of a transaction using
JEPLTransaction<span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>35</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112623">5.7.8<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Manual demarcation of a transaction
outside JEPLTask<span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>35</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112624">5.7.9<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>        </span>Nested transactional tasks/regions<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>36</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112625">5.8<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>FAKE JTA TRANSACTIONS<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>36</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112626">5.9<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>      </span>SUPPORT OF MULTIPLE
DATASOURCES IN JTA<span style='color:windowtext;display:none;text-decoration:
none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>37</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112627">5.10<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>       </span>UNCACHED RESULTSET<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>38</span></a></span></p>

<p class=MsoToc2><span lang=EN-GB style='font-variant:normal !important;
text-transform:uppercase'><a href="#_Toc339112628">5.11<span lang=ES
style='font-size:11.0pt;font-family:"Calibri","sans-serif";color:windowtext;
text-transform:none;text-decoration:none'>       </span>INHERITANCE EXAMPLE<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>40</span></a></span></p>

<p class=MsoToc3><span lang=EN-GB><a href="#_Toc339112629">5.11.1<span lang=ES
style='font-family:"Calibri","sans-serif";color:windowtext;font-style:normal;
text-decoration:none'>     </span>Queries mixing several tables/object types in
the same hierarchy<span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>44</span></a></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><a name="_Toc131510129"><span lang=EN-US>&nbsp;</span></a></p>

<h1><a name="_Toc339112566"><span lang=EN-US>1. </span><span lang=EN-US>INTRODUCTION</span></a></h1>

<h2><a name="_Toc339112567"></a><a name="_Toc131510130"><span lang=EN-GB>1.1 <span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-GB>WHY ANOTHER JDBC BASED TOOL</span></a></h2>

<p class=MsoNormal><span lang=EN-US>JEPLayer was born to provide </span></p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-18.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-US>A simple API to avoid the tedious tasks of JDBC</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-US>Several optional listeners to fully customize the lifecycle of JDBC persistence</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
lang=EN-US>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-US>Methods to build simple and complex DAOs</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
lang=EN-US>4)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-US>An extremely simple, automatic, configurable and error-free way to
demarcate transactions </span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
lang=EN-US>5)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-US>Does not replace JDBC, instead of this, JDBC objects are exposed
when required</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
lang=EN-US>6)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-US>Ever using </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>PreparedStatement</span></span><span lang=EN-US>, ever
secure</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
lang=EN-US>7)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>PreparedStatement</span></span><span
lang=EN-US> objects are automatically cached and reused</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
lang=EN-US>8)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-US>Fluid query API very similar to JPA 2 Query</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
lang=EN-US>9)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-US>Pure JDBC and JTA based transaction support built-in similar to
method based demarcation in Spring or JavaEE </span></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-18.0pt'><span lang=EN-US>10)</span><span
lang=EN-US>JTA simulation (“fake JTA”) to code the same in JTA and non-JTA
environments</span></p>

<h2><a name="_Toc339112568"><span lang=EN-GB>1.2 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>WHAT IS DIFFERENT IN JEPLAYER</span></a></h2>

<p class=MsoNormal><span lang=EN-US>JEPLayer is simpler than Spring’s
JdbcTemplate<a href="#_ftn1" name="_ftnref1" title=""><span
class=MsoFootnoteReference><span class=MsoFootnoteReference><span lang=EN-US
style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>[1]</span></span></span></a>
and has similar power, the persistent lifecycle can be fully configurable
providing more interception points, it does not try to replace JDBC and JDBC and
JTA transactions utilities are built-in, transaction management and demarcation
are much simpler than Spring’s Transactions<a href="#_ftn2" name="_ftnref2"
title=""><span class=MsoFootnoteReference><span class=MsoFootnoteReference><span
lang=EN-US style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>[2]</span></span></span></a>.</span></p>

<p class=MsoNormal><span lang=EN-US>JEPLayer is programmatic instead of the
declarative path of iBatis/MyBatis<a href="#_ftn3" name="_ftnref3" title=""><span
class=MsoFootnoteReference><span class=MsoFootnoteReference><span lang=EN-US
style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>[3]</span></span></span></a>
and the learning curve is flatter because JDBC API is not replaced.</span></p>

<p class=MsoNormal><span lang=EN-US>JEPLayer provides transaction demarcation
based on methods in a similar way as Spring or JavaEE, but no intrusive IoC
container is required and there is no loss of control of the lifecycle of user defined
classes.</span></p>

<p class=MsoNormal><span lang=EN-US>JEPLayer allows getting the most of the
database with no performance penalty and no waste of control typical of
transparent persistence ORMs like Hibernate or JPA. </span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc339112569"><span lang=EN-GB>2. </span><span lang=EN-GB>CONSIDERATIONS</span></a></h1>

<h2><a name="_Toc339112570"><span lang=EN-GB>2.1 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>DOCUMENT SCOPE</span></a></h2>

<p class=MsoNormal><span lang=EN-US>This manual makes an extensive
documentation of JEPLayer features but must be complemented with the API
documentation in javadoc format.</span></p>

<h2><a name="_Toc339112571"><span lang=EN-GB>2.2 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>DOCUMENT CONVENTIONS</span></a></h2>

<p class=MsoNormal><span lang=EN-US>A Verdana font is used to describe JEPLayer.</span></p>

<p class=CdigoFuenteCar style='margin-left:0cm'><span lang=EN-US>A Courier New
font is used for Java source code.</span></p>

<h2><a name="_Toc339112572"><span lang=EN-GB>2.3 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>LICENSE</span></a></h2>

<p class=MsoNormal><span lang=EN-US>JEPLayer is open source and Apache License
Version 2 licensed<a href="#_ftn4" name="_ftnref4" title=""><span
class=MsoFootnoteReference><span class=MsoFootnoteReference><span lang=EN-US
style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>[4]</span></span></span></a>.</span></p>

<h2><a name="_Toc339112573"><span lang=EN-GB>2.4 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>COPYRIGHTS</span></a></h2>

<p class=MsoNormal><span lang=EN-US>Jose María Arranz Santamaría is the author and
intellectual property owner of JEPLayer source code, documentation and examples.
</span></p>

<h2><a name="_Toc339112574"><span lang=EN-GB>2.5 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>REQUIRED DEVELOPER TECHNICAL SKILLS</span></a></h2>

<p class=MsoNormal><span lang=EN-US>Java 1.5 and JDBC knowledge are required.</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc339112575"><span lang=EN-GB>3. </span><span lang=EN-GB>REQUIREMENTS
AND INSTALLATION</span></a></h1>

<h2><a name="_Toc339112576"><span lang=EN-GB>3.1 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>TECHNICAL REQUIREMENTS, LIMITATIONS AND
DEPENDENCIES</span></a></h2>

<p class=MsoNormal><span lang=EN-US>JEPLayer is compiled with Oracle’s Java Standard
Edition (JavaSE) SDK 1.7 configured with 1.6 source and binary modes.</span></p>

<h2><a name="_Toc339112577"><span lang=EN-GB>3.2 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>JEPLAYER DISTRIBUTION</span></a></h2>

<p class=MsoNormal><span lang=EN-US>JEPLayer is distributed on two forms:</span></p>

<h3><a name="_Toc339112578"><span lang=EN-US>3.2.1 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Binaries version</span></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:"Courier New"'>JEPLayer_bin_X.zip</span><span
lang=EN-US> contains the required binaries to include in Java applications
using JEPLayer, where X is the version.</span></p>

<p class=MsoNormal><span lang=EN-US>Decompress this distribution ZIP file. The
content of this file is two folders:</span></p>

<p class=MsoNormal><span lang=EN-US>doc/ =&gt; Contains this manual and javadoc
archives</span></p>

<p class=MsoNormal><span lang=EN-US>bin/ =&gt; Contains the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>jeplayer.jar</span></span><span
lang=EN-US> containing the compiled Java classes.</span></p>

<h3><a name="_Toc339112579"><span lang=EN-US>3.2.2 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Development version</span></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:"Courier New"'>JEPLayer_src_X.zip</span><span
lang=EN-US> is a NetBeans project (created with NetBeans v6.9) used to build,
test and deploy the project. This project needs a MySQL database server (tested
MySQL 5) installed in the same computer to run the tests.</span></p>

<p class=MsoNormal><span lang=EN-US>The code of examples and tests is not
included on “binaries” distribution and is also Apache v2.0 licensed. </span></p>

<p class=MsoNormal><span lang=EN-US>The code of this distribution is used in
this manual to show with examples how JEPLayer works.</span></p>

<h2><a name="_Toc339112580"><span lang=EN-GB>3.3 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>JEPLAYER SETUP</span></a></h2>

<p class=MsoNormal><span lang=EN-US>All of you need is to add </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>jeplayer.jar</span></span><span
lang=EN-US> to the classpath of your project and all is done, JEPLayer is fully
configured programmatically, you just need to setup a database and obtain in
Java the corresponding </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>javax.sql.DataSource</span></span><span lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>In Maven you can add to your </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>pom.xml</span></span><span
lang=EN-US> something like (names can change):</span></p>

<p class=CdigoFuenteCarCxSpFirst><span lang=EN-GB>  </span><span lang=EN-GB> </span><span
lang=EN-GB>&lt;dependency&gt;</span></p>

<p class=CdigoFuenteCarCxSpMiddle><span lang=EN-GB>     
&lt;groupId&gt;jeplayer&lt;/groupId&gt;</span></p>

<p class=CdigoFuenteCarCxSpMiddle><span lang=EN-GB>     
&lt;artifactId&gt;jeplayer-jar&lt;/artifactId&gt;</span></p>

<p class=CdigoFuenteCarCxSpMiddle><span lang=EN-GB>      &lt;version&gt;1.0&lt;/version&gt;</span></p>

<p class=CdigoFuenteCarCxSpMiddle><span lang=EN-GB>     
&lt;scope&gt;system&lt;/scope&gt;</span></p>

<p class=CdigoFuenteCarCxSpMiddle><span lang=EN-GB> </span><span lang=EN-GB>    
&lt;systemPath&gt;JEPLayer dist folder/bin/jeplayer.jar&lt;/systemPath&gt;</span></p>

<p class=CdigoFuenteCarCxSpLast><span lang=EN-GB>   &lt;/dependency&gt;</span></p>

<p class=MsoNormal><span lang=EN-US>Or install in your local repository (names
can change):</span></p>

<p class=CdigoFuenteCarCxSpFirst style='margin-left:7.1pt;text-indent:-7.1pt'><span
lang=EN-GB>mvn install:install-file -Dfile=&lt;path-jeplayer.jar&gt;
-DgroupId=jeplayer</span><span lang=EN-GB> </span><span lang=EN-GB>\</span></p>

<p class=CdigoFuenteCarCxSpLast style='margin-left:7.1pt;text-indent:-7.1pt'><span
lang=EN-GB>    -DartifactId=jeplayer-jar -Dversion=1.0 -Dpackaging=jar</span></p>

<pre><span lang=EN-GB>Use  </span><span class=CdigoFuenteCarCar><span
lang=EN-US style='font-size:11.0pt'>${basedir}</span></span><span lang=EN-GB> to avoid absolute paths.</span></pre>

<h1><a name="_Toc339112581"><span lang=EN-GB>4. </span><span lang=EN-GB>JEPLAYER
ARCHITECTURE</span></a></h1>

<h2><a name="_Toc339112582"><span lang=EN-GB>4.1 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>PURE INTERFACE/IMPLEMENTATION PATTERN</span></a></h2>

<p class=MsoNormal><span lang=EN-US>JEPLayer is almost fully based on
interfaces, only very few classes are public, the root class </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLBootRoot</span></span><span
lang=EN-US> is the factory for all utility objects of the framework, exposed to
developers through interfaces (excluding </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLException)</span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>Interface based architecture avoids class
inheritance as a way of extension of the framework for end users. Instead of
class inheritance, JEPLayer provides many hooks (listeners) as the standard way
to extend and use the framework. Class inheritance is absolutely fine when you
have complete control of the source code of the tree including base classes and
is extensively used inside JEPLayer, but is not a good idea in a public API to
final users.</span></p>

<h2><a name="_Toc339112583"><span lang=EN-GB>4.2 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>LAYERED ARCHITECTURE</span></a></h2>

<p class=MsoNormal><span lang=EN-US>JEPLayer is constructed on top of the JDBC
interfaces using a layer &amp; composition approach. For instance a </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLDataSource</span></span><span
lang=EN-US> object wraps and contains an attribute containing the standard </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>javax.sql.DataSource</span></span><span
lang=EN-US> object. You can ever obtain the wrapped </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>DataSource</span></span><span
lang=EN-US> calling </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLDataSource.getDataSource().</span></span><span
lang=EN-US> The same pattern is applied to any other JDBC interface, that is most
of JDBC interfaces have a corresponding JEPLayer wrapping interface with the
pattern </span><span class=CdigoFuenteCarCar><span lang=EN-US style='font-size:
11.0pt'>JEPL<i>NameOfJDBCInterface</i></span></span><span lang=EN-US> and the
wrapped object can be obtained calling </span><span class=CdigoFuenteCarCar><span
lang=EN-US style='font-size:11.0pt'>JEPL<i>NameOfJDBCInterface.</i>get<i>NameOfJDBCInterface()</i></span></span><span
lang=EN-US> when required; for instance </span><span class=CdigoFuenteCarCar><span
lang=EN-US style='font-size:11.0pt'>Connection</span></span><span lang=EN-US>
is wrapped by </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLConnection</span></span><span lang=EN-US> which
contains a method </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLConnection.getConnection()</span></span><span
lang=EN-US> and so on. </span></p>

<p class=MsoNormal><span lang=EN-US>All of JEPLayer interfaces and classes
start with </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPL</span></span><span lang=EN-US> prefix.</span></p>

<h2><a name="_Toc339112584"><span lang=EN-US>4.3 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>DATA ACCESS LAYERS (DAL) AND DATA ACCESS OBJECTS
(DAO)</span></a></h2>

<p class=MsoNormal><span lang=EN-US>JEPLayer has two levels of database access,
Data Access Layer (DAL) and Data Access Object (DAO).</span></p>

<h3><a name="_Toc339112585"><span lang=EN-US>4.3.1 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Data Access Layer (DAL)</span></a></h3>

<p class=MsoNormal><span lang=EN-US>In this lower level, represented by </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLDAL</span></span><span
lang=EN-US> interface, you can access your database in a generic way, that is,
DAL APIs are not designed to provide utilities to create and fill POJOs of your
object data model. </span></p>

<p class=MsoNormal><span lang=EN-US>You can see DAL API as a higher level JDBC
API.</span></p>

<h3><a name="_Toc339112586"><span lang=EN-US>4.3.2 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Data Access Object (DAO)</span></a></h3>

<p class=MsoNormal><span lang=EN-US>This level, represented by </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLDAO</span></span><span
lang=EN-US> interface and extending </span><span class=CdigoFuenteCarCar><span
lang=EN-US style='font-size:11.0pt'>JEPLDAL</span></span><span lang=EN-US>, can
be used to create and fill POJOs of an object data model, that is, DAO APIs are
the Object Relational Mapping (ORM) level of JEPLayer. </span></p>

<p class=MsoNormal><span lang=EN-US>You can see JEPLayer DAO API as a lower
level API of your favorite ORM providing transparent persistence (Hibernate, JPA,
JDO…).</span></p>

<h2><a name="_Toc339112587"><span lang=EN-GB>4.4 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>PACKAGES</span></a></h2>

<p class=MsoNormal><span lang=EN-US>All public classes and interfaces are
inside the package:  </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>jepl</span></span></p>

<p class=MsoNormal><span lang=EN-US>Implementation of non-public classes are
located in: </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>jepl.impl</span></span></p>

<h2><a name="_Toc339112588"><span lang=EN-GB>4.5 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>PERFORMANCE AND SECURITY</span></a></h2>

<h3><a name="_Toc339112589"><span lang=EN-GB>4.5.1 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Performance</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>JEPLayer is a thin layer on top of JDBC and
the performance penalty due to the library is minimum or none compared with
custom made equivalent JDBC code. Furthermore, JEPLayer ever uses </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>PreparedStatement</span></span><span
lang=EN-GB> these objects are automatically cached and reused when the SQL
sentence being used is the same, this caching can save around 15% of processing
time in tests performed against MySQL when the same SQL statements are executed
frequently.</span></p>

<p class=MsoNormal><span lang=EN-GB>JEPLayer is designed to be used in a
multithread environment with almost no synchronized code. In fact synchronized
code is only defined in </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLUserData</span></span><span lang=EN-US> </span><span
lang=EN-GB>methods of ready to be singleton objects (</span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLBoot</span></span><span
lang=EN-GB>, </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDataSource</span></span><span lang=EN-GB>, </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDAL</span></span><span
lang=EN-GB> and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDAO</span></span><span lang=EN-GB> objects), if you
are not using these methods in these objects, there are no synchronized methods.
The only significative shared registries managed by JEPLayer are some </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>ThreadLocal</span></span><span
lang=EN-GB> objects for instance containing the current </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span
lang=EN-GB> associated to the thread. Of course JEPLayer uses the connection
pooling provided by your </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>DataSource</span></span><span lang=EN-GB> (JEPLayer
supposes your </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>DataSource</span></span><span lang=EN-GB> is a
connection pool), the performance of this pool depends on the pool framework or
database driver used, JEPLayer does not provide a </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>DataSource</span></span><span
lang=EN-GB> pool.</span></p>

<h3><a name="_Toc339112590"><span lang=EN-GB>4.5.2 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Security</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>Regarding to security, JEPLayer ever uses </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>PreparedStatement</span></span><span
lang=EN-GB> objects to avoid malicious SQL injection through parameters
provided by end users<a href="#_ftn5" name="_ftnref5" title=""><span
class=MsoFootnoteReference><span class=MsoFootnoteReference><span lang=EN-GB
style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>[5]</span></span></span></a>.</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<h1><a name="_Toc339112591"><span lang=EN-GB>5. </span><span lang=EN-GB>DEVELOPMENT
WITH JEPLAYER</span></a></h1>

<h2><a name="_Toc339112592"></a><a name="_Ref266722280"><span lang=EN-GB>5.1 <span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-GB>CREATING A DATABASE MODEL</span></a></h2>

<p class=MsoNormal><span lang=EN-US>In the following examples we are going to
use a simple (well not so simple) database example to show JEPLayer
capabilities, first of all we are going to create our DB schema
programmatically with JEPLayer, this code is the first example of DAL-like
access to the DB.</span></p>

<p class=MsoNormal><span lang=EN-US>Previously we have set up a MySQL 5
database and added the JDBC driver to the classpath, JEPLayer is database
agnostic but in these examples MySQL and MySQL JDBC driver is supposed. We have
previously developed a custom class, </span><span class=CdigoFuenteCarCar><span
lang=EN-US style='font-size:11.0pt'>DataSourceFactory, </span></span><span
lang=EN-US>just to get a </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>javax.sql.</span></span><span class=CdigoFuenteCarCar><span
lang=EN-US style='font-size:11.0pt'>DataSource</span></span><span lang=EN-US>
of our MySQL database, details of this factory class are not important, in your
application use the kind of configuration technique you like more to get the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>DataSource</span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>class</span><span lang=EN-US style='font-family:"Courier New";
color:black'> CreateDBModel</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>{</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>static</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> main(String[] args)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        DataSourceFactory dsFactory = </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       DataSourceFactoryImpl.createDataSourceFactoryJDBC();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        DataSource ds = dsFactory.getDataSource();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        JEPLBootNonJTA boot =
JEPLBootRoot.get().createJEPLBootNonJTA();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        JEPLNonJTADataSource jds =
boot.createJEPLNonJTADataSource(ds);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>try</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            JEPLDAL dal = jds.createJEPLDAL();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            dal.createJEPLDALQuery(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;DROP TABLE IF EXISTS
PERSON&quot;</span><span lang=EN-US style='font-family:"Courier New";
color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       .executeUpdate();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            dal.createJEPLDALQuery(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;DROP TABLE IF EXISTS
COMPANY&quot;</span><span lang=EN-US style='font-family:"Courier New";
color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       .executeUpdate();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            dal.createJEPLDALQuery(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;DROP TABLE IF EXISTS
CONTACT&quot;</span><span lang=EN-US style='font-family:"Courier New";
color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       .executeUpdate();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            dal.createJEPLDALQuery(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;CREATE TABLE  CONTACT (&quot;</span><span lang=EN-US
style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;  ID INT NOT NULL AUTO_INCREMENT,&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;  EMAIL VARCHAR(255) NOT NULL,&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;  NAME VARCHAR(255) NOT NULL,&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;  PHONE VARCHAR(255) NOT NULL,&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;  PRIMARY KEY (ID)&quot;</span><span lang=EN-US
style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;)&quot;</span><span lang=EN-US style='font-family:"Courier New";
color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;ENGINE=InnoDB&quot;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                ).executeUpdate();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            dal.createJEPLDALQuery(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;CREATE TABLE  PERSON (&quot;</span><span lang=EN-US
style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;  ID INT NOT NULL,&quot;</span><span lang=EN-US
style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;  AGE SMALLINT,&quot;</span><span lang=EN-US
style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;  CONSTRAINT PERSON_FK_ID FOREIGN KEY (ID) REFERENCES
CONTACT(ID) &quot;</span><span lang=EN-US style='font-family:"Courier New";
color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;     ON DELETE CASCADE&quot;</span><span lang=EN-US
style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;)&quot;</span><span lang=EN-US style='font-family:"Courier New";
color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;ENGINE=InnoDB&quot;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                ).executeUpdate();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            dal.createJEPLDALQuery(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;CREATE TABLE  COMPANY (&quot;</span><span lang=EN-US
style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;  ID INT NOT NULL,&quot;</span><span lang=EN-US
style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;  ADDRESS VARCHAR(255) NOT NULL,&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;  CONSTRAINT COMPANY_FK_ID FOREIGN KEY (ID) REFERENCES
CONTACT(ID) &quot;</span><span lang=EN-US style='font-family:"Courier New";
color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;     ON DELETE CASCADE&quot;</span><span lang=EN-US
style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;)&quot;</span><span lang=EN-US style='font-family:"Courier New";
color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;ENGINE=InnoDB&quot;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                ).executeUpdate();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>finally</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            dsFactory.destroy();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>}</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>This code creates three tables, CONTACT,
PERSON, COMPANY, the relationship is 1-1 of CONTACT with PERSON or COMPANY, in
fact, later we are going to model in Java this relationship as inheritance of classes
</span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Person</span></span><span
lang=EN-US> and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Company</span></span><span lang=EN-US> from </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Contact</span></span><span
lang=EN-US>. Note the </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>ON DELETE CASCADE</span></span><span lang=EN-US>, this
constraint will be important (in spite of we may not rely on this constraint
and work with un-constrained tables).</span></p>

<p class=MsoNormal><span lang=EN-US>Let’s see in more detail… </span></p>

<p class=CdigoFuenteCar><span lang=EN-US>     JEPLBootNonJTA boot =
JEPLBootRoot.get().createJEPLBootNonJTA();</span></p>

<p class=MsoNormal><span lang=EN-US>Creates the root factory object of non-JTA
utilities in JEPLayer, this object can be a singleton and is the source of </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLDataSource</span></span><span
lang=EN-US> objects wrapping </span><span class=CdigoFuenteCarCar><span
lang=EN-US style='font-size:11.0pt'>DataSource</span></span><span lang=EN-US>
objects.</span></p>

<p class=MsoNormal><span lang=EN-US>The method </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLBootNonJTA.createJEPLNonJTADataSource(DataSource)</span></span><span
lang=EN-US> creates a </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLNonJTADataSource </span></span><span lang=EN-US>object,
this interface inherits from </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLDataSource</span></span><span
lang=EN-US> and contains a </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>DataSource</span></span><span lang=EN-GB> </span><span
lang=EN-US>to be used in a pure JDBC transactional environment, that is,
auto-commit modes and JDBC transaction methods </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>commit()</span></span><span
lang=EN-US> and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>rollback()</span></span><span lang=EN-US> of </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>java.sql.Connection</span></span><span
lang=EN-US> are explicitly used to control transaction behavior instead of the Java
Transaction API (JTA) approach.  </span></p>

<p class=MsoNormal><span lang=EN-US>In spite of JEPLayer provides non-JTA and
JTA APIs, most of methods are shared between both approaches, furthermore,
JEPLayer provides a “fake” JTA </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>UserTransaction</span></span><span
lang=EN-US> using underlying pure JDBC (non-JTA). </span></p>

<p class=MsoNormal><span lang=EN-US>The same as </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>DataSource</span></span><span
lang=EN-US>, a </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLNonJTADataSource</span></span><span lang=EN-US> object
can also be a singleton.</span></p>

<p class=MsoNormal><span lang=EN-US>Through </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLNonJTADataSource</span></span><span
lang=EN-US>, </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLDAL</span></span><span lang=EN-US> objects are
created calling </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLNonJTADataSource.createJEPLDAL()</span></span><span
lang=EN-US>. As you can see a </span><span class=CdigoFuenteCarCar><span
lang=EN-US style='font-size:11.0pt'>JEPLDAL</span></span><span lang=EN-US>
object is bound indirectly to a </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>DataSource</span></span><span lang=EN-US>
and any SQL action is performed through the internal </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>DataSource</span></span><span
lang=EN-US>. </span></p>

<p class=MsoNormal><span lang=EN-US>Take a look to the sentence: </span></p>

<p class=CdigoFuenteCar><span lang=EN-US>dal.</span><span lang=EN-US
style='color:black'>createJEPLDALQuery</span><span lang=EN-US>(<span
style='color:#CE7B00'>&quot;DROP TABLE IF EXISTS PERSON&quot;</span>).executeUpdate();</span></p>

<p class=MsoNormal><span lang=EN-US>The lifecycle is getting a </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>javax.sql.Connection</span></span><span
lang=EN-US> from the </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>DataSource</span></span><span lang=EN-US> pool,
executing the specified SQL sentence calling </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>PreparedStatement.executeUpdate(String)</span></span><span
lang=EN-US> and closing the connection (returning to the pool). In this simple example,
the complete lifecycle is executed on every call, we will see later how to
reuse the same </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Connection</span></span><span lang=EN-US> for several
statements before returning to the pool and optionally group them into a
transaction. </span></p>

<p class=MsoNormal><span lang=EN-US>The method </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDAL.createJEPLDALQuery()</span></span><span
lang=EN-US> creates a </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDALQuery</span></span><span lang=EN-US> object (a
DAL level query), this object provides a “fluid API” very similar to </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Query</span></span><span
lang=EN-GB> </span><span lang=EN-US>of JPA, one method is </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>executeUpdate()</span></span><span
lang=EN-US> which execute the SQL sentence calling </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>PreparedStatement.executeUpdate(String)</span></span><span
lang=EN-US>. </span></p>

<p class=MsoNormal><span lang=EN-US>If a </span><span class=CdigoFuenteCarCar><span
lang=EN-US style='font-size:11.0pt'>JEPLDAL</span></span><span lang=EN-US> object
can be a singleton, why are not </span><span class=CdigoFuenteCarCar><span
lang=EN-US style='font-size:11.0pt'>JEPLDAL</span></span><span lang=EN-US>
methods defined in </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLDataSource</span></span><span lang=EN-US>?</span></p>

<p class=MsoNormal><span lang=EN-US>Because typical use of </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLDAL</span></span><span
lang=EN-US> is to be used alongside the DAO level API, </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLDAO</span></span><span
lang=EN-US>, a </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLDAO</span></span><span lang=EN-US> object is also
a </span><span class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLDAL</span></span><span
lang=EN-US> (because </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLDAO</span></span><span lang=EN-US> inherits from </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLDAL</span></span><span
lang=EN-US>), and usually you create a </span><span class=CdigoFuenteCarCar><span
lang=EN-US style='font-size:11.0pt'>JEPLDAO</span></span><span lang=EN-US>
instance (and a class implementing this interface) per table and POJO class,
the typical pattern of DAO programming. Further we will see how we will need to
configure every JEPLDAO instance to perform queries to the same table/POJO. </span></p>

<p class=MsoNormal><span lang=EN-US>Note that </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLDataSource</span></span><span
lang=EN-US> and </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLDAL</span></span><span lang=EN-US> inherit both from
</span><span class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLUserData</span></span><span
lang=EN-US>, this interface represents a simple </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>Map</span></span><span
lang=EN-US> for auxiliary data, most of JEPLayer objects implement this
interface. If an object can be a singleton, </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLUserData</span></span><span
lang=EN-US> methods are synchronized (thread safe).</span></p>

<h2><a name="_Toc339112593"></a><a name="_Toc287880979"><span lang=EN-GB>5.2 <span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-GB>CREATING A DATA ACCESS OBJECT</span></a><span lang=EN-GB> (DAO)</span></h2>

<p class=MsoNormal><span lang=EN-US>The class </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Contact</span></span><span
lang=EN-US> is the obvious POJO class representing the table </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>CONTACT</span></span><span
lang=EN-US>:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>class</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> Contact</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>{</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>protected</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> id;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>protected</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> String name;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>protected</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> String phone;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>protected</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> String email;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> Contact(</span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> id, String name, String phone, String email)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>        </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>this</span><span lang=EN-GB style='font-family:"Courier New";
color:black'>.id = id;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>        </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>this</span><span lang=EN-GB style='font-family:"Courier New";
color:black'>.name = name;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>        </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>this</span><span lang=EN-GB style='font-family:"Courier New";
color:black'>.phone = phone;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>        </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>this</span><span lang=EN-GB style='font-family:"Courier New";
color:black'>.email = email;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> Contact()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>  /* ... gets and sets ... */</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>}</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>The </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>ContactDAO</span></span><span lang=EN-US>
based on JEPLayer would be something like (imports are omitted):</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>class</span><span lang=EN-US style='font-family:"Courier New";
color:black'> ContactDAO </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>implements</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLResultSetDAOListener&lt;Contact&gt;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>{</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>protected</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLDAO&lt;Contact&gt; dao;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> ContactDAO(JEPLDataSource ds)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>this</span><span lang=EN-US style='font-family:"Courier New";
color:black'>.dao = ds.createJEPLDAO(Contact.</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>class</span><span lang=EN-US
style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        dao.addJEPLListener(</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>this</span><span lang=EN-US
style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLDAO&lt;Contact&gt; getJEPLDAO()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLResultSet(JEPLResultSet jrs,JEPLTask&lt;?&gt; task) </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact createObject(JEPLResultSet jrs) </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>throws</span><span lang=EN-US
style='font-family:"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> fillObject(Contact obj,JEPLResultSet jrs) </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>throws</span><span
lang=EN-US style='font-family:"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        ResultSet rs = jrs.getResultSet();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        obj.setId(rs.getInt(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;ID&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>));</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        obj.setName(rs.getString(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;NAME&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>));</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        obj.setPhone(rs.getString(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;PHONE&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>));</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        obj.setEmail(rs.getString(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;EMAIL&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>));</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> insert(Contact contact)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> key = dao.createJEPLDALQuery(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>               </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;INSERT INTO CONTACT (EMAIL, NAME, PHONE) VALUES (?, ?,
?)&quot;</span><span lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .addParameters(contact.getEmail(),</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       contact.getName(),contact.getPhone())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getGeneratedKey(</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>int</span><span lang=EN-US
style='font-family:"Courier New";color:black'>.</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>class</span><span lang=EN-US
style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        contact.setId(key);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'> </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> update(Contact contact)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        dao.createJEPLDALQuery(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>               </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;UPDATE CONTACT SET EMAIL = ?, NAME = ?, PHONE = ? WHERE ID
= ?&quot;</span><span lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>               
.addParameters(contact.getEmail(),contact.getName(),</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       contact.getPhone(),contact.getId())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .setStrictMinRows(1).setStrictMaxRows(1)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .executeUpdate();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>boolean</span><span lang=EN-US style='font-family:"Courier New";
color:black'> delete(Contact obj)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> deleteById(obj.getId());</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>boolean</span><span lang=EN-US style='font-family:"Courier New";
color:black'> deleteById(</span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> id)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// Only if there is no &quot;inherited&quot; rows or declared ON
DELETE CASCADE</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDALQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;DELETE FROM CONTACT WHERE ID = ?&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    .setStrictMinRows(0).setStrictMaxRows(1)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    .addParameter(id)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    .executeUpdate() &gt; 0;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> deleteAll()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// Only if &quot;inherited&quot; tables are empty or declared ON
DELETE CASCADE</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDALQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;DELETE FROM CONTACT&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>).executeUpdate();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> List&lt;Contact&gt; selectAll()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDAOQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;SELECT * FROM CONTACT&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>).getResultList();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLResultSetDAO&lt;Contact&gt; selectAllResultSetDAO()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDAOQuery(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       </span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;SELECT * FROM CONTACT&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>).getJEPLResultSetDAO();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> List&lt;Contact&gt; selectJEPLDAOQueryRange(</span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>int</span><span
lang=EN-US style='font-family:"Courier New";color:black'> from,</span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>int</span><span
lang=EN-US style='font-family:"Courier New";color:black'> to)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDAOQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;SELECT * FROM CONTACT&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .setFirstResult(from)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .setMaxResults(to - from)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getResultList();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact selectById(</span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>int</span><span lang=EN-US style='font-family:
"Courier New";color:black'> id)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDAOQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;SELECT * FROM CONTACT WHERE ID = ?&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .addParameter(id)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getSingleResult();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> List&lt;Contact&gt; selectByNameAndEMail(String name,String
email)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDAOQuery(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>               </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;SELECT * FROM CONTACT WHERE NAME = ? AND EMAIL = ?&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .addParameters(name,email)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getResultList();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> selectCount()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDALQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;SELECT COUNT(*) FROM CONTACT&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    .getOneRowFromSingleField(</span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>int</span><span
lang=EN-US style='font-family:"Courier New";color:black'>.</span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>class</span><span
lang=EN-US style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>}</span></p>

<p class=MsoNormal><span lang=EN-GB>The first we need to know is how we create
a </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDAO&lt;Contact&gt;</span></span><span
lang=EN-GB> object calling </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLDataSource.createJEPLDAO(Class&lt;T&gt;)</span></span><span
lang=EN-GB>: </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Courier New";
color:black'>      ds.createJEPLDAO(Contact.</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>class</span><span lang=EN-US
style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDAO</span></span><span lang=EN-GB> objects will be
used to perform persistent operations over user defined persistent
objects/classes. As you can see we are usually going to need a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDAO</span></span><span
lang=EN-GB> object per persistent class (usually associated to a single
database table). Because </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDAO </span></span><span lang=EN-GB>inherits from </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDAL</span></span><span
lang=EN-GB>, all methods of “DAL level” are also available. </span></p>

<h3><a name="_Toc339112594"><span lang=EN-GB>5.2.1 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Insertion with automatic generation of primary
key</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>When the table </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>CONTACT</span></span><span
lang=EN-GB> was defined the key column (ID) was declared as </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>AUTO_INCREMENT</span></span><span
lang=EN-GB> (this syntax is only valid in MySQL, other databases have a similar
syntax do not be fooled by this minor SQL incompatibility). The method </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDALQuery.getGeneratedKey(Class&lt;U&gt;)</span></span><span
lang=EN-GB> is designed to execute </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>INSERT</span></span><span lang=EN-GB> SQL
sentences in tables with automatic key generation, in this case the generated
key is the ID attribute:  </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> insert(Contact contact)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> key = dao.createJEPLDALQuery(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>               </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;INSERT INTO CONTACT (EMAIL, NAME, PHONE) VALUES (?, ?,
?)&quot;</span><span lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .addParameters(contact.getEmail(),</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       contact.getName(),contact.getPhone())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .<b>getGeneratedKey</b>(</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>int</span><span lang=EN-US
style='font-family:"Courier New";color:black'>.</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>class</span><span lang=EN-US
style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        contact.setId(key);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal><span lang=EN-GB>The parameter </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>int.class</span></span><span
lang=EN-GB> is used just to cast the returned JDBC value (the generated key) to
the required type, internally to perform this conversion the following </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDAL</span></span><span
lang=EN-GB> method is called: </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>        public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> &lt;U&gt; U cast(Object obj,Class&lt;U&gt; returnType);</span></p>

<p class=MsoNormal><span lang=EN-GB>As we can see, parameters are provided
using the standard JDBC ? notation of </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>PreparedStatement</span></span><span
lang=EN-GB> and calling the “fluid” method </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>addParameters(Object…),</span></span><span
lang=EN-GB>parameters are sequentially associated to each ? in SQL sentence.</span></p>

<h3><a name="_Toc339112595"><span lang=EN-GB>5.2.2 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Options to declare and provide parameters in SQL
sentences</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>In the previous example we have seen the
standard JDBC ? notation to declare parameters and the method </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>addParameters(Object…)</span></span><span
lang=EN-GB>, JEPLayer provides more options:</span></p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-18.0pt'><span
lang=EN-GB style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>JDBC standard </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>?</span></span><span
lang=EN-GB> notation</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
lang=EN-GB style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>?number</span></span><span lang=EN-GB> notation (ex. </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>?1</span></span><span
lang=EN-GB> </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>?2</span></span><span lang=EN-GB> …) similar to JPA</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
lang=EN-GB style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>:name</span></span><span lang=EN-GB> notation (ex. </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>:email</span></span><span
lang=EN-GB>) similar to JPA</span></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-18.0pt'><span lang=EN-GB
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Mixed previous options </span></p>

<p class=MsoNormal><span lang=EN-GB>If you use the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>?number</span></span><span
lang=EN-GB> notation, you can use the fluid method: </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Courier New"'>JEPLDALQuery.setParameter(int
position,Object value)</span></p>

<p class=MsoNormal><span lang=EN-GB>to set a parameter in the specified
position (starting in 1).</span></p>

<p class=MsoNormal><span lang=EN-GB>The previous query could be rewritten as:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> key = dao.createJEPLDALQuery(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;INSERT INTO CONTACT (EMAIL, NAME, PHONE) VALUES (<b>?1</b>,
<b>?2</b>, <b>?3</b>)&quot;</span><span lang=EN-US style='font-family:"Courier New";
color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            .<b>setParameter</b>(<b>1</b>,contact.getEmail())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            .setParameter(2,contact.getName())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            .setParameter(3,contact.getPhone())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            .getGeneratedKey(</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>int</span><span lang=EN-US
style='font-family:"Courier New";color:black'>.</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>class</span><span lang=EN-US
style='font-family:"Courier New";color:black'>); </span></p>

<p class=MsoNormal><span lang=EN-GB>If you use the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>:name</span></span><span
lang=EN-GB> notation, you can use the fluid method: </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Courier New"'>JEPLDALQuery.setParameter(String
name,Object value)</span></p>

<p class=MsoNormal><span lang=EN-GB>to bind a parameter to the specified name,
the same :name declaration can be repeated into the SQL sentence.</span></p>

<p class=MsoNormal><span lang=EN-GB>The previous query could be rewritten as:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> key = dao.createJEPLDALQuery(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;INSERT INTO CONTACT (EMAIL, NAME, PHONE) VALUES
(:email,:name,:phone)&quot;</span><span lang=EN-US style='font-family:"Courier New";
color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            .setParameter(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;email&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>,contact.getEmail())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            .setParameter(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;name&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>,contact.getName())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            .setParameter(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;phone&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>,contact.getPhone())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            .getGeneratedKey(</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>int</span><span lang=EN-US
style='font-family:"Courier New";color:black'>.</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>class</span><span lang=EN-US
style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal><span lang=EN-US>Finally you can mix several notations in
the same sentence:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> key = dao.createJEPLDALQuery(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;INSERT INTO CONTACT (EMAIL, NAME, PHONE) VALUES (?, ?2,
:phone)&quot;</span><span lang=EN-US style='font-family:"Courier New";
color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            .setParameter(1,contact.getEmail())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            .setParameter(2,contact.getName())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            .setParameter(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;phone&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>,contact.getPhone())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            .getGeneratedKey(</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>int</span><span lang=EN-US
style='font-family:"Courier New";color:black'>.</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>class</span><span lang=EN-US
style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal><span lang=EN-US>Previous code is ugly and confusing and is
not recommended, is just useful to explain how parameter declaration works
internally, every parameter either </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>?</span></span><span lang=EN-US> or </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>?num</span></span><span
lang=EN-US> or </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>:name</span></span><span lang=EN-US> has a position
starting in 1, this is the reason why in previous example </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>?</span></span><span
lang=EN-US> is position 1, </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>?2</span></span><span lang=EN-US> is
position 2 (any different integer is wrong) and </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>:phone</span></span><span
lang=EN-US> is internally 3.  </span></p>

<p class=MsoNormal><span lang=EN-US>Now you can understand why </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .addParameters(contact.getEmail(),</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       contact.getName(),contact.getPhone())</span></p>

<p class=MsoNormal><span lang=EN-GB>is the same as:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            .setParameter(1,contact.getEmail())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            .setParameter(2,contact.getName())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            .setParameter(3,contact.getPhone())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB>Later we will see SQL
sentences returning user data objects executed by </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDAOQuery</span></span><span
lang=EN-GB> objects, because this interface inherits from </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDALQuery</span></span><span
lang=EN-GB> fluid methods are repeated in </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLDAOQuery</span></span><span lang=EN-GB>,
in this case all of them return </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLDAOQuery</span></span><span lang=EN-GB>
instead of </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDALQuery</span></span><span lang=EN-GB> but
behavior is the same.</span></p>

<h3><a name="_Toc339112596"><span lang=EN-GB>5.2.3 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Specifying listeners to control the persistent
lifecycle</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>Previously we have seen this code:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>class</span><span lang=EN-US style='font-family:"Courier New";
color:black'> ContactDAO </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>implements</span><span lang=EN-US style='font-family:"Courier New";
color:black'> <b>JEPLResultSetDAOListener&lt;Contact&gt;</b></span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>{</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>protected</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLDAO&lt;Contact&gt; dao;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> ContactDAO(JEPLDataSource ds)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>this</span><span lang=EN-US style='font-family:"Courier New";
color:black'>.dao = ds.createJEPLDAO(Contact.</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>class</span><span lang=EN-US
style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        dao.<b>addJEPLListener</b>(</span><b><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>this</span></b><span
lang=EN-US style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Courier New"'>...</span></p>

<p class=MsoNormal><span lang=EN-GB>The method </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDAL.addJEPLListener(JEPLListener
listener)</span></span><span lang=EN-GB> is called to register “this”, this is
possible because </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>ContactDAO</span></span><span lang=EN-GB> is a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLListener</span></span><span
lang=EN-GB> because it implements the interface </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAOListener</span></span><span
lang=EN-GB> and this interface inherits from </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLListener</span></span><span
lang=EN-GB>.</span></p>

<p class=MsoNormal><span lang=EN-US>What is the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLListener</span></span><span
lang=EN-US> parameter? </span></p>

<p class=MsoNormal><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLListener</span></span><span lang=EN-US> classes
are </span><span lang=EN-GB>designed to provide “persistent lifecycle
listeners”, if an object implementing one or several </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPListener</span></span><span
lang=EN-GB> based interfaces, is provided as parameter, this listener is called
in the middle of the persistent lifecycle.</span></p>

<p class=MsoNormal><span lang=EN-GB>There are several </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLListener</span></span><span
lang=EN-GB> based interfaces, all of them inherit from </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPListener</span></span><span
lang=EN-GB> (</span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPListener</span></span><span lang=EN-GB> does nothing
by itself).</span></p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span lang=EN-GB
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span lang=EN-GB style='font-family:"Courier New"'>JEPLConnectionListener&lt;T&gt;</span></b></p>

<p class=MsoNormal style='margin-left:36.0pt'><span lang=EN-GB>Its method: </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>        public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLConnection(JEPLConnection con,JEPLTask&lt;T&gt; task)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                        </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>throws</span><span lang=EN-US style='font-family:
"Courier New";color:black'> Exception;</span></p>

<p class=MsoNormal style='margin-left:36.0pt'><span lang=EN-GB>is called before
executing the SQL statement.</span></p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span lang=EN-GB
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span lang=EN-GB style='font-family:"Courier New"'>JEPLPreparedStatementListener&lt;T&gt;</span></b></p>

<p class=MsoNormal><span lang=EN-GB>          Its method:</span></p>

<pre><span lang=EN-GB style='font-family:"Courier New"'>        </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>public</span><span
lang=EN-US style='font-family:"Courier New"'> </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>void</span><span lang=EN-US
style='font-family:"Courier New"'> setupJEPLPreparedStatement(JEPLPreparedStatement stmt,</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                       JEPLTask&lt;T&gt; task) </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>throws</span><span
lang=EN-US style='font-family:"Courier New"'> Exception;</span></pre>

<p class=MsoNormal><span lang=EN-GB>          is called before executing the
SQL statement.</span></p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span lang=EN-GB
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span lang=EN-GB style='font-family:"Courier New"'>JEPLResultSetDALListener</span></b></p>

<p class=MsoNormal style='margin-left:35.4pt'><span lang=EN-GB>Its methods:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLResultSet(JEPLResultSet jrs,JEPLTask&lt;?&gt; task) </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>throws</span><span lang=EN-US style='font-family:
"Courier New";color:black'> Exception;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> &lt;U&gt; U getValue(</span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>int</span><span lang=EN-US style='font-family:
"Courier New";color:black'> columnIndex,Class&lt;U&gt; returnType,</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       JEPLResultSet jrs) </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>throws</span><span lang=EN-US
style='font-family:"Courier New";color:black'> Exception;</span></p>

<p class=MsoNormal style='margin-left:35.4pt'><span lang=EN-GB>are called to
process the result of the “DAL” SQL statement (executing a sentence with a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDALQuery</span></span><span
lang=EN-GB>), when no data model object is returned.</span></p>

<p class=MsoListParagraphCxSpFirst><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-18.0pt'><span lang=EN-GB
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span lang=EN-GB style='font-family:"Courier New"'>JEPLResultSetDAOListener&lt;T&gt;</span></b></p>

<p class=MsoNormal style='margin-left:35.4pt'><span lang=EN-GB>Its methods:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLResultSet(JEPLResultSet jrs,JEPLTask&lt;?&gt; task)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>throws</span><span lang=EN-US style='font-family:
"Courier New";color:black'> Exception;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> T createObject(JEPLResultSet jrs) </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>throws</span><span lang=EN-US
style='font-family:"Courier New";color:black'> Exception;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> fillObject(T obj,JEPLResultSet jrs) </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>throws</span><span lang=EN-US
style='font-family:"Courier New";color:black'> Exception;</span></p>

<p class=MsoNormal style='margin-left:35.4pt'><span lang=EN-GB>are called to
process the result of the “DAO” SQL statement (executing a sentence with a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDAOQuery</span></span><span
lang=EN-GB>), when expected data model objects to be returned.</span></p>

<p class=MsoNormal><span lang=EN-GB>Interfaces </span><span lang=EN-US
style='font-family:"Courier New";color:black'>JEPLConnection,</span><span
lang=EN-US style='font-family:"Courier New"'> JEPLPreparedStatement, <span
style='color:black'>JEPLResultSet </span></span><span lang=EN-GB>are just
JEPLayer wrappers of standard </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB>, </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>PreparedStatement</span></span><span
lang=EN-GB> and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>ResultSet</span></span><span lang=EN-GB> objects. </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLTask</span></span><span
lang=EN-GB> requires more attention (see later).</span><span lang=EN-GB
style='font-family:"Courier New";color:black'> </span><span lang=EN-GB
style='font-family:"Courier New"'> </span></p>

<p class=MsoNormal><span lang=EN-GB>There are several points where we can
inject a </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLListener</span></span><span lang=EN-GB> listener,
because only a listener of the same type is picked per SQL sentence, there is a
priority list:</span></p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-18.0pt'><span
lang=EN-GB>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-GB>The listener of the required type was registered calling </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDALQuery.addJEPLListener(JEPLListener)</span></span><span
lang=EN-GB>.</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
lang=EN-GB>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-GB>Registered into the DAO/DAL object calling </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDAL.addJEPLListener(JEPLListener)</span></span><span
lang=EN-GB>  </span></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-18.0pt'><span lang=EN-GB>3)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-GB>Registered into the </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLDataSource</span></span><span
lang=EN-GB> calling </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDataSource.addJEPLListener(JEPLListener)</span></span></p>

<p class=MsoNormal><span lang=EN-GB>Following with our example:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> insert(Contact contact)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> key = dao.createJEPLDALQuery(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>               </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;INSERT INTO CONTACT (EMAIL, NAME, PHONE) VALUES (?, ?,
?)&quot;</span><span lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .addParameters(contact.getEmail(),</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       contact.getName(),contact.getPhone())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getGeneratedKey(</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>int</span><span lang=EN-US
style='font-family:"Courier New";color:black'>.</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>class</span><span lang=EN-US
style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        contact.setId(key);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal><span lang=EN-GB>This is a DAL level SQL sentence, no data
model object is returned, in this example no appropriated </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLListener</span></span><span
lang=EN-GB> seems to be registered and used, cast of the returned generated key
is performed calling the </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDAL</span></span><span lang=EN-GB> method:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>        public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> &lt;U&gt; U cast(Object obj,Class&lt;U&gt; returnType);</span></p>

<p class=MsoNormal><span lang=EN-US>We can change the behavior of this sentence
registering a </span><span lang=EN-GB style='font-family:"Courier New";
color:black'>JEPLResultSetDALListener</span><span lang=EN-US> listener, in this
example on </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDALQuery</span></span><span lang=EN-US> level if
we add a new method to our DAO like this:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> insertExplicitResultSetListener(Contact contact)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        JEPLResultSetDALListener listener = </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>new</span><span
lang=EN-US style='font-family:"Courier New";color:black'> <b>JEPLResultSetDALListener</b>()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLResultSet(JEPLResultSet jrs,JEPLTask&lt;?&gt; task)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                               </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>throws</span><span lang=EN-US
style='font-family:"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> &lt;U&gt; U getValue(</span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>int</span><span lang=EN-US style='font-family:
"Courier New";color:black'> columnIndex, Class&lt;U&gt; returnType,</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                               JEPLResultSet jrs) </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>throws</span><span
lang=EN-US style='font-family:"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-US style='font-family:"Courier New";
color:black'> (!returnType.equals(</span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>int</span><span lang=EN-US style='font-family:
"Courier New";color:black'>.</span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>class</span><span lang=EN-US style='font-family:"Courier New";
color:black'>)) </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>throw</span><span lang=EN-US style='font-family:
"Courier New";color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> RuntimeException(</span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;UNEXPECTED&quot;</span><span lang=EN-US style='font-family:
"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// Expected columnIndex = 1</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> resInt = jrs.getResultSet().getInt(columnIndex);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                Object resObj =
jrs.getResultSet().getObject(columnIndex);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                Integer resIntObj =
(Integer)jrs.getJEPLStatement()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       .getJEPLDAL().cast(resObj, returnType);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-US style='font-family:"Courier New";
color:black'> (resInt != resIntObj) </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>throw</span><span lang=EN-US style='font-family:
"Courier New";color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> RuntimeException(</span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;UNEXPECTED&quot;</span><span lang=EN-US style='font-family:
"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> (U)resIntObj; </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> key = dao.createJEPLDALQuery(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>               </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;INSERT INTO CONTACT (EMAIL, NAME, PHONE) VALUES (?, ?,
?)&quot;</span><span lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>               
.addParameters(contact.getEmail(),contact.getName(),</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       contact.getPhone())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                <b>.addJEPLListener(listener)</b></span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getGeneratedKey(</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>int</span><span lang=EN-US
style='font-family:"Courier New";color:black'>.</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>class</span><span lang=EN-US
style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>         contact.setId(key);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span></p>

<p class=MsoNormal><span lang=EN-GB>This example plays with types and finally
returns just the same as the default behaviour (calling </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDAL.cast(…)</span></span><span
lang=EN-GB> method), but it was useful to show how the specified </span><span
lang=EN-GB style='font-family:"Courier New";color:black'>JEPLResultSetDALListener</span><span
lang=EN-GB> is called in this context (expected a single row with a single
column containing the generated key).</span></p>

<h3><a name="_Toc339112597"><span lang=EN-GB>5.2.4 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Executing non-SELECT SQL sentences</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>Non-SELECT sentences are typically executed
calling </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>JEPLDALQuery.<b>executeUpdate</b>() </span></span><span lang=EN-GB> </span></p>

<p class=CdigoFuenteCarCxSpFirst><span lang=EN-US>    <span style='color:#0000E6'>public</span>
<span style='color:#0000E6'>void</span> update(Contact contact)</span></p>

<p class=CdigoFuenteCarCxSpMiddle><span lang=EN-US>    {</span></p>

<p class=CdigoFuenteCarCxSpMiddle><span lang=EN-US>       
dao.createJEPLDALQuery(<span style='color:#CE7B00'>&quot;UPDATE CONTACT SET
EMAIL = ?, </span></span></p>

<p class=CdigoFuenteCarCxSpMiddle><span lang=EN-US style='color:#CE7B00'>NAME =
?, PHONE = ? WHERE ID = ?&quot;</span><span lang=EN-US>)                </span></p>

<p class=CdigoFuenteCarCxSpMiddle><span lang=EN-US>           .addParameters(contact.getEmail(),contact.getName(),</span></p>

<p class=CdigoFuenteCarCxSpMiddle><span lang=EN-US>                   contact.getPhone(),contact.getId())</span></p>

<p class=CdigoFuenteCarCxSpMiddle><span lang=EN-US>             
.setStrictMinRows(1).setStrictMaxRows(1)</span></p>

<p class=CdigoFuenteCarCxSpMiddle><span lang=EN-US>              .<b>executeUpdate</b>();</span></p>

<p class=CdigoFuenteCarCxSpLast><span lang=EN-US>    }</span></p>

<p class=MsoNormal><span lang=EN-GB>In this example the method </span><span
lang=EN-GB style='font-family:"Courier New";color:black'>executeUpdate() </span><span
lang=EN-GB>executes the SQL sentence to update the row. Take a look to the
optional </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>setStrictMinRows(1)</span></span><span lang=EN-US> and
</span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>setStrictMaxRows(1)
</span></span><span lang=EN-US>calls, they are fluid methods to specify the
required number of returned rows, minimum and maximum, in this example if no
row has been updated (0) or more than one (2 or more) rows has been updated a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLException</span></span><span
lang=EN-US> is thrown.</span></p>

<p class=MsoNormal><span lang=EN-US>The following example shows how we can
specify a range or affected rows:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>boolean</span><span lang=EN-US style='font-family:"Courier New";
color:black'> deleteById(</span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> id)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// Only if there is no &quot;inherited&quot; rows or declared ON
DELETE CASCADE</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDALQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;DELETE FROM CONTACT WHERE ID = ?&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    .setStrictMinRows(0).setStrictMaxRows(1)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    .addParameter(id)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    .executeUpdate() &gt; 0;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal><span lang=EN-US>This code tolerates the specified row does
not exist (no deletion). </span></p>

<h3><a name="_Toc339112598"><span lang=EN-GB>5.2.5 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Select returning POJOs of your user data object model</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>Just with this simple call we get all rows
of the </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>CONTACT</span></span><span lang=EN-GB> table and converted to </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Contact</span></span><span
lang=EN-GB> objects:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> List&lt;Contact&gt; selectAll()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDAOQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;SELECT * FROM CONTACT&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>).getResultList();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>Where is the magic? It was already shown
before:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>class</span><span lang=EN-US style='font-family:"Courier New";
color:black'> ContactDAO </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>implements</span><span lang=EN-US style='font-family:"Courier New";
color:black'> <b>JEPLResultSetDAOListener&lt;Contact&gt;</b></span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>{</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>protected</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLDAO&lt;Contact&gt; dao;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> ContactDAO(JEPLDataSource ds)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>this</span><span lang=EN-US style='font-family:"Courier New";
color:black'>.dao = ds.createJEPLDAO(Contact.</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>class</span><span lang=EN-US
style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        dao.<b>addJEPLListener(</b></span><b><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>this</span></b><b><span
lang=EN-US style='font-family:"Courier New";color:black'>);</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLDAO&lt;Contact&gt; getJEPLDAO()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    @Override</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span></b><b><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span></b><b><span lang=EN-US style='font-family:"Courier New";
color:black'> </span></b><b><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span></b><b><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLResultSet(JEPLResultSet jrs,JEPLTask&lt;?&gt; task) </span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>               </span></b><b><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>throws</span></b><b><span lang=EN-US
style='font-family:"Courier New";color:black'> Exception</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    @Override</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span></b><b><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span></b><b><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact createObject(JEPLResultSet jrs) </span></b><b><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>throws</span></b><b><span
lang=EN-US style='font-family:"Courier New";color:black'> Exception</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span></b><b><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span></b><b><span lang=EN-US style='font-family:"Courier New";
color:black'> </span></b><b><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span></b><b><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact();</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    @Override</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span></b><b><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span></b><b><span lang=EN-US style='font-family:"Courier New";
color:black'> </span></b><b><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span></b><b><span lang=EN-US style='font-family:"Courier New";
color:black'> fillObject(Contact obj,JEPLResultSet jrs) </span></b><b><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>throws</span></b><b><span
lang=EN-US style='font-family:"Courier New";color:black'> Exception</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>        ResultSet rs = jrs.getResultSet();</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>        obj.setId(rs.getInt(</span></b><b><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;ID&quot;</span></b><b><span
lang=EN-US style='font-family:"Courier New";color:black'>));</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>        obj.setName(rs.getString(</span></b><b><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;NAME&quot;</span></b><b><span
lang=EN-US style='font-family:"Courier New";color:black'>));</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>        obj.setPhone(rs.getString(</span></b><b><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;PHONE&quot;</span></b><b><span
lang=EN-US style='font-family:"Courier New";color:black'>));</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>        obj.setEmail(rs.getString(</span></b><b><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;EMAIL&quot;</span></b><b><span
lang=EN-US style='font-family:"Courier New";color:black'>));</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></b></p>

<p class=MsoNormal><span lang=EN-GB>...</span></p>

<p class=MsoNormal><span lang=EN-GB>Because </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>ContactDAO</span></span><span
lang=EN-GB> object implements </span><span class=CdigoFuenteCarCar><span
lang=EN-US style='font-size:11.0pt'>JEPLResultSetDAOListener&lt;T&gt;</span></span><span
lang=EN-GB> the method </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>getResultList()</span></span><span lang=EN-GB> use
this implementation of this kind of listener according to the priority list
explained before. </span></p>

<p class=MsoNormal><span lang=EN-GB>When a SELECT clause is executed the method
</span><span class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>setupJEPLResultSet</span></span><span
lang=EN-GB> is called immediately <i>after</i> the SQL sentence is executed, to
setup the </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>ResultSet</span></span><span lang=EN-GB> before
iterating. The framework iterates through the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span
lang=EN-GB> calling </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>next()</span></span><span lang=EN-GB> and delegating all
row reading to </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>createObject</span></span><span lang=EN-GB> and </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>fillObject</span></span><span
lang=EN-GB>, called per row. If </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>createObject</span></span><span lang=EN-GB>
returns </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>null</span></span><span lang=EN-GB> the method </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>fillObject</span></span><span
lang=EN-GB> is not called, and no element (nor null) is added to the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>List</span></span><span
lang=EN-GB> result of the call to </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>getResultList()</span></span><span
lang=EN-GB> (equivalent to skip/filter this row-Object).</span></p>

<p class=MsoNormal><span lang=EN-GB>Of course you can provide this listener in
different ways, for instance as a parameter, in this case the parameter has
priority, the following method can be added to our </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>ContactDAO</span></span><span
lang=EN-GB> class:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> List&lt;Contact&gt; selectAllExplicitResultSetListener()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        JEPLResultSetDAOListener&lt;Contact&gt; <b>listener</b> = </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>               </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLResultSetDAOListener&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLResultSet(JEPLResultSet jrs,JEPLTask&lt;?&gt; task)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact createObject(JEPLResultSet jrs) </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>throws</span><span lang=EN-US
style='font-family:"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> fillObject(Contact obj,JEPLResultSet jrs) </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                               </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>throws</span><span lang=EN-US
style='font-family:"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                ResultSet rs = jrs.getResultSet();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                obj.setId(rs.getInt(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;ID&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>));</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                obj.setName(rs.getString(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;NAME&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>));</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                obj.setPhone(rs.getString(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;PHONE&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>));</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                obj.setEmail(rs.getString(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;EMAIL&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>));</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDAOQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;SELECT * FROM CONTACT&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .<b>addJEPLListener(listener)</b></span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getResultList();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>A registered </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAOListener</span></span><span
lang=EN-GB> is required when you query the database using SELECT to get user
defined POJOs calling methods like </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLDAOQuery.getResultList()</span></span><span
lang=EN-GB>, </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDAOQuery.getSingleResult()</span></span><span
lang=EN-GB> or </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDAOQuery.getJEPLResultSetDAO(), </span></span><span
lang=EN-GB>if no one is provided a </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLException</span></span><span
lang=EN-GB> is thrown.</span></p>

<h3><a name="_Toc339112599"><span lang=EN-GB>5.2.6 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Select returning POJOs of data model using an
automatic bean mapper</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>Alternatively you can use a </span><span
lang=EN-GB style='font-family:"Courier New";color:black'>JEPLResultSetDAOListenerDefault</span><span
lang=EN-GB> instance instead of your custom </span><span lang=EN-US
style='font-family:"Courier New";color:black'>JEPLResultSetDAOListener</span><span
lang=EN-GB>, JEPLayer provides this ready to use implementation calling </span><span
lang=EN-GB style='font-family:"Courier New";color:black'>JEPLDataSource.createJEPLResultSetDAOListenerDefault(Class&lt;T&gt;
clasz)</span><span lang=EN-US style='font-family:"Courier New";color:black'>.</span><span
lang=EN-US> </span><span lang=EN-GB>It automatically maps every result row to
an object of the specified class, every column is mapped to the corresponding property
calling the corresponding set method by name following the Java Beans
convention.</span></p>

<p class=MsoNormal><span lang=EN-GB>The following method does the same as the
previous hand-made mapping:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> List&lt;Contact&gt; selectAllExplicitResultSetDAOListenerBean()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        <b>JEPLResultSetDAOListenerDefault&lt;Contact&gt; listener</b>
=</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                dao.getJEPLDataSource()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>               .<b>createJEPLResultSetDAOListenerDefault(Contact.</b></span><b><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>class</span></b><b><span
lang=EN-US style='font-family:"Courier New";color:black'>);</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDAOQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;SELECT * FROM CONTACT&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .addJEPLListener(listener)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getResultList();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>In current implementation of JEPLayer, a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAOListenerDefault</span></span><span
lang=EN-GB> instance is thread safe and can be used as a singleton the same as
the associated </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDataSource</span></span><span lang=EN-GB> can be<a
href="#_ftn6" name="_ftnref6" title=""><span class=MsoFootnoteReference><span
class=MsoFootnoteReference><span lang=EN-GB style='font-size:10.0pt;font-family:
"Verdana","sans-serif"'>[6]</span></span></span></a>. </span></p>

<p class=MsoNormal><span lang=EN-GB>You can optionally use a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLRowBeanMapper</span></span><span
lang=EN-GB> to modify the default behavior of a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAOListenerDefault</span></span><span
lang=EN-GB>. An object of this interface associated to a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAOListenerDefault</span></span><span
lang=EN-GB> intercepts all column-field bindings and when the method </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLRowBeanMapper</span></span><span
lang=EN-GB>.</span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>setColumnInBean(…)</span></span><span lang=EN-GB>
returns true, JEPLayer understands this column-field binding has already been
“manually” done by user code and no action is done by JEPLayer. The method </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>setColumnInBean(T
obj,JEPLResultSet jrs,int col,String columnName,Object value,Method setter)</span></span><span
lang=EN-GB> provides all necessary data to set the property (usually attribute)
in the bean, the </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>setter</span></span><span lang=EN-GB> parameter is the
proposed </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>java.reflect.Method</span></span><span lang=EN-GB> of
the bean, it is null when there is no set method with the specified column name
or is static. </span></p>

<p class=MsoNormal><span lang=EN-GB>For example:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> List&lt;Contact&gt;
selectAllExplicitResultSetDAOListenerBeanWithMapper()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        <b>JEPLRowBeanMapper</b>&lt;Contact&gt; <b>rowMapper</b> =
</span><span lang=EN-US style='font-family:"Courier New";color:#0000E6'>new</span><span
lang=EN-US style='font-family:"Courier New";color:black'>
JEPLRowBeanMapper&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>boolean</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setColumnInBean(Contact obj,JEPLResultSet jrs,</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>int</span><span lang=EN-US style='font-family:
"Courier New";color:black'> col, String columnName, Object value, Method
setter)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-US style='font-family:"Courier New";
color:black'> (columnName.equalsIgnoreCase(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;email&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>))</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    obj.setEmail((String)value);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>return</span><span lang=EN-US style='font-family:
"Courier New";color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>true</span><span lang=EN-US style='font-family:"Courier New";
color:black'>;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>false</span><span lang=EN-US style='font-family:"Courier New";
color:black'>;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        JEPLResultSetDAOListenerDefault&lt;Contact&gt; <b>listener</b>
= </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                dao.getJEPLDataSource()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .<b>createJEPLResultSetDAOListenerDefault</b>(Contact.</span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>class</span><span
lang=EN-US style='font-family:"Courier New";color:black'>,<b>rowMapper</b>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDAOQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;SELECT * FROM CONTACT&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .addJEPLListener(<b>listener</b>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getResultList();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<h3><a name="_Toc339112600"><span lang=EN-GB>5.2.7 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Select a range of returning POJOs with JEPLDAOQuery</span></a></h3>

<p class=MsoNormal><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDAOQuery</span></span><span lang=EN-GB> provides
two configuration methods before executing a SELECT sentence:</span></p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-18.0pt'><span
lang=EN-GB style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>setFirstResult(int)</span></span><span lang=EN-GB> : sets the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span
lang=EN-GB> initially to the specified position calling </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>ResultSet.absolute(int)</span></span><span
lang=EN-GB>.</span></p>

<p class=MsoListParagraphCxSpMiddle><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-18.0pt'><span lang=EN-GB
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>setMaxResults(int) </span></span><span lang=EN-GB>: ends the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span
lang=EN-GB> iteration when the number of specified results is achieved.</span></p>

<p class=MsoNormal><span lang=EN-GB>The following example shows how we can get
a subset of queried rows avoiding getting all rows from database (</span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>from</span></span><span
lang=EN-GB> and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>to</span></span><span lang=EN-GB> are row indexes and
row </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>to</span></span><span lang=EN-GB> is not included):</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> List&lt;Contact&gt; selectJEPLDAOQueryRange(</span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>int</span><span
lang=EN-US style='font-family:"Courier New";color:black'> from,</span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>int</span><span
lang=EN-US style='font-family:"Courier New";color:black'> to)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDAOQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;SELECT * FROM CONTACT&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .<b>setFirstResult</b>(from)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .<b>setMaxResults</b>(to - from)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getResultList();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<h2><a name="_Toc339112601"><span lang=EN-GB>5.3 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>ADVANCED USES OF DAO AND LISTENERS</span></a></h2>

<h3><a name="_Toc339112602"><span lang=EN-GB>5.3.1 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Select query with a max number of rows using a
listener and the JEPLTask</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>We have explained that inherited interfaces
of </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLListener</span></span><span
lang=EN-GB> are used to modify the default lifecycle, the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>setupJEPLX</span></span><span
lang=EN-GB> methods are called <i>before</i> processing the JDBC object passed
as parameter. What if we need some processing <i>after</i> using the JDBC
object?</span></p>

<p class=MsoNormal><span lang=EN-GB>For instance, we want to query only the
first results of a large number of rows/objects using pure JDBC, we could code
something like:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> List&lt;Contact&gt; selectAllStatementListenerMaxRows(</span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>final</span><span
lang=EN-US style='font-family:"Courier New";color:black'> </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>int</span><span
lang=EN-US style='font-family:"Courier New";color:black'> maxRows)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        JEPLPreparedStatementListener&lt;List&lt;Contact&gt;&gt;
listener =</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLPreparedStatementListener&lt;List&lt;Contact&gt;&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLPreparedStatement(JEPLPreparedStatement jstmt,</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    JEPLTask&lt;List&lt;Contact&gt;&gt; task) </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>throws</span><span
lang=EN-US style='font-family:"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                PreparedStatement stmt =
jstmt.getPreparedStatement();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                stmt.setMaxRows(maxRows);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Monospaced","serif";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDAOQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;SELECT * FROM CONTACT&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .addJEPLListener(listener)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getResultList();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal><span lang=EN-GB>This method works as expected and just
returns the required max number of rows but it has a problem, JEPLayer caches </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>PreparedStatement</span></span><span
lang=EN-GB> objects with the same SQL code<a href="#_ftn7" name="_ftnref7"
title=""><span class=MsoFootnoteReference><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>[7]</span></span></span></a>,
the next query with the same SQL statement, if the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>PreparedStatement</span></span><span
lang=EN-GB> is cached, keeps the same number of rows declared in a different
DAO method call. Yes so far this is not actually a problem because every SQL
sentence gets a </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB> and recycles
it returning to the pool in the end of the call, there is no option for
caching, but later we will see how automatically several sentences like
previously shown can reuse the same </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB>
and optionally participate in a transaction. Hence we must solve this problem,
we must restore the original old “max rows” value (usually “no limit”) and
setting the default value before any SQL statement is tedious, the obvious
solution is to restore the old “max rows” value <i>after</i> the SQL statement
is fully processed. </span></p>

<p class=MsoNormal><span lang=EN-GB>This kind of problems is the reason of the </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLTask</span></span><span
lang=EN-GB> parameter, this object represents the processing going to be
executed </span><span class=CdigoFuenteCarCar><i><span lang=EN-GB
style='font-size:11.0pt'>after</span></i></span><span lang=EN-GB> the call to </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>setupJEPLX</span></span><span
lang=EN-GB> methods. Because this object is like a “closure” of this
consecutive task, we can <i>optionally</i> call </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLTask.exec</span></span><span
lang=EN-GB>() when this call returns we know the consecutive processing has
finished. The </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLTask.exec</span></span><span lang=EN-GB>() returns
the value going to be returned by the next step of the persistence lifecycle,
the return value may be ignored.</span></p>

<p class=MsoNormal><span lang=EN-GB>For instance:</span></p>

<p class=MsoListParagraph align=left style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt;text-align:left;
text-indent:-18.0pt;background:white'><span lang=EN-US style='font-family:Symbol;
color:black'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US style='font-family:"Courier New";color:#0000E6'>void</span><span
lang=EN-US style='font-family:"Courier New";color:black'>
setupJEPLConnection(JEPLConnection con,JEPLTask&lt;T&gt; task)</span></p>

<p class=MsoNormal style='margin-left:35.4pt'><span lang=EN-US>When </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLTask.exec</span></span><span
lang=EN-GB>() is executed the SQL statement has been executed and results
processed, it returns the expected result value of the statement.</span></p>

<p class=MsoListParagraph align=left style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt;text-align:left;
text-indent:-18.0pt;background:white'><span lang=EN-US style='font-family:Symbol;
color:black'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US style='font-family:"Courier New";color:#0000E6'>void</span><span
lang=EN-US style='font-family:"Courier New";color:black'>
setupJEPLPreparedStatement(JEPLPreparedStatement stmt,JEPLTask&lt;T&gt; task)</span></p>

<p class=MsoNormal style='margin-left:35.4pt'><span lang=EN-US>When </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLTask.exec</span></span><span
lang=EN-GB>() is executed the SQL statement has been executed and results
processed (</span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>ResultSet</span></span><span lang=EN-GB> is closed),
it returns the expected result value of the statement.</span></p>

<p class=MsoListParagraph align=left style='margin-top:0cm;margin-right:0cm;
margin-bottom:0cm;margin-left:36.0pt;margin-bottom:.0001pt;text-align:left;
text-indent:-18.0pt;background:white'><span lang=EN-US style='font-family:Symbol;
color:black'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US style='font-family:"Courier New";color:#0000E6'>void</span><span
lang=EN-US style='font-family:"Courier New";color:black'>
setupJEPLResultSet(JEPLResultSet jrs,JEPLTask&lt;?&gt; task)</span></p>

<p class=MsoNormal style='margin-left:35.4pt'><span lang=EN-US>When </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLTask.exec</span></span><span
lang=EN-GB>() is executed the </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span lang=EN-GB>
has been processed collecting rows but it is still alive.</span></p>

<p class=MsoNormal style='margin-left:35.4pt'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>Now we can solve our “configuration memory”
problem easily:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> List&lt;Contact&gt; selectAllStatementListenerMaxRows(</span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>final</span><span
lang=EN-US style='font-family:"Courier New";color:black'> </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>int</span><span
lang=EN-US style='font-family:"Courier New";color:black'> maxRows)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        JEPLPreparedStatementListener&lt;List&lt;Contact&gt;&gt;
listener =</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLPreparedStatementListener&lt;List&lt;Contact&gt;&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLPreparedStatement(JEPLPreparedStatement jstmt,</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    JEPLTask&lt;List&lt;Contact&gt;&gt; task) </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>throws</span><span
lang=EN-US style='font-family:"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                PreparedStatement stmt =
jstmt.getPreparedStatement();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span></b><b><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>int</span></b><b><span lang=EN-US
style='font-family:"Courier New";color:black'> old = stmt.getMaxRows();</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>                stmt.setMaxRows(maxRows);</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>try</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    List&lt;Contact&gt; res = <b>task.exec();</b></span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>finally</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    <b>stmt.setMaxRows(old);</b> </span><span
lang=EN-US style='font-family:"Courier New";color:#969696'>// Restore</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDAOQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;SELECT * FROM CONTACT&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .addJEPLListener(listener)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getResultList();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US>Anyway if you are not
comfortable with this kind of stuff you can disable statement caching calling </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLDataSource</span></span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>.</span></span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>setPreparedStatementCached</span></span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>(false)</span></span><span
lang=EN-US> and now the </span><span lang=EN-GB style='font-family:"Courier New";
color:black'>PreparedStatement </span><span lang=EN-US>object is ever new (not
reused).</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    JEPLDataSource jds = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    jds.<b>setPreparedStatementCached(</b></span><b><span
lang=EN-GB style='font-family:"Courier New";color:#0000E6'>false</span></b><b><span
lang=EN-GB style='font-family:"Courier New";color:black'>);</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    ...</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    JEPLPreparedStatementListener&lt;List&lt;Contact&gt;&gt;
listener =</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>            </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> JEPLPreparedStatementListener&lt;List&lt;Contact&gt;&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>        </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> setupJEPLPreparedStatement(JEPLPreparedStatement jstmt,</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>                JEPLTask&lt;List&lt;Contact&gt;&gt; task) </span><span
lang=EN-GB style='font-family:"Courier New";color:#0000E6'>throws</span><span
lang=EN-GB style='font-family:"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>            PreparedStatement stmt = jstmt.getPreparedStatement();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>            <b>stmt.setMaxRows(maxRows);</b>  </span><span
lang=EN-GB style='font-family:"Courier New";color:#969696'>// Now is not reused</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<h3><a name="_Toc339112603"><span lang=EN-GB>5.3.2 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Select query paged specified by index range</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>In this case we want only the results in a
range specified by indexes, in this example </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>from</span></span><span
lang=EN-GB> and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>to</span></span><span lang=EN-GB> are row indexes and </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>row</span></span><span
lang=EN-GB> to is not included.</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> List&lt;Contact&gt; selectAllExplicitResultSetListenerRange(</span><span
lang=EN-GB style='font-family:"Courier New";color:#0000E6'>final</span><span
lang=EN-GB style='font-family:"Courier New";color:black'> </span><span
lang=EN-GB style='font-family:"Courier New";color:#0000E6'>int</span><span
lang=EN-GB style='font-family:"Courier New";color:black'> from,</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>               </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>final</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> to)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>        JEPLResultSetDAOListener&lt;Contact&gt; <b>listener</b> = </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>               </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> JEPLResultSetDAOListener&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>            @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>            </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-GB style='font-family:"Courier New";
color:black'>  </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> setupJEPLResultSet(JEPLResultSet jrs,JEPLTask&lt;?&gt; task)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>                               </span><span lang=EN-GB
style='font-family:"Courier New";color:#0000E6'>throws</span><span lang=EN-GB
style='font-family:"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>                ResultSet rs = jrs.getResultSet();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>                <b>rs.absolute(from);</b></span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>            @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>            </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> Contact createObject(JEPLResultSet jrs) </span><span lang=EN-GB
style='font-family:"Courier New";color:#0000E6'>throws</span><span lang=EN-GB
style='font-family:"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>                </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> Contact();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>            @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>            </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> fillObject(Contact obj,JEPLResultSet jrs) </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>                               </span><span lang=EN-GB
style='font-family:"Courier New";color:#0000E6'>throws</span><span lang=EN-GB
style='font-family:"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>                ResultSet rs = jrs.getResultSet();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>                obj.setId(rs.getInt(</span><span lang=EN-GB
style='font-family:"Courier New";color:#CE7B00'>&quot;ID&quot;</span><span
lang=EN-GB style='font-family:"Courier New";color:black'>));</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>                obj.setName(rs.getString(</span><span lang=EN-GB
style='font-family:"Courier New";color:#CE7B00'>&quot;NAME&quot;</span><span
lang=EN-GB style='font-family:"Courier New";color:black'>));</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>                obj.setPhone(rs.getString(</span><span lang=EN-GB
style='font-family:"Courier New";color:#CE7B00'>&quot;PHONE&quot;</span><span
lang=EN-GB style='font-family:"Courier New";color:black'>));</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>                obj.setEmail(rs.getString(</span><span lang=EN-GB
style='font-family:"Courier New";color:#CE7B00'>&quot;EMAIL&quot;</span><span
lang=EN-GB style='font-family:"Courier New";color:black'>));</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-GB style='font-family:"Courier New";
color:black'>                </span></b><b><span lang=EN-GB style='font-family:
"Courier New";color:#0000E6'>int</span></b><b><span lang=EN-GB
style='font-family:"Courier New";color:black'> row = rs.getRow(); </span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-GB style='font-family:"Courier New";
color:black'>                </span></b><b><span lang=EN-GB style='font-family:
"Courier New";color:#0000E6'>if</span></b><b><span lang=EN-GB style='font-family:
"Courier New";color:black'> (row + 1 == to)</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-GB style='font-family:"Courier New";
color:black'>                    jrs.stop();</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>        };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDAOQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;SELECT * FROM CONTACT&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .addJEPLListener(<b>listener</b>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getResultList();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>Note the call to the method </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSet.stop()</span></span><span
lang=EN-GB>, this call instructs JEPLayer to stop iterating results, in some
way is like the “break” keyword in a Java loop.</span></p>

<h2><a name="_Toc339112604"><span lang=EN-GB>5.4 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>FREE-HAND QUERIES</span></a></h2>

<p class=MsoNormal><span lang=EN-GB>One of the most interesting features of
RDBMSs is the flexibility of queries, we can get the exact information we want.
Sometimes we need a minimal subset of columns, or several columns of disparate
tables or aggregated results. In these cases we do not need DAOs.</span></p>

<p class=MsoNormal><span lang=EN-GB>In JEPLayer we have the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDALQuery.getJEPLCachedResultSet()</span></span><span
lang=EN-GB> method returning </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLCachedResultSet</span></span><span
lang=EN-GB> objects; </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLCachedResultSet</span></span><span lang=EN-GB> is similar
to </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>javax.sql.ResultSet</span></span><span
lang=EN-GB>, the main difference is data returned by iterating the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span
lang=EN-GB> is saved into a </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLCachedResultSet</span></span><span
lang=EN-GB> instance and returned, hence you don’t need a database connection
open to make use of this object. </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLCachedResultSet</span></span><span
lang=EN-GB> is similar to </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>javax.sql.rowset.CachedRowSet</span></span><span
lang=EN-GB> but a lot of simpler. </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLDALQuery.getJEPLCachedResultSet()</span></span><span
lang=EN-GB> </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'> </span></span><span lang=EN-GB>is a DAL-level method.</span></p>

<p class=MsoNormal><span lang=EN-GB>An example (two rows are supposed):</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    JEPLDataSource jds = </span><span lang=EN-GB style='font-family:
"Courier New";color:#0000E6'>...</span><span lang=EN-GB style='font-family:
"Courier New";color:black'>;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    JEPLDAL dal = jds.createJEPLDAL();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLCachedResultSet resSet = dal.createJEPLDALQuery(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;SELECT COUNT(*) AS CO,AVG(ID) AS AV FROM CONTACT&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getJEPLCachedResultSet();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    String[] colNames = resSet.getColumnLabels();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> (colNames.length != 2) </span><span lang=EN-GB style='font-family:
"Courier New";color:#0000E6'>throw</span><span lang=EN-GB style='font-family:
"Courier New";color:black'> </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> RuntimeException(</span><span lang=EN-GB style='font-family:"Courier New";
color:#CE7B00'>&quot;UNEXPECTED&quot;</span><span lang=EN-GB style='font-family:
"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> (!colNames[0].equals(</span><span lang=EN-GB style='font-family:
"Courier New";color:#CE7B00'>&quot;CO&quot;</span><span lang=EN-GB
style='font-family:"Courier New";color:black'>)) </span><span lang=EN-GB
style='font-family:"Courier New";color:#0000E6'>throw</span><span lang=EN-GB
style='font-family:"Courier New";color:black'> </span><span lang=EN-GB
style='font-family:"Courier New";color:#0000E6'>new</span><span lang=EN-GB
style='font-family:"Courier New";color:black'> RuntimeException(</span><span
lang=EN-GB style='font-family:"Courier New";color:#CE7B00'>&quot;UNEXPECTED&quot;</span><span
lang=EN-GB style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> (!colNames[1].equals(</span><span lang=EN-GB style='font-family:
"Courier New";color:#CE7B00'>&quot;AV&quot;</span><span lang=EN-GB
style='font-family:"Courier New";color:black'>)) </span><span lang=EN-GB
style='font-family:"Courier New";color:#0000E6'>throw</span><span lang=EN-GB
style='font-family:"Courier New";color:black'> </span><span lang=EN-GB
style='font-family:"Courier New";color:#0000E6'>new</span><span lang=EN-GB
style='font-family:"Courier New";color:black'> RuntimeException(</span><span
lang=EN-GB style='font-family:"Courier New";color:#CE7B00'>&quot;UNEXPECTED&quot;</span><span
lang=EN-GB style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> (resSet.size() != 2) </span><span lang=EN-GB style='font-family:
"Courier New";color:#0000E6'>throw</span><span lang=EN-GB style='font-family:
"Courier New";color:black'> </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> RuntimeException(</span><span lang=EN-GB style='font-family:"Courier New";
color:#CE7B00'>&quot;UNEXPECTED&quot;</span><span lang=EN-GB style='font-family:
"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> count = resSet.getValue(1, 1, </span><span lang=EN-GB
style='font-family:"Courier New";color:#0000E6'>int</span><span lang=EN-GB
style='font-family:"Courier New";color:black'>.</span><span lang=EN-GB
style='font-family:"Courier New";color:#0000E6'>class</span><span lang=EN-GB
style='font-family:"Courier New";color:black'>); </span><span lang=EN-GB
style='font-family:"Courier New";color:#969696'>// Row 1, column 1</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> (count != 2) </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>throw</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> RuntimeException(</span><span lang=EN-GB style='font-family:"Courier New";
color:#CE7B00'>&quot;UNEXPECTED&quot;</span><span lang=EN-GB style='font-family:
"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    count = resSet.getValue(1, </span><span lang=EN-GB
style='font-family:"Courier New";color:#CE7B00'>&quot;CO&quot;</span><span
lang=EN-GB style='font-family:"Courier New";color:black'>, </span><span
lang=EN-GB style='font-family:"Courier New";color:#0000E6'>int</span><span
lang=EN-GB style='font-family:"Courier New";color:black'>.</span><span
lang=EN-GB style='font-family:"Courier New";color:#0000E6'>class</span><span
lang=EN-GB style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> (count != 2) </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>throw</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> RuntimeException(</span><span lang=EN-GB style='font-family:"Courier New";
color:#CE7B00'>&quot;UNEXPECTED&quot;</span><span lang=EN-GB style='font-family:
"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>float</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> avg = resSet.getValue(1, 2, </span><span lang=EN-GB
style='font-family:"Courier New";color:#0000E6'>float</span><span lang=EN-GB
style='font-family:"Courier New";color:black'>.</span><span lang=EN-GB
style='font-family:"Courier New";color:#0000E6'>class</span><span lang=EN-GB
style='font-family:"Courier New";color:black'>); </span><span lang=EN-GB
style='font-family:"Courier New";color:#969696'>// Row 1, column 2</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> (avg &lt;= 0) </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>throw</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> RuntimeException(</span><span lang=EN-GB style='font-family:"Courier New";
color:#CE7B00'>&quot;UNEXPECTED&quot;</span><span lang=EN-GB style='font-family:
"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    avg = resSet.getValue(1, </span><span lang=EN-GB
style='font-family:"Courier New";color:#CE7B00'>&quot;AV&quot;</span><span
lang=EN-GB style='font-family:"Courier New";color:black'>, </span><span
lang=EN-GB style='font-family:"Courier New";color:#0000E6'>float</span><span
lang=EN-GB style='font-family:"Courier New";color:black'>.</span><span
lang=EN-GB style='font-family:"Courier New";color:#0000E6'>class</span><span
lang=EN-GB style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB style='font-family:"Courier New";
color:black'>    </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> (avg &lt;= 0) </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>throw</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> </span><span lang=EN-GB style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> RuntimeException(</span><span lang=EN-GB style='font-family:"Courier New";
color:#CE7B00'>&quot;UNEXPECTED&quot;</span><span lang=EN-GB style='font-family:
"Courier New";color:black'>);</span></p>

<h2><a name="_Toc339112605"><span lang=EN-GB>5.5 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>GROUPING PERSISTENT ACTIONS: JEPLTASKS</span></a></h2>

<p class=MsoNormal><span lang=EN-GB>So far every SQL sentence completes a
persistent JDBC lifecycle getting a </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB>
from the pool and releasing it before the method call ends.</span></p>

<p class=MsoNormal><span lang=EN-GB>To reuse the same </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span
lang=EN-GB> we can automatically group several calls executing them into a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLTask</span></span><span
lang=EN-GB>:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>final</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLDataSource jds = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>final</span><span lang=EN-US style='font-family:"Courier New";
color:black'> ContactDAO dao = </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> ContactDAO(jds);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; task = </span></b><b><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>new</span></b><b><span
lang=EN-US style='font-family:"Courier New";color:black'>
JEPLTask&lt;Contact&gt;()</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>        @Override</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span></b><b><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span></b><b><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact exec() </span></b><b><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>throws</span></b><b><span lang=EN-US
style='font-family:"Courier New";color:black'> Exception</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            Contact contact = </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>new</span><span lang=EN-US
style='font-family:"Courier New";color:black'> Contact();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            contact.setName(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;A Contact object&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            contact.setPhone(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;9999999&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            contact.setEmail(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;contact@world.com&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            dao.insert(contact);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            Contact contact2 = dao.selectById(contact.getId());</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> contact2;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>    };</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    Contact contact = <b>jds.exec(task);</b></span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    ...</span></p>

<p class=MsoNormal><span lang=EN-GB>Before executing the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>exec()</span></span><span
lang=EN-GB> method a </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB> is got from
the </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>DataSource</span></span><span lang=EN-GB> and in the end the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span
lang=EN-GB> is released returning to the pool. Because the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span
lang=EN-GB> object is now shared by several SQL statements, </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>PreparedStatement</span></span><span
lang=EN-GB> objects are cached and reused when the SQL string is the same, this
usually happens when the same persistence method is called several times inside
the same task execution. </span></p>

<p class=MsoNormal><span lang=EN-GB>JEPLayer automatically detects whether a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDAL</span></span><span
lang=EN-GB> or </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDAO</span></span><span lang=EN-GB> object is being
used into a </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLTask</span></span><span lang=EN-GB> executed by using
the same </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDataSource</span></span><span lang=EN-GB> (the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDataSource</span></span><span
lang=EN-GB> object must be the same as the object used to create </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDAL</span></span><span
lang=EN-GB> or </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDAO </span></span><span lang=EN-GB>objects) so the
same </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>Connection</span></span><span lang=EN-GB> object is ever user.</span></p>

<p class=MsoNormal><span lang=EN-GB>A </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLTask </span></span><span lang=EN-GB>can
return any object or none (null).</span></p>

<p class=MsoNormal><span lang=EN-GB>We can provide a listener </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLListener</span></span><span
lang=EN-GB> calling the </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>exec</span></span><span lang=EN-GB> method of </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDataSource</span></span><span
lang=EN-GB> with this signature:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> &lt;T&gt; T exec(JEPLTask&lt;T&gt; task,JEPLListener listener);</span></p>

<p class=MsoNormal><span lang=EN-GB>This listener takes precedence of any other
level of listener registration (unless two or more </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLTask</span></span><span
lang=EN-GB> are nested).</span></p>

<h2><a name="_Toc339112606"><span lang=EN-GB>5.6 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>NON-JTA TRANSACTIONS</span></a></h2>

<p class=MsoNormal><span lang=EN-GB>A non-JTA transaction is a transaction only
based on JDBC, that is auto-commit mode set to false, with no other artefact
like those defined in Java Transaction API (JTA). JEPLayer also supports JTA
based transactions.</span></p>

<p class=MsoNormal><span lang=EN-GB>Once we have defined how to group
persistent actions we are ready to execute transactions, transaction
demarcation is automatic, in JEPLayer you do not need to explicitly call to </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection.commit()</span></span><span
lang=EN-GB> and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Connection.rollback()</span></span><span lang=EN-GB>
methods in spite of manually demarcation is also possible.</span></p>

<p class=MsoNormal><span lang=EN-GB>Transaction demarcation are based on </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLTask</span></span><span
lang=EN-GB>, the objective is mimic the declarative transactional demarcation
of Inversion of Control containers like Spring<a href="#_ftn8" name="_ftnref8"
title=""><span class=MsoFootnoteReference><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>[8]</span></span></span></a>
or EJB<a href="#_ftn9" name="_ftnref9" title=""><span
class=MsoFootnoteReference><span class=MsoFootnoteReference><span lang=EN-GB
style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>[9]</span></span></span></a>
(JavaEE), in JEPLayer is amazingly simple and does not require the
intrusiveness of a IoC container and you do not need to lose control of the
lifecycle of your objects avoiding the viral nature of current IoC approaches.</span></p>

<p class=MsoNormal><span lang=EN-GB>There are several ways of declaring
transactional behavior: </span></p>

<h3><a name="_Toc339112607"><span lang=EN-GB>5.6.1 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Transactional behavior configured in
JEPLDataSource level</span></a></h3>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    DataSource ds = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLBootNonJTA boot =
JEPLBootRoot.get().createJEPLBootNonJTA();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLNonJTADataSource jds =
boot.createJEPLNonJTADataSource(ds);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jds.<b>setDefaultAutoCommit</b>(</span><b><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>false</span></b><span
lang=EN-US style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal><span lang=EN-GB>This code creates and sets up a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDataSource</span></span><span
lang=EN-GB> as transactional based on pure JDBC transactions (by default auto-commit
is enabled that is not transactional), concretely a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLNonJTADataSource.</span></span><span
lang=EN-GB> In this case is important to use this inherited interface because
JTA and non-JTA transactions are different, in JTA based transactions </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection.setAutoCommit(boolean)</span></span><span
lang=EN-GB> method must not be called because transaction boundaries are
defined in a different way, this is why </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>setDefaultAutoCommit(boolean)</span></span><span
lang=EN-GB> method is only defined in </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLNonJTADataSource</span></span><span
lang=EN-GB> level.</span></p>

<p class=MsoNormal><span lang=EN-GB>Following this example when a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span
lang=EN-GB> is got from </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>DataSource</span></span><span lang=EN-GB>, </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection.setAutoCommit(false)</span></span><span
lang=EN-GB> is set before executing the SQL sentence(s), and </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection.commit()</span></span><span
lang=EN-GB> is called when SQL sentence(s) ends, on error (any kind of </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Exception</span></span><span
lang=EN-GB>) </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Connection.rollback()</span></span><span lang=EN-GB>
is called. Before returning the </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB>
to the pool, auto-commit is ever set to true by JEPLayer regardless the
configuration because this is a good practice. </span></p>

<p class=MsoNormal><span lang=EN-GB>We have seen how we can execute SQL
sentences with no </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLTask</span></span><span lang=EN-GB>, in this case
the auto-commit configuration rule is applied to every SQL sentence, every SQL
sentence is separately (atomically) executed, no </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span
lang=EN-GB> is shared and hence there is no shared transaction, obviously using
a </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLTask</span></span><span
lang=EN-GB> is the interesting use case when it comes to transactions. </span></p>

<p class=MsoNormal><span lang=EN-GB>The following task will be executed into a
transaction:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLNonJTADataSource jds = boot.createJEPLNonJTADataSource(ds);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jds.<b>setDefaultAutoCommit</b>(</span><b><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>false</span></b><span
lang=EN-US style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    ...</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; task = </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>new</span><span lang=EN-US
style='font-family:"Courier New";color:black'> JEPLTask&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact exec() </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>             ...</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    Contact contact = jds.<b>exec(task);</b></span></p>

<p class=MsoNormal><span lang=EN-GB>Configuration of transactional mode calling
</span><span lang=EN-US style='font-family:"Courier New";color:black'>JEPLNonJTADataSource.</span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>setDefaultAutoCommit(boolean)</span></span><span
lang=EN-GB> must be done before executing any SQL sentence or </span><span
lang=EN-US style='font-family:"Courier New";color:black'>JEPLTask</span><span
lang=EN-GB>.</span></p>

<h3><a name="_Toc339112608"><span lang=EN-GB>5.6.2 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Transactional behavior configured with an
annotation in JEPLTask level</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>If we change the previous code to:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLNonJTADataSource jds = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jds.setDefaultAutoCommit(</span><b><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>true</span></b><span
lang=EN-US style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    ...</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; task = </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>new</span><span lang=EN-US
style='font-family:"Courier New";color:black'> JEPLTask&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        <b>@JEPLTransactionalNonJTA</b></span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact exec() </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>...</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    Contact contact = jds.exec(task<b>);</b></span></p>

<p class=MsoNormal><span lang=EN-US>The annotation </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>@JEPLTransactionalNonJTA</span></span><span
lang=EN-US> specifies that this task is transactional. This is the same as this
verbose alternative:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>@JEPLTransactionalNonJTA(autoCommit = </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>false</span><span lang=EN-US
style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal><span lang=EN-US>The annotation sets the auto-commit mode to
false  of the task, the annotation takes precedence to default configuration
calling </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>setDefaultAutoCommit(boolean)</span></span><span lang=EN-US> in </span><span
lang=EN-US style='font-family:"Courier New";color:black'>JEPLNonJTADataSource</span><span
lang=EN-US>, </span><span lang=EN-GB>hence in this example this task is
transactional (auto-commit is set to true).</span></p>

<p class=MsoNormal><span lang=EN-US>To declare the task as not transactional
use:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>@JEPLTransactionalNonJTA(autoCommit = </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>true</span><span lang=EN-US
style='font-family:"Courier New";color:black'>)</span></p>

<h3><a name="_Toc339112609"><span lang=EN-GB>5.6.3 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Transactional behavior configured with a
parameter in JEPLTask level</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>If we change the previous code to:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLNonJTADataSource jds = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jds.setDefaultAutoCommit(</span><b><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>false</span></b><span
lang=EN-US style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    ...</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; task = </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>new</span><span lang=EN-US
style='font-family:"Courier New";color:black'> JEPLTask&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact exec() </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>...</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    Contact contact = jds.exec(task<b>,</b></span><b><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>true</span></b><b><span
lang=EN-US style='font-family:"Courier New";color:black'>);</span></b></p>

<p class=MsoNormal><span lang=EN-US>The signature of this </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPL</span></span><span
lang=EN-US style='font-family:"Courier New";color:black'>NonJTA</span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>DataSource</span></span><span
lang=EN-US style='font-family:"Courier New";color:black'> exec </span><span
lang=EN-US>method is: </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>        public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> &lt;T&gt; T exec(JEPLTask&lt;T&gt; task,</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>boolean</span><span lang=EN-US
style='font-family:"Courier New";color:black'> autoCommit);</span></p>

<p class=MsoNormal><span lang=EN-US>The auto-commit parameter of </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>exec</span></span><span
lang=EN-US> method takes precedence to default configuration calling </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>setDefaultAutoCommit(boolean)</span></span><span
lang=EN-GB> </span><span lang=EN-US> in </span><span lang=EN-US
style='font-family:"Courier New";color:black'>JEPLNonJTADataSource</span><span
lang=EN-US> and transaction demarcation by </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>@JEPLTransactionalNonJTA</span></span><span
lang=EN-US> annotation, </span><span lang=EN-GB>hence in this example this task
is not transactional (auto-commit is set to true).</span></p>

<h3><a name="_Toc339112610"><span lang=EN-GB>5.6.4 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Transactional behavior configured with JEPLConnectionListener</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>We can register a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLConnectionListener</span></span><span
lang=EN-GB> like this one:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Monospaced","serif";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLDataSource jds = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jds.<b>addJEPLListener</b>(</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>new</span><span lang=EN-US
style='font-family:"Courier New";color:black'> <b>JEPLConnectionListener</b>()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> <b>setupJEPLConnection</b>(JEPLConnection con,JEPLTask task)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>throws</span><span lang=EN-US style='font-family:
"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                 con.getConnection().<b>setAutoCommit(</b></span><b><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>true</span></b><b><span
lang=EN-US style='font-family:"Courier New";color:black'>);</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    );</span></p>

<p class=MsoNormal><span lang=EN-GB>This configuration approach is very similar
to calling </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPL</span></span><span lang=EN-US style='font-family:
"Courier New";color:black'>NonJTA</span><span class=CdigoFuenteCarCar><span
lang=EN-US style='font-size:11.0pt'>DataSource.</span></span><span lang=EN-US
style='font-family:"Courier New";color:black'>setDefaultAutoCommit(boolean).</span></p>

<p class=MsoNormal><span lang=EN-GB>This method must be called <i>before</i>
executing any SQL sentence (otherwise an exception is thrown), the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span
lang=EN-GB> is configured as non-transactional because this listener is called <i>after</i>
any kind of </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB> preparation
by JEPLayer, hence this  listener dictates the final transactional mode (if
this listener is finally applied because they could be more listeners of this
type with more priority). As </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLConnectionListener</span></span><span
lang=EN-GB> registered in </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLDataSource</span></span><span
lang=EN-GB> level has priority over </span><span class=CdigoFuenteCarCar><span
lang=EN-US style='font-size:11.0pt'>JEPL</span></span><span lang=EN-US
style='font-family:"Courier New";color:black'>NonJTA</span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>DataSource.</span></span><span
lang=EN-US style='font-family:"Courier New";color:black'>setDefaultAutoCommit(boolean)</span><span
lang=EN-GB>. JEPLayer only calls </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>Connection.commit()</span></span><span
lang=EN-GB> or </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Connection.rollback()</span></span><span lang=EN-GB>
whether </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>Connection.getAutoCommit()</span></span><span lang=EN-GB> returns false
when the SQL sentence or </span><span lang=EN-US style='font-family:"Courier New";
color:black'>JEPLTask</span><span lang=EN-GB> ends.</span></p>

<p class=MsoNormal><span lang=EN-GB>As you already know, you can register this
kind of listener in several locations/levels, for instance in </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLTask</span></span><span
lang=EN-GB>:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLDataSource jds = ... ;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; task = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jds.exec(task,</span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLConnectionListener()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLConnection(JEPLConnection con,JEPLTask task)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>throws</span><span lang=EN-US style='font-family:
"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                con.getConnection().<b>setAutoCommit(</b></span><b><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>false</span></b><b><span
lang=EN-US style='font-family:"Courier New";color:black'>);</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:"Courier New"'>   
);  </span><span lang=EN-US style='font-family:"Courier New"'>  </span></p>

<p class=MsoNormal><span lang=EN-GB>This code executes the task inside a JDBC
transaction (note the listener is called once), in this case this listener
takes precedence of another </span><span lang=EN-US style='font-family:"Courier New";
color:black'>JEPLConnectionListener</span><span lang=EN-GB> registered in </span><span
lang=EN-US style='font-family:"Courier New";color:black'>JEPLDataSource </span><span
lang=EN-GB>level and the later is not executed. JEPLayer understands that your
provided a </span><span lang=EN-US style='font-family:"Courier New";color:black'>JEPLConnectionListener</span><span
lang=EN-US> </span><span lang=EN-GB>as a parameter in </span><span lang=EN-US
style='font-family:"Courier New";color:black'>JEPLDataSource</span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>.exec()</span></span><span
lang=EN-GB> method, is your opportunity to define the auto-commit mode in the
highest level, so no other auto-commit rule is applied like </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>@JEPLTransactionalNonJTA</span></span><span
lang=EN-GB> annotation if present or default auto-commit configuration or
default </span><span lang=EN-US style='font-family:"Courier New";color:black'>JEPLConnectionListener</span><span
lang=EN-GB> registered in </span><span lang=EN-US style='font-family:"Courier New";
color:black'>JEPLDataSource </span><span lang=EN-GB>level.</span></p>

<h3><a name="_Toc339112611"><span lang=EN-GB>5.6.5 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Manual demarcation of a transaction with JEPLConnectionListener</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>The signature of the method:</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>      void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLConnection(JEPLConnection con,JEPLTask&lt;T&gt; task)</span></p>

<p class=MsoNormal><span lang=EN-GB>Includes a </span><span lang=EN-US
style='font-family:"Courier New";color:black'>JEPLTask</span><span lang=EN-GB>
parameter, if we execute this task accordingly with previously documented
behavior, the SQL sentences will be executed and then the method returns… what
about transactional behavior?   </span></p>

<p class=MsoNormal><span lang=EN-GB>If you do not call </span><span lang=EN-US
style='font-family:"Courier New";color:black'>JEPLTask.exec() </span><span
lang=EN-GB>JEPLayer automatically calls </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>commit()</span></span><span lang=EN-GB> and
</span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>rollback()</span></span><span
lang=EN-GB> if </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB> is not in
auto-commit mode but if </span><span lang=EN-US style='font-family:"Courier New";
color:black'>JEPLTask.exec() </span><span lang=EN-GB>is called JEPLayer
behavior IS DIFFERENT, no </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>commit()</span></span><span lang=EN-GB> or </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>rollback()</span></span><span
lang=EN-GB> are called because the developer has a chance to manually control
the transaction.</span></p>

<p class=MsoNormal><span lang=EN-GB>Example:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLDataSource jds = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; task = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jds.exec(task,</span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLConnectionListener()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLConnection(JEPLConnection con,JEPLTask task)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>               </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                con.getConnection().setAutoCommit(</span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>false</span><span
lang=EN-US style='font-family:"Courier New";color:black'>); </span><span
lang=EN-US style='font-family:"Courier New";color:#969696'>// transaction</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>try</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    task.exec();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    con.getConnection().commit();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>catch</span><span lang=EN-US style='font-family:"Courier New";
color:black'>(Exception ex)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    con.getConnection().rollback();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>                    throw</span><span lang=EN-US
style='font-family:"Courier New"'> ex;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    );</span></p>

<p class=MsoNormal><span lang=EN-GB>There is no need to restore </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>setAutoCommit(true)</span></span><span
lang=EN-GB>, JEPLayer restores the default state before returning to the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>DataSource</span></span><span
lang=EN-GB> pool the active </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB>.</span></p>

<h3><a name="_Toc339112612"><span lang=EN-GB>5.6.6 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Manual demarcation of a transaction using JEPLTransaction</span></a></h3>

<p class=MsoNormal><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLTransaction</span></span><span lang=EN-GB> is a
fancy interface to hide direct transaction management with </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span
lang=EN-GB>.</span></p>

<p class=MsoNormal><span lang=EN-GB>The previous example can be coded with
exactly the same behavior using </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLTransaction</span></span><span
lang=EN-GB>:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLDataSource jds = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; task = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jds.exec(task,</span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLConnectionListener()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLConnection(JEPLConnection con,JEPLTask task)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>throws</span><span lang=EN-US style='font-family:
"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                <b>JEPLTransaction txn = con.getJEPLTransaction();</b></span></p>

<pre><span lang=EN-US style='font-family:"Courier New"'>                txn.<b>begin</b>(); </span><span
lang=EN-US style='font-family:"Courier New";color:#969696'>// Executes setAutoCommit(false);</span></pre>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>try</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    task.exec();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    txn.<b>commit</b>();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>catch</span><span lang=EN-US style='font-family:"Courier New";
color:black'>(Exception ex)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    txn.<b>rollback</b>();</span></p>

<pre><span lang=EN-US style='font-family:"Courier New"'>                    </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>throw</span><span
lang=EN-US style='font-family:"Courier New"'> ex;</span><span lang=EN-US
style='font-family:"Courier New"'> </span></pre>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span style='font-family:"Courier New";
color:black'>    );</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span style='font-family:"Monospaced","serif";
color:black'>&nbsp;</span></p>

<h3><a name="_Toc339112613"><span lang=EN-GB>5.6.7 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Manual demarcation of a transaction inside
JEPLTask</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>Yes you can, you can directly demarcate you
transaction inside your </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLTask</span></span><span lang=EN-GB>, it may be a
bit confusing for JEPLayer but it works as expected. Take a look to this
example:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>final</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLNonJTADataSource jds = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; task = </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>new</span><span lang=EN-US
style='font-family:"Courier New";color:black'> JEPLTask&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact exec() </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            Connection con =
jds.getCurrentJEPLConnection().getConnection();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            con.setAutoCommit(</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>false</span><span lang=EN-US
style='font-family:"Courier New";color:black'>); </span><span lang=EN-US
style='font-family:"Courier New";color:#969696'>// transaction</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            Contact contact = ...; </span><span lang=EN-US
style='font-family:"Courier New";color:#969696'>// Some persistent statements</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            con.commit();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            con.setAutoCommit(</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>true</span><span lang=EN-US
style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> contact;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jds.exec(task,</span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>false</span><span lang=EN-US style='font-family:"Courier New";
color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Monospaced","serif";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB>This example is
intentionally confusing because the </span><span lang=EN-US style='font-family:
"Courier New";color:black'>JEPLTask</span><span lang=EN-GB> is executed in
transactional mode (auto-commit set to false), JEPLayer sets auto-commit to
false before executing </span><span lang=EN-US style='font-family:"Courier New";
color:black'>JEPLTask</span><span lang=EN-GB> custom code, a new call to </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>setAutoCommit(false)</span></span><span
lang=EN-GB> is not important, the interesting part is when the task method
ends, auto-commit mode was set to true, that is, no transaction, but JEPLayer
thinks it must be transactional… not a problem JEPLayer only calls commit (or
rollback in exception) when the </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB>
is not in auto-commit mode. If the last call, </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>setAutoCommit(true)</span></span><span
lang=EN-GB> is removed JEPLayer detects the connection with auto-commit
disabled and calls </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>commit()</span></span><span lang=EN-GB> again, this
call does nothing because there is no pending persistent statement.  </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB>If you want to code this way
of demarcation, disabling transactions is recommended, for instance calling: </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    ...</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jds.exec(task,</span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>true</span><span lang=EN-US style='font-family:"Courier New";
color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<h3><a name="_Toc339112614"><span lang=EN-GB>5.6.8 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Nested transactional tasks</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>You can nest transactional tasks, when
nested one </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB> is opened by
the outermost and is shared by all nested tasks, in the end of the outermost
task the </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB> is closed.</span></p>

<p class=MsoNormal><span lang=EN-GB>For instance:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>final</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLNonJTADataSource jds = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    ...</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; taskOutside = </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>new</span><span lang=EN-US
style='font-family:"Courier New";color:black'> JEPLTask&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact exec() </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            JEPLTask&lt;Contact&gt; taskInside = </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>new</span><span
lang=EN-US style='font-family:"Courier New";color:black'>
JEPLTask&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact exec() </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>return</span><span lang=EN-US style='font-family:
"Courier New";color:black'> ...; // Database operations</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> jds.exec(taskInside,</span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>false</span><span lang=EN-US style='font-family:
"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jds.exec(taskOutside,</span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>false</span><span lang=EN-US style='font-family:
"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB>In spite of previous example
may seem weird, nested tasks may be very common, for instance when you have
several methods in a DAO class and every method executes a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLTask</span></span><span
lang=EN-GB>, and inside a </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLTask</span></span><span lang=EN-GB> you
need to call other method (containing a </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLTask</span></span><span lang=EN-GB>). </span></p>

<h2><a name="_Toc339112615"><span lang=EN-GB>5.7 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>JTA TRANSACTIONS</span></a></h2>

<p class=MsoNormal><span lang=EN-GB>JEPLayer also supports transactions based
on Java Transaction API (JTA) by using the provided </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>javax.transaction.UserTransaction</span></span><span
lang=EN-GB> and optionally a </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>javax.transaction.TransactionManager</span></span><span
lang=EN-GB> object.</span></p>

<p class=MsoNormal><span lang=EN-GB>As you know in JTA </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>DataSource</span></span><span
lang=EN-GB> objects must be JTA/XA capable and bound to the JTA infrastructure
of your application server or JTA provider, otherwise JTA transactions have no
effect into a conventional pure JDBC </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>DataSource</span></span><span lang=EN-GB>. </span></p>

<h3><a name="_Toc339112616"><span lang=EN-GB>5.7.1 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Tested JTA environments</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>JTA support in JEPLayer has been tested
with success in the following environments:</span></p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-18.0pt'><span
lang=EN-GB style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>JOTM 2.1.9 with XAPool 1.6 beta (XAPool already
included in JOTM 2.1.9 is buggy)<a href="#_ftn10" name="_ftnref10" title=""><span
class=MsoFootnoteReference><span class=MsoFootnoteReference><span lang=EN-GB
style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>[10]</span></span></span></a>
and MySQL 5.1.15 JDBC driver </span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
lang=EN-GB style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Atomikos 3.70<a href="#_ftn11" name="_ftnref11"
title=""><span class=MsoFootnoteReference><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>[11]</span></span></span></a></span></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-18.0pt'><span lang=EN-GB
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>GlassFish 3.0.1 and built-in XA capable MySQL </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>DataSource</span></span></p>

<p class=MsoNormal><span lang=EN-GB>In JOTM environment you must wrap your JDBC
driver with XAPool </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>StandardXADataSource</span></span><span lang=EN-GB> to
convert it into a </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>XADataSource</span></span><span lang=EN-GB> and then
wrap it with </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>StandardXAPoolDataSource</span></span><span
lang=EN-GB>, do not forget registering the JOTM </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>UserTransaction</span></span><span
lang=EN-GB> singleton (this object is also a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>TransactionManager</span></span><span
lang=EN-GB>) on both objects. The source code distribution of JEPLayer contains
a complete example. JEPLayer automatically recognizes a XAPool </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>XADataSource</span></span><span
lang=EN-GB> and applies some workaround avoiding one important bug related to </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>PreparedStatement</span></span><a
href="#_ftn12" name="_ftnref12" title=""><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:11.0pt;font-family:"Courier New"'><span
class=MsoFootnoteReference><span lang=EN-GB style='font-size:11.0pt;font-family:
"Courier New"'>[12]</span></span></span></span></a><span lang=EN-GB>. Furthermore
in JOTM example code of JEPLayer you will see a call to </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>StandardXADataSource.setPreparedStmtCacheSize(int)</span></span><span
lang=EN-GB> with parameter 0 (cache disabled) because </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>PreparedStatement</span></span><span
lang=EN-GB> internal cache of XAPool is buggy (or ruse of </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>PreparedStatement</span></span><span
lang=EN-GB> objects is not standard), do not worry JEPLayer provides automatic
reuse (that is caching) of </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>PreparedStatement</span></span><span
lang=EN-GB> objects for you. In spite of JOTM/XAPool are not longer supported by
their authors and very far of a perfect JTA implementation, they provide a good
enough JTA environment and performance is perhaps unmatched (maybe because
reliability against system failures is not the best).</span></p>

<p class=MsoNormal><span lang=EN-GB>In Atomikos you must wrap the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>XADataSource</span></span><span
lang=EN-GB> driver of your database with </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>AtomikosDataSourceBean</span></span><a
href="#_ftn13" name="_ftnref13" title=""><span class=MsoFootnoteReference><span
lang=EN-GB><span class=MsoFootnoteReference><span lang=EN-GB style='font-size:
10.0pt;font-family:"Verdana","sans-serif"'>[13]</span></span></span></span></a><span
lang=EN-GB>, JEPLayer distribution includes an example of configuring with
Atomikos.</span></p>

<p class=MsoNormal><span lang=EN-GB>In an application server like GlassFish you
usually configure the XA capable </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>DataSource</span></span><span lang=EN-GB>
using the administrative tools or configuration files of the server obtaining
it from the JNDI registry, the same for </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>UserTransaction</span></span><span
lang=EN-GB> and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>TransactionManager</span></span><span lang=EN-GB>
singletons<a href="#_ftn14" name="_ftnref14" title=""><span
class=MsoFootnoteReference><span class=MsoFootnoteReference><span lang=EN-GB
style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>[14]</span></span></span></a>.
</span></p>

<h3><a name="_Toc339112617"><span lang=EN-GB>5.7.2 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>How JEPLayer works in JTA mode</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>Definition of JTA transactions in JEPLayer
is very similar to non-JTA (pure JDBC) transactions, the main difference is, in
non-JTA you configure transaction behavior with the auto-commit flag and a transaction
is demarcated by JEPLayer calling </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>Connection.setAutoCommit(false)</span></span><span
lang=EN-GB>, </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Connection.commit()</span></span><span lang=EN-GB> or </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection.rollback()</span></span><span
lang=EN-GB>. In JTA and JEPLayer, transactions are configured using very
similar conventions to Java EE<a href="#_ftn15" name="_ftnref15" title=""><span
class=MsoFootnoteReference><span class=MsoFootnoteReference><span lang=EN-GB
style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>[15]</span></span></span></a>
and transaction demarcation is done by JEPLayer calling </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>UserTransaction</span></span><span
lang=EN-GB> methods (</span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>begin()</span></span><span lang=EN-GB>, </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>commit()</span></span><span
lang=EN-GB> and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>rollback()</span></span><span lang=EN-GB>) and in
certain cases calling </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>TransactionManager</span></span><span lang=EN-GB>
methods when provided.</span></p>

<p class=MsoNormal><span lang=EN-GB>The same as non-JTA you do not need to
explicitly call to </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>UserTransaction</span></span><span lang=EN-GB> methods
JEPLayer calls them for you because transaction demarcation is also based on </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLTask</span></span><span
lang=EN-GB>, in spite of manually demarcation is also possible. Again JEPLayer
mimics the declarative transactional demarcation of Inversion of Control
containers like Spring<a href="#_ftn16" name="_ftnref16" title=""><span
class=MsoFootnoteReference><span class=MsoFootnoteReference><span lang=EN-GB
style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>[16]</span></span></span></a>
or EJB<a href="#_ftn17" name="_ftnref17" title=""><span
class=MsoFootnoteReference><span class=MsoFootnoteReference><span lang=EN-GB
style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>[17]</span></span></span></a>
(JavaEE) with minimal infrastructure, in this case JEPLayer is even more
similar.</span></p>

<p class=MsoNormal><span lang=EN-GB>When transactional behavior is declared
JEPLayer begins a new transaction (if there is no one already active in the
current thread) and then gets a new </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB>
from the pool, this </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB> must be
automatically enrolled by your JTA provider (otherwise JTA transactions have no
effect in your </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>DataSource</span></span><span lang=EN-GB>), database
actions are executed and the </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB>
is returned to the pool, finally the transaction is committed (or rolled back
if some exception was thrown). </span></p>

<p class=MsoNormal><span lang=EN-GB>There are several ways of declaring JTA
based transactional behavior: </span></p>

<h3><a name="_Toc339112618"><span lang=EN-GB>5.7.3 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Transactional behavior configured in
JEPLDataSource level</span></a></h3>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB>In JTA, JEPLayer bootstrap
is a bit more complicated: </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    UserTransaction txn = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    TransactionManager txnMgr = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    DataSource ds = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    <b>JEPLBootJTA</b> boot = <b>JEPLBootRoot</b>.get().createJEPLBootJTA();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    boot.setUserTransaction(txn);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    boot.setTransactionManager(txnMgr);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    <b>JEPLJTADataSource</b> jds =
boot.createJEPLJTADataSource(ds);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jds.setDefaultJEPLTransactionPropagation(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>               JEPLTransactionPropagation.REQUIRED);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    ...</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; task = </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>new</span><span lang=EN-US
style='font-family:"Courier New";color:black'> JEPLTask&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact exec() </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> ...; </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// Database actions</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    Contact contact = jds.exec(task);</span></p>

<p class=MsoNormal><span lang=EN-GB>This code creates and sets up a JTA based </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLDataSource</span></span><span
lang=EN-GB>, concretely a </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLJTADataSource</span></span><span
lang=EN-GB> and configures the default transaction mode (propagation) as </span><span
lang=EN-US style='font-family:"Courier New";color:black'>JEPLTransactionPropagation.REQUIRED</span><span
lang=EN-US> </span><span lang=EN-GB>, this configuration call is not necessary
because this is the default value.</span></p>

<p class=MsoNormal><span lang=EN-GB>The enumeration </span><span lang=EN-US
style='font-family:"Courier New";color:black'>JEPLTransactionPropagation</span><span
lang=EN-GB> defines the same values and semantics as </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>javax.ejb.TransactionAttributeType</span></span><span
lang=EN-GB> of Java EE 5 EJB. According to the propagation value defined the
transaction is demarcated following the same rules defined in </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>javax.ejb.TransactionAttributeType</span></span><span
lang=EN-GB> attributes, read the javadoc<a href="#_ftn18" name="_ftnref18"
title=""><span class=MsoFootnoteReference><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:10.0pt;font-family:"Verdana","sans-serif"'>[18]</span></span></span></a>
of this enumeration to understand how JEPLayer works. </span></p>

<p class=MsoNormal><span lang=EN-GB>In previous example </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>REQUIRED</span></span><span
lang=EN-GB> is the default mode and no other value is provided in a different
step, before calling </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLTask.exec()</span></span><span lang=EN-GB> method
JEPLayer checks whether a JTA transaction is active, if there is no one </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>UserTransaction.begin()</span></span><span
lang=EN-GB> is called (because a transaction is “REQUIRED”), after the end of </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLTask.exec()</span></span><span
lang=EN-GB> method JEPLayer calls </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>UserTransaction.commit()</span></span><span
lang=EN-GB> or </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>UserTransaction.rollback()</span></span><span
lang=EN-GB> if some exception has been thrown. If a JTA transaction is active
then JEPLayer does not demarcate again the transaction calling </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>UserTransaction</span></span><span
lang=EN-GB> methods and no new transaction is created. As you can see the
semantic of </span><span lang=EN-US style='font-family:"Courier New";
color:black'>JEPLTransactionPropagation.REQUIRED</span><span lang=EN-GB> is the
same as </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>TransactionAttributeType.REQUIRED</span></span><span lang=EN-GB>.</span></p>

<p class=MsoNormal><span lang=EN-GB>Basic support of JTA only needs the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>UserTransaction</span></span><span
lang=EN-GB> object registered into the </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLBootJTA</span></span><span lang=EN-GB>
used to create the </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLJTADataSource</span></span><span lang=EN-GB>. </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>TransactionManager</span></span><span
lang=EN-GB> is optional and only is required if propagation mode is </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>NOT_SUPPORTED</span></span><span
lang=EN-GB> or </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>REQUIRES_NEW</span></span><span lang=EN-GB> and there
is a JTA transaction active before calling the persistent task, in this case
the transaction is suspended/resumed calling </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>suspend()</span></span><span
lang=EN-GB> and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>resume() </span></span><span lang=EN-GB>methods of </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>TransactionManager.</span></span></p>

<h3><a name="_Toc339112619"><span lang=EN-GB>5.7.4 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Transactional behavior configured with an
annotation in JEPLTask level</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>Another way to define the transactional
behavior is through the annotation </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>@JEPLTransactionalJTA.</span></span><span
lang=EN-GB> </span></p>

<p class=MsoNormal><span lang=EN-GB>Adding this annotation to the previous
example:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLJTADataSource jds = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jds.setDefaultJEPLTransactionPropagation(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>               JEPLTransactionPropagation.<b>NOT_SUPPORTED</b>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    ...</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; task = </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>new</span><span lang=EN-US
style='font-family:"Courier New";color:black'> JEPLTask&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        <b>@JEPLTransactionalJTA  </b></span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact exec() </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> ...; </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// Database actions</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    Contact contact = jds.exec(task);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>The annotation </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>@JEPLTransactionalJTA</span></span><span
lang=EN-US> specifies that this task is transactional and the propagation mode
is </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>REQUIRED</span></span><span
lang=EN-GB> </span><span lang=EN-US>(the default mode). This is the verbose
alternative:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>@JEPLTransactionalJTA(propagation =
JEPLTransactionPropagation.REQUIRED)</span></p>

<p class=MsoNormal><span lang=EN-US>The annotation in </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLTask</span></span><span
lang=EN-US> takes precedence to default configuration calling </span><span
lang=EN-US style='font-family:"Courier New";color:black'>setDefaultJEPLTransactionPropagation</span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>()</span></span><span
lang=EN-US> in </span><span lang=EN-US style='font-family:"Courier New";
color:black'>JEPLJTADataSource</span><span lang=EN-US>, hence in spite of value
</span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>NOT_SUPPORTED</span></span><span
lang=EN-GB> </span><span lang=EN-GB>this task is transactional.</span></p>

<p class=MsoNormal><span lang=EN-US>For instance to declare the task as not
transactional use:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>@JEPLTransactionalJTA(propagation = JEPLTransactionPropagation.NEVER)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US>Or:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>@JEPLTransactionalJTA(propagation = JEPLTransactionPropagation.NOT_SUPPORTED)</span></p>

<h3><a name="_Toc339112620"><span lang=EN-GB>5.7.5 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Transactional behavior configured with a
parameter in JEPLTask level</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>If we change the previous code to:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>   JEPLJTADataSource jds = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>   jds.setDefaultJEPLTransactionPropagation(</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>               JEPLTransactionPropagation.<b>NOT_SUPPORTED</b>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>   ...</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>   JEPLTask&lt;Contact&gt; task = </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>new</span><span lang=EN-US
style='font-family:"Courier New";color:black'> JEPLTask&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>   {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>     @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>     @JEPLTransactionalJTA(propagation=JEPLTransactionPropagation.<b>NOT_SUPPORTED</b>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>     </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact exec() </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>     {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>         </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return </span><span lang=EN-US style='font-family:"Courier New";
color:black'>...; </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// Database actions</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>     }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>   };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>   Contact contact = jds.exec(task,<b>JEPLTransactionPropagation.REQUIRED</b>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>The signature of this </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPL</span></span><span
lang=EN-US style='font-family:"Courier New";color:black'>JTA</span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>DataSource</span></span><span
lang=EN-US style='font-family:"Courier New";color:black'> exec </span><span
lang=EN-US>method is: </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>        public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> &lt;T&gt; T exec(JEPLTask&lt;T&gt; task,JEPLTransactionPropagation
prop);</span></p>

<p class=MsoNormal><span lang=EN-US>The propagation parameter of </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>exec</span></span><span
lang=EN-US> method takes precedence to default configuration calling </span><span
lang=EN-US style='font-family:"Courier New";color:black'>setDefaultJEPLTransactionPropagation</span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>() </span></span><span
lang=EN-US>in </span><span lang=EN-US style='font-family:"Courier New";
color:black'>JEPLJTADataSource</span><span lang=EN-US> and transaction
demarcation by </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>@JEPLTransactionalJTA</span></span><span lang=EN-US>
annotation, </span><span lang=EN-GB>hence in this example in spite of </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>NOT_SUPPORTED</span></span><span
lang=EN-GB> configurations, this task is transactional (</span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>REQUIRED</span></span><span
lang=EN-GB>).</span></p>

<h3><a name="_Toc339112621"><span lang=EN-GB>5.7.6 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Manual demarcation of a transaction with JEPLConnectionListener</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>In non-JTA we could ignore the automatic
transaction demarcation of JEPLayer using a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLConnectionListener</span></span><span
lang=EN-GB> and implementing the method:</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>      void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLConnection(JEPLConnection con,JEPLTask&lt;T&gt; task)</span></p>

<p class=MsoNormal><span lang=EN-GB>and executing the task in this method (calling
</span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLTask.exec()</span></span><span
lang=EN-GB>), JEPLayer understood you wanted bypass built-in transactional
demarcation. </span></p>

<p class=MsoNormal><span lang=EN-GB>In JTA this is not longer true because
transaction demarcation takes place <i>before</i> getting and <i>after</i>
releasing the </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB> that is the
transaction begins </span><span lang=EN-US style='font-family:"Courier New";
color:black'>setupJEPLConnection</span><span lang=EN-GB> before is executed.
Sure you have thought “ok disabling transactions in JEPLayer I can manually
begin and commit a transaction in </span><span lang=EN-US style='font-family:
"Courier New";color:black'>setupJEPLConnection</span><span lang=EN-GB>” and yes
this an option but it is not going to work in any JTA environment, usually JTA
providers enrol database actions into the current active transaction when the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span
lang=EN-GB> is got from </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>DataSource</span></span><span lang=EN-GB> otherwise
the </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>Connection</span></span><span lang=EN-GB> is used outside the
transaction if it was got before the transaction begun<a href="#_ftn19"
name="_ftnref19" title=""><span class=MsoFootnoteReference><span
class=MsoFootnoteReference><span lang=EN-GB style='font-size:10.0pt;font-family:
"Verdana","sans-serif"'>[19]</span></span></span></a>.</span></p>

<p class=MsoNormal><span lang=EN-GB>In spite of this limitation you can
manually commit or rollback a transaction created by JEPLayer into the </span><span
lang=EN-US style='font-family:"Courier New";color:black'>setupJEPLConnection</span><span
lang=EN-GB> method. This works in JEPLayer because JEPLayer do not commit or
rollback a transaction if the transaction is finished. </span></p>

<p class=MsoNormal><span lang=EN-GB>The following example shows how we can
execute some persistent code in a transaction and ever rollback all persistent
actions.</span></p>

<pre><span lang=EN-GB style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-GB style='font-family:"Courier New"'>final</span></span><span
lang=EN-GB style='font-family:"Courier New"'> JEPLJTADataSource jds = ...;</span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>    </span><span class=comment1><span
lang=EN-GB style='font-family:"Courier New"'>// ...</span></span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>    JEPLTask&lt;Contact&gt; task = ...;</span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>    Contact contact = jds.exec(task,</span><span
class=keyword-directive1><span lang=EN-GB style='font-family:"Courier New"'>new</span></span><span
lang=EN-GB style='font-family:"Courier New"'> JEPLConnectionListener&lt;Contact&gt;()</span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>        {</span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>          </span><span
class=keyword-directive1><span lang=EN-GB style='font-family:"Courier New"'>public</span></span><span
lang=EN-GB style='font-family:"Courier New"'> </span><span
class=keyword-directive1><span lang=EN-GB style='font-family:"Courier New"'>void</span></span><span
lang=EN-GB style='font-family:"Courier New"'> setupJEPLConnection(JEPLConnection con,</span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>                               JEPLTask&lt;Contact&gt; task) </span><span
class=keyword-directive1><span lang=EN-GB style='font-family:"Courier New"'>throws</span></span><span
lang=EN-GB style='font-family:"Courier New"'> Exception</span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>          {</span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>            UserTransaction txn = jds.getJEPLBootJTA().getUserTransaction();</span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>            // DO NOT execute txn.begin() is already opened by JEPLayer</span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>            </span><span
class=keyword-directive1><span lang=EN-GB style='font-family:"Courier New"'>try</span></span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>            {</span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>              Contact contact = <b>task.exec();</b></span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>            }</span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>            </span><span
class=keyword-directive1><span lang=EN-GB style='font-family:"Courier New"'>finally</span></span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>            {</span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>              <b>txn.rollback();</b></span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>            }</span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>          }</span></pre><pre><span
lang=EN-GB style='font-family:"Courier New"'>        },JEPLTransactionPropagation.<b>REQUIRED</b>);</span></pre>

<h3><a name="_Toc339112622"><span lang=EN-GB>5.7.7 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Manual demarcation of a transaction using JEPLTransaction</span></a></h3>

<p class=MsoNormal><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLTransaction</span></span><span lang=EN-GB> is a wrapper
hiding the underlying transaction mechanism, pure JDBC or JTA, because it was
invented to make non-JTA and JTA compatible, the example seen in non-JTA is
also valid in a JTA environment. In this case the underlying transaction
manager is </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>UserTransaction</span></span><span lang=EN-GB> (see </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLTransaction.getUnderlyingTransaction(Class&lt;T&gt;)</span></span><span
lang=EN-GB>), note the call to </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>isActive()</span></span><span lang=EN-GB>
to detect if the transaction is already opened (in this example </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>begin</span></span><span
lang=EN-GB> is not executed), by this way code of task is portable between JTA
and non-JTA.</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLJTADataSource jds = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; task = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jds.exec(task,</span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLConnectionListener()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLConnection(JEPLConnection con,JEPLTask task)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                       </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>throws</span><span lang=EN-US style='font-family:
"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                <b>JEPLTransaction txn = con.getJEPLTransaction();</b></span></p>

<pre><span lang=EN-US style='font-family:"Courier New"'>                if (!txn.isActive()) txn.<b>begin</b>(); </span></pre>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>try</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    task.exec();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    txn.<b>commit</b>();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>catch</span><span lang=EN-US style='font-family:"Courier New";
color:black'>(Exception ex)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    txn.<b>rollback</b>();</span></p>

<pre><span lang=EN-US style='font-family:"Courier New"'>                    </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>throw</span><span
lang=EN-US style='font-family:"Courier New"'> ex;</span><span lang=EN-US
style='font-family:"Courier New"'> </span></pre>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span><span style='font-family:"Courier New";color:black'>,</span><span
lang=EN-GB style='font-family:"Courier New"'>JEPLTransactionPropagation.<b>REQUIRED</b>)</span><span
style='font-family:"Courier New";color:black'>;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span style='font-family:"Monospaced","serif";
color:black'>&nbsp;</span></p>

<h3><a name="_Toc339112623"><span lang=EN-GB>5.7.8 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Manual demarcation of a transaction outside
JEPLTask</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>You can directly demarcate your transaction
outside a </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLTask</span></span><span lang=EN-GB>, JEPLayer is
still useful to automatically get and release database connections. To avoid
built-in transaction management use </span><span lang=EN-US style='font-family:
"Courier New";color:black'>JEPLTransactionPropagation.REQUIRED </span><span
lang=EN-GB>or</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:black'>SUPPORTS.</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLJTADataSource jds = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    UserTransaction txn =
jds.getJEPLBootJTA().getUserTransaction();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    txn.<b>begin</b>();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; task = </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>new</span><span lang=EN-US
style='font-family:"Courier New";color:black'> JEPLTask&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact exec() </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            Contact contact = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> contact;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jds.exec(task,JEPLTransactionPropagation.<b>REQUIRED</b>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    txn.<b>commit</b>();</span></p>

<h3><a name="_Toc339112624"><span lang=EN-GB>5.7.9 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>Nested transactional tasks/regions</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>The same as non-JTA you can nest
transactional regions and tasks, in nested tasks the same </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span
lang=EN-GB> is shared. For instance:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>final</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLJTADataSource jds = </span><span lang=EN-GB>...</span><span
lang=EN-US style='font-family:"Courier New";color:black'>;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    ...</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    <b>JEPLTask&lt;Contact&gt; taskOutside</b> = </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>new</span><span
lang=EN-US style='font-family:"Courier New";color:black'>
JEPLTask&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact exec() </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            <b>JEPLTask&lt;Contact&gt; taskInside</b> = </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>new</span><span
lang=EN-US style='font-family:"Courier New";color:black'> JEPLTask&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact exec() </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                    </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>return </span><span lang=EN-GB>...</span><span
lang=EN-US style='font-family:"Courier New";color:black'>;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> <b>jds.exec</b>(taskInside,JEPLTransactionPropagation.<b>SUPPORTS</b>);
</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                                                             // OR
REQUIRED</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    <b>jds.exec</b>(taskOutside,JEPLTransactionPropagation.<b>REQUIRED</b>);</span></p>

<h2><a name="_Toc339112625"><span lang=EN-GB>5.8 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>FAKE JTA TRANSACTIONS</span></a></h2>

<p class=MsoNormal><span lang=EN-US>JEPLayer has a “fake” mode for JTA, this
mode is just a simple and basic but effective simulation of JTA based on pure
JDBC transactions.</span></p>

<p class=MsoNormal><span lang=EN-US>The interface </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLBootJTA</span></span><span
lang=EN-US> has a method </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLBootJTA</span></span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>.</span></span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>createJDBCUserTransaction</span></span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>()</span></span><span
lang=EN-US>, this method creates a “false” </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>UserTransaction</span></span><span
lang=EN-US> object simulating a true JTA compliant </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>UserTransaction</span></span><span
lang=EN-US>. You can use this object to register it into the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLBootJTA</span></span><span
lang=EN-US>.</span></p>

<p class=CdigoFuenteCarCxSpFirst><span lang=EN-US>    JEPLBootJTA boot =
JEPLBootRoot.get().createJEPLBootJTA();</span></p>

<p class=CdigoFuenteCarCxSpLast><span lang=EN-US>   
boot.setUserTransaction(boot.<b>createJDBCUserTransaction</b>());</span></p>

<p class=MsoNormal><span lang=EN-US>This </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>UserTransaction</span></span><span
lang=EN-US> object is not JTA compliant, for instance:</span></p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-18.0pt'><span
lang=EN-US>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>Transactions are local (not distributed).</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
lang=EN-US>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>There is no two-phase commit: all connections are committed and
rollbacked in the same time using basic JDBC transactions, for instance if one
commit fails all pending transactions are rolled back but the already committed
transactions cannot be rolled back (partial commit). Fortunately failing in </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>commit()</span></span><span
lang=EN-US> or </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>rollback()</span></span><span lang=EN-GB> </span><span
lang=EN-US>is not usual.</span></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-18.0pt'><span lang=EN-US>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>Cannot be used outside of JEPLayer.</span></p>

<p class=MsoNormal><span lang=EN-US>In spite of this fake </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>UserTransaction</span></span><span
lang=EN-US> object is not JTA compliant the JTA semantics and code are the
same, the fake </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>UserTransaction</span></span><span lang=EN-GB> </span><span
lang=EN-US>is multithread and knows all current </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span
lang=EN-US>s opened by </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLJTADataSource</span></span><span lang=EN-GB
style='font-family:"Courier New";color:black'> </span><span lang=EN-GB>objects</span><span
lang=EN-GB style='font-family:"Courier New";color:black'> </span><span
lang=EN-US>in the same </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLBootJTA</span></span><span lang=EN-US>. You can
use the fake mode and change easily to the true JTA environment, just changing
the </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>JEPLBootJTA.setUserTransaction(UserTransaction)</span></span><span
lang=EN-US> call.</span></p>

<p class=MsoNormal><span lang=EN-US>You just need the standard JTA API to compile
and execute fake JTA transactions, for instance you can use the jar file ow2-jta-1.1-spec.jar
included in latest JOTM distribution.</span></p>

<p class=MsoNormal><span lang=EN-US>There is no “fake” </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>TransactionManager</span></span><span
lang=EN-US>, hence transactional behavior requiring a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>TransactionManager</span></span><span
lang=EN-US> to suspend an alive transaction (</span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>NOT_SUPPORTED</span></span><span
lang=EN-US> and </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>REQUIRES_NEW</span></span><span lang=EN-US> modes)
will fail.</span></p>

<h2><a name="_Toc339112626"><span lang=EN-GB>5.9 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-GB>SUPPORT OF MULTIPLE DATASOURCES IN JTA</span></a></h2>

<p class=MsoNormal><span lang=EN-US>The Java Transaction API standard has two
main features: distributed transactions and coordination of several data
sources (usually different databases) like two-phase commit transactions. </span></p>

<p class=MsoNormal><span lang=EN-US>Regarding distributed transactions JEPLayer
does not provide something special, if you call a remote method, for instance
using EJB remote beans, your JTA transaction will be propagated to the remote end
as usual. </span></p>

<p class=MsoNormal><span lang=EN-US>However JEPLayer provides some utilities in
case of several </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>DataSource</span></span><span lang=EN-US> objects
involved in the same (shared) JTA transaction. JEPLayer gives you a similar
framework based on transactional tasks coordinating several </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLJTADataSource</span></span><span
lang=EN-US>, in this case the central framework object implements the public
interface </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLJTAMultipleDataSource</span></span><span
lang=EN-US>, this object obtained from </span><span class=CdigoFuenteCarCar><span
lang=EN-US style='font-size:11.0pt'>JEPLBootJTA</span></span><span lang=EN-US>
calling </span><span class=CdigoFuenteCarCar><span lang=EN-US style='font-size:
11.0pt'>JEPLBootJTA.getJEPLJTAMultipleDataSource()</span></span><span
lang=EN-US> (ever the same object given the same </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLBootJTA</span></span><span
lang=EN-US> instance) manages all </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLJTADataSource</span></span><span
lang=EN-GB> </span><span lang=EN-US>objects created by the same </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLBootJTA</span></span><span
lang=EN-US> object.</span></p>

<p class=MsoNormal><span lang=EN-US>You only need the </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLJTAMultipleDataSource</span></span><span
lang=EN-US> object when you want to execute JTA transactions shared by two or
more JTA data sources.</span></p>

<p class=MsoNormal><span lang=EN-US>The approach is very similar to
transactions managed by a </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLJTADataSource, </span></span><span
lang=EN-US>by using </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLTask</span></span><span lang=EN-US>, </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLTransactionPropagation</span></span><span
lang=EN-US> and/or </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLTransactionalJTA</span></span><span lang=EN-US>
annotations. </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLJTAMultipleDataSource</span></span><span
lang=EN-US> provides the same semantic and behavior than </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLJTADataSource</span></span><span
lang=EN-GB> </span><span lang=EN-US>based transactions.</span></p>

<p class=MsoNormal><span lang=EN-US>The following example executes a transactional
task shared by two data sources and default propagation </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLTransactionPropagation.REQUIRED</span></span><span
lang=EN-US>.</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    UserTransaction txn = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    TransactionManager txnMgr = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    DataSource ds1 = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    DataSource ds2 = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLBootJTA boot = JEPLBootRoot.get().createJEPLBootJTA();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    boot.setUserTransaction(txn);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    boot.setTransactionManager(txnMgr);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    <b>JEPLJTAMultipleDataSource</b> jdsMgr = boot.getJEPLJTAMultipleDataSource();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>final</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLJTADataSource jds1 = boot.createJEPLJTADataSource(ds1);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>final</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLJTADataSource jds2 = boot.createJEPLJTADataSource(ds2);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; task = </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>new</span><span lang=EN-US
style='font-family:"Courier New";color:black'> JEPLTask&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact exec() </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// Database actions using jds1 and jds2</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jdsMgr.exec(task);</span></p>

<p class=MsoNormal><span lang=EN-US>Before creating the </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLJTADataSource</span></span><span
lang=EN-US> objects you can change the default transaction propagation (must be
called before otherwise an exception is thrown): </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>  JEPLJTAMultipleDataSource jdsMgr = boot.get JEPLJTAMultipleDataSource();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>  jdsMgr.setDefaultJEPLTransactionPropagation(</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><b><span lang=EN-US style='font-family:"Courier New";
color:black'>           JEPLTransactionPropagation.REQUIRED);</span></b></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>  </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>final</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLJTADataSource jds1 = boot.createJEPLJTADataSource(ds1);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>  </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>final</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLJTADataSource jds2 = boot.createJEPLJTADataSource(ds2);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>  ...</span></p>

<p class=MsoNormal><span lang=EN-US>And the same way </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLJTADataSource</span></span><span
lang=EN-US> as you can define the transaction propagation as a </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLTransactionalJTA</span></span><span
lang=EN-US> annotation</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLJTAMultipleDataSource jdsMgr = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// ...</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; task = </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>new</span><span lang=EN-US
style='font-family:"Courier New";color:black'> JEPLTask&lt;Contact&gt;()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        <b>@JEPLTransactionalJTA </b></span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact exec() </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// Persistent actions using jds1 and jds2</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return </span><span lang=EN-GB style='font-family:"Courier New"'>...</span><span
lang=EN-US style='font-family:"Courier New";color:black'>;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    };</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jdsMgr.exec(task);</span></p>

<p class=MsoNormal><span lang=EN-US>Or providing a second parameter of type </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLTransactionPropagation</span></span><span
lang=EN-US> to the </span><span lang=EN-US style='font-family:"Courier New";
color:black'>JEPLJTAMultipleDataSource.exec()</span><span lang=EN-US> method.</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLJTAMultipleDataSource jdsMgr = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// ...</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLTask&lt;Contact&gt; task = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    jdsMgr.<b>exec(task,JEPLTransactionPropagation.MANDATORY)</b>;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>When executing a transaction </span><span
lang=EN-US style='font-family:"Courier New";color:black'>JEPLJTAMultipleDataSource
</span><span lang=EN-GB>ensures that the same </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span
lang=EN-GB> object is used in every </span><span lang=EN-US style='font-family:
"Courier New";color:black'>JEPLJTADataSource</span><span lang=EN-GB> associated
and is automatically released (returning to the pool) in the end of the task
execution, transaction demarcation happens before getting and after releasing
connections from </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>DataSource</span></span><span lang=EN-GB> pools.</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Courier New";
color:black'>JEPLJTAMultipleDataSource </span><span lang=EN-GB>also supports
nested transactions and internal tasks executed by </span><span lang=EN-US
style='font-family:"Courier New";color:black'>JEPLJTADataSource</span><span
lang=EN-GB> objects do not get/release a new </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span
lang=EN-GB>, the </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB>
automatically obtained by </span><span lang=EN-US style='font-family:"Courier New";
color:black'>JEPLJTAMultipleDataSource </span><span lang=EN-GB>is used instead.
</span></p>

<h2><a name="_Toc339112627"><span lang=EN-GB>5.10 <span style='font:7.0pt "Times New Roman"'> </span></span><span
lang=EN-GB>UNCACHED RESULTSET</span></a></h2>

<p class=MsoNormal><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDAOQuery&lt;T&gt;</span></span><span lang=EN-GB>
has this method:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLResultSetDAO&lt;T&gt; getJEPLResultSetDAO()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>returning a </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLResultSetDAO&lt;T&gt;</span></span><span
lang=EN-GB> object, because we are into the DAO level of JEPLayer </span><span
class=CdigoFuenteCarCar><span lang=EN-US style='font-size:11.0pt'>JEPLResultSetDAO&lt;T&gt;</span></span><span
lang=EN-GB> sounds like a </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span lang=EN-GB> of
developer defined objects, and this is right, then what is the difference with </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>getResultList()
</span></span><span lang=EN-GB>methods returning a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>List</span></span><span
lang=EN-GB> of objects?</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> </span></p>

<p class=MsoNormal><span lang=EN-GB>The returned </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAO&lt;T&gt;</span></span><span
lang=EN-GB> keeps alive a </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span lang=EN-GB>
and is designed to get results on demand, the same way as </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span
lang=EN-GB> (in fact this object is used under the hood) but in this case we
get developer defined objects. This is the only case the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span
lang=EN-GB> used is not closed before the method returns. This approach allows
querying millions of rows and in the same time only to load the required number
or rows while iterating. </span></p>

<p class=MsoNormal><span lang=EN-GB>Use of </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAO</span></span><span
lang=EN-GB> is very simple because it mimics </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span
lang=EN-GB> but a lot of easier because every row is converted to the required
user object using the registered </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAOListener&lt;T&gt;</span></span><span
lang=EN-GB> listener, so we just need two simple methods in </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAO&lt;T&gt;</span></span><span
lang=EN-GB>: </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>boolean</span><span lang=EN-US style='font-family:"Courier New";
color:black'> next();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> T getObject();</span></p>

<p class=MsoNormal><span lang=EN-GB>Because </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAO&lt;T&gt;</span></span><span
lang=EN-GB> keeps internally a </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span lang=EN-GB>
object we need to close this object in some way. The </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span
lang=EN-GB> is closed in three cases:</span></p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-18.0pt'><span
lang=EN-GB>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-GB>The first time calling</span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'> next()</span></span><span lang=EN-GB>
method it returned false. In this case the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span
lang=EN-GB> is automatically closed.</span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-18.0pt'><span
lang=EN-GB>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-GB>Explicit call to </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAO.close()</span></span><span
lang=EN-GB>. This method is defined in </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLResultSet</span></span><span
lang=EN-GB>, the base interface.</span></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-18.0pt'><span lang=EN-GB>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-GB>Explicit call to </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>ResultSet.close()</span></span><span
lang=EN-GB> on the </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>ResultSet</span></span><span lang=EN-GB> obtained
calling </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>JEPLResultSetDAO.getResultSet(). </span></span><span lang=EN-GB>This
way is not recommended, use ever JEPLayer methods when provided.</span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'> </span></span></p>

<p class=MsoNormal><span lang=EN-GB>Because </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAO&lt;T&gt;</span></span><span
lang=EN-GB> needs an “alive” </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB>
for a while, </span><span lang=EN-US style='font-family:"Courier New";
color:black'>getJEPLResultSetDAO()</span><span lang=EN-GB> method <i>only can
be called inside a</i> </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLTask,</span></span><span lang=EN-GB> in a
different scenario the </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB> object is
closed before the method returns (in this case JEPLayer throws an exception of
missing </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>JEPLTask</span></span><span lang=EN-GB>). </span></p>

<p class=MsoNormal><span lang=EN-GB>For instance, adding this method to </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>ContactDAO</span></span><span
lang=EN-GB>:</span></p>

<pre><span lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> JEPLResultSetDAO&lt;Contact&gt; selectAllResultSetDAO()</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>return</span></span><span
lang=EN-US style='font-family:"Courier New"'> dao.createJEPLDAOQuery(</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>               </span><span
class=character1><span lang=EN-US style='font-family:"Courier New"'>&quot;SELECT * FROM CONTACT&quot;</span></span><span
lang=EN-US style='font-family:"Courier New"'>).getJEPLResultSetDAO();</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre>

<p class=MsoNormal><span lang=EN-US> </span><span lang=EN-GB>And a use example
(remember, this code must be executed inside a </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLTask)</span></span><span
lang=EN-GB>:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    ContactDAO dao = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    JEPLResultSetDAO&lt;Contact&gt; resSetDAO =
dao.selectAllResultSetDAO();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-US style='font-family:"Courier New";
color:black'> (resSetDAO.isClosed()) </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>throw</span><span lang=EN-US style='font-family:
"Courier New";color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> RuntimeException(</span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;UNEXPECTED&quot;</span><span lang=EN-US style='font-family:
"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>while</span><span lang=EN-US style='font-family:"Courier New";
color:black'>(resSetDAO.next())</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        Contact contact = resSetDAO.getObject();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        System.out.println(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;Contact: &quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'> + contact.getName());</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// Now we know is closed</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-US style='font-family:"Courier New";
color:black'> (!resSetDAO.isClosed()) </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>throw</span><span lang=EN-US style='font-family:
"Courier New";color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> RuntimeException(</span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;UNEXPECTED&quot;</span><span lang=EN-US style='font-family:
"Courier New";color:black'>);</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLResultSetDAO&lt;T&gt;</span></span><span
lang=EN-GB> is even more interesting because it </span><span lang=EN-US>inherits
from </span><span lang=EN-US style='font-family:"Courier New"'>List&lt;T&gt;</span><span
lang=EN-US>, and internally defines an on demand </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Iterator</span></span><span
lang=EN-US> and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>ListIterator</span></span><span lang=EN-US>. For
instance, the previous code could be written this way:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    ContactDAO dao = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    List&lt;Contact&gt; resSetDAO = dao.selectAllResultSetDAO();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-US style='font-family:"Courier New";
color:black'> (((JEPLResultSetDAO)resSetDAO).isClosed()) </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throw</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> RuntimeException(</span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;UNEXPECTED&quot;</span><span lang=EN-US style='font-family:
"Courier New";color:black'>);</span></p>

<pre><span lang=EN-US style='font-family:"Courier New"'>    </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>for</span><span
lang=EN-US style='font-family:"Courier New"'>(Contact contact : resSetDAO) </span><span
lang=EN-US style='font-family:"Courier New";color:#969696'>// Uses Iterator&lt;Contact&gt;</span></pre>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        System.out.println(</span><span lang=EN-US
style='font-family:"Courier New";color:#CE7B00'>&quot;Contact: &quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'> + contact.getName());</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// Now we know is closed</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-US style='font-family:"Courier New";
color:black'> (!((JEPLResultSetDAO)resSetDAO).isClosed()) </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throw</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> RuntimeException(</span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;UNEXPECTED&quot;</span><span lang=EN-US style='font-family:
"Courier New";color:black'>);</span></p>

<p class=MsoNormal><span lang=EN-US>What about other </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>List</span></span><span
lang=EN-US> methods?</span></p>

<p class=MsoNormal><span lang=EN-US>The implementation of </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAO&lt;T&gt;</span></span><span
lang=EN-GB> is </span><span lang=EN-US>backed by a conventional </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>LinkedList</span></span><span
lang=EN-US> collection working as a cache holding all already loaded objects,
if you call a </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>List</span></span><span lang=EN-US> method and this
call tries to access an object not in the list because the required index is
after the last obtained index from the database, then the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAO&lt;T&gt;</span></span><span
lang=EN-GB> object is automatically advanced to the required index, otherwise
the internal </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>LinkedList</span></span><span lang=EN-GB> is used to
return the required object. Many List methods forward </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAO&lt;T&gt;</span></span><span
lang=EN-GB> to the end of the internal </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span lang=EN-GB>,
automatically closing the internal </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span lang=EN-GB>,
when the </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>ResultSet</span></span><span lang=EN-GB> is closed
only the internal </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>LinkedList</span></span><span lang=EN-GB> collection
is used and the </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLResultSetDAO&lt;T&gt;</span></span><span
lang=EN-GB> works the same as a conventional </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>LinkedList</span></span><span
lang=EN-GB>. For instance a call to </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>List.size()</span></span><span lang=EN-GB>
reads all objects from database and automatically closes the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAO</span></span><span
lang=EN-GB> closing the internal </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>ResultSet</span></span><span lang=EN-GB>
too.</span></p>

<p class=MsoNormal><span lang=EN-US>For instance:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    ContactDAO dao = ...;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    List&lt;Contact&gt; resSetDAO = dao.selectAllResultSetDAO();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    Contact contact1 = resSetDAO.get(0); </span><span lang=EN-US
style='font-family:"Courier New";color:#969696'>// Got from DB</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    Contact contact2 = resSetDAO.get(0); </span><span lang=EN-US
style='font-family:"Courier New";color:#969696'>// Got from internal list (same
obj)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-US style='font-family:"Courier New";
color:black'> (contact1 != contact2) </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>throw</span><span lang=EN-US style='font-family:
"Courier New";color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> RuntimeException(</span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;UNEXPECTED&quot;</span><span lang=EN-US style='font-family:
"Courier New";color:black'>);</span></p>

<p class=MsoNormal><span lang=EN-US>Finally the interface </span><span
lang=EN-US style='font-family:"Courier New";color:black'>JEPLResultSetDAO </span><span
lang=EN-GB>has this method:</span><span lang=EN-GB style='font-family:"Courier New";
color:black'> </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"Courier New";
color:black'>int count()</span></p>

<p class=MsoNormal><span lang=EN-GB>This method works the same as</span><span
lang=EN-US style='font-family:"Courier New";color:black'> List.size()</span><span
lang=EN-GB>, it was added to avoid the problem of </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>size()</span></span><span
lang=EN-GB> with debuggers like NetBeans debugger. When debugging on NetBeans </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>List.size()</span></span><span
lang=EN-GB> is automatically called to show the current size of the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>List</span></span><span
lang=EN-GB>, because this method is “database-sensible” this typical behavior
of debuggers is problematic because it implies a collateral effect. Fortunately
debugging is detected and </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>size()</span></span><span lang=EN-GB>
method is not allowed in this scenario but JEPLayer cannot distinguish when </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>size()</span></span><span
lang=EN-GB> is called by debugger or by end user code and throws an exception
when called in debugging mode. The alternative problem-free to </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>size()</span></span><span
lang=EN-GB> method is </span><span class=CdigoFuenteCarCar><span lang=EN-US
style='font-size:11.0pt'>JEPLResultSetDAO</span></span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>.count()</span></span><span
lang=EN-GB>. </span></p>

<h2><a name="_Toc339112628"><span lang=EN-GB>5.11 <span style='font:7.0pt "Times New Roman"'> </span></span><span
lang=EN-GB>INHERITANCE EXAMPLE</span></a></h2>

<p class=MsoNormal><span lang=EN-GB>This chapter does not add new JEPLayer
concepts and API, is just an example of how we can use JEPLayer to resolve
relatively complex problems. For instance inheritance table-class without a
column discriminator, most of ORMs need this “disturbing” column, is not the
case of JEPLayer. </span></p>

<p class=MsoNormal><span lang=EN-GB>In the beginning of this document we
created three tables with 1-1 relationships, we are going to represent these
relationships as inheritance of the classes </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Person</span></span><span
lang=EN-GB> and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Company</span></span><span lang=EN-GB> from </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Contact</span></span><span
lang=EN-GB>.</span></p>

<p class=MsoNormal><span lang=EN-GB>The </span><span lang=EN-GB
style='font-family:"Courier New"'>Person</span><span lang=EN-GB> class:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>class</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Person </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>extends</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>{</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>protected</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> age;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Person(</span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> id, String name, String phone, String email,</span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>int</span><span
lang=EN-US style='font-family:"Courier New";color:black'> age)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>super</span><span lang=EN-US style='font-family:"Courier New";
color:black'>(id,name,phone,email);    </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>this</span><span lang=EN-US style='font-family:"Courier New";
color:black'>.age = age;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Person() {}</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> getAge()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> age;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setAge(</span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> age)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>this</span><span lang=EN-US style='font-family:"Courier New";
color:black'>.age = age;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>}</span></p>

<p class=MsoNormal><span lang=EN-GB>The Company class:</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>class</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Company </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>extends</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>{</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>protected</span><span lang=EN-US style='font-family:"Courier New";
color:black'> String address;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Company(</span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> id, String name, String phone, String email,</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        String address)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>super</span><span lang=EN-US style='font-family:"Courier New";
color:black'>(id,name,phone,email);    </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>this</span><span lang=EN-US style='font-family:"Courier New";
color:black'>.address = address;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Company() {}</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> String getAddress()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> address;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setAddress(String address)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>this</span><span lang=EN-US style='font-family:"Courier New";
color:black'>.address = address;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>}</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>The </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>PersonDAO</span></span><span lang=EN-GB>:</span></p>

<pre><span class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>class</span></span><span
lang=EN-US style='font-family:"Courier New"'> PersonDAO </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>implements</span></span><span
lang=EN-US style='font-family:"Courier New"'> JEPLResultSetDAOListener&lt;Person&gt;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>{</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>protected</span></span><span
lang=EN-US style='font-family:"Courier New"'> ContactDAO contactDAO;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>protected</span></span><span
lang=EN-US style='font-family:"Courier New"'> JEPLDAO&lt;Person&gt; dao;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> PersonDAO(JEPLDataSource ds)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>this</span></span><span
lang=EN-US style='font-family:"Courier New"'>.dao = ds.createJEPLDAO(Person.</span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>class</span></span><span
lang=EN-US style='font-family:"Courier New"'>);</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        dao.addJEPLListener(</span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>this</span></span><span
lang=EN-US style='font-family:"Courier New"'>);</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>this</span></span><span
lang=EN-US style='font-family:"Courier New"'>.contactDAO = </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>new</span></span><span
lang=EN-US style='font-family:"Courier New"'> ContactDAO(ds);</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> JEPLDAO&lt;Person&gt; getJEPLDAO()</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>return</span></span><span
lang=EN-US style='font-family:"Courier New"'> dao;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    @Override</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>void</span></span><span
lang=EN-US style='font-family:"Courier New"'> setupJEPLResultSet(JEPLResultSet jrs,JEPLTask&lt;?&gt; task) </span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>throws</span></span><span
lang=EN-US style='font-family:"Courier New"'> Exception</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    @Override</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> Person createObject(JEPLResultSet jrs) </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>throws</span></span><span
lang=EN-US style='font-family:"Courier New"'> Exception</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>return</span></span><span
lang=EN-US style='font-family:"Courier New"'> </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>new</span></span><span
lang=EN-US style='font-family:"Courier New"'> Person();</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    @Override</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>void</span></span><span
lang=EN-US style='font-family:"Courier New"'> fillObject(Person obj,JEPLResultSet jrs) </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>throws</span></span><span
lang=EN-US style='font-family:"Courier New"'> Exception</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        contactDAO.fillObject(obj, jrs);</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        ResultSet rs = jrs.getResultSet();</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        obj.setAge(rs.getInt(</span><span
class=character1><span lang=EN-US style='font-family:"Courier New"'>&quot;AGE&quot;</span></span><span
lang=EN-US style='font-family:"Courier New"'>));</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>void</span></span><span
lang=EN-US style='font-family:"Courier New"'> insert(Person obj)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        contactDAO.insert(obj);</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        dao.createJEPLDALQuery(</span><span
class=character1><span lang=EN-US style='font-family:"Courier New"'>&quot;INSERT INTO PERSON (ID, AGE) VALUES (?, ?)&quot;</span></span><span
lang=EN-US style='font-family:"Courier New"'>)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .addParameters(obj.getId(),obj.getAge())</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .setStrictMinRows(1).setStrictMaxRows(1)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .executeUpdate();</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>void</span></span><span
lang=EN-US style='font-family:"Courier New"'> update(Person obj)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        contactDAO.update(obj);</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        dao.createJEPLDALQuery(</span><span
class=character1><span lang=EN-US style='font-family:"Courier New"'>&quot;UPDATE PERSON SET AGE = ? WHERE ID = ?&quot;</span></span><span
lang=EN-US style='font-family:"Courier New"'>)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .addParameters(obj.getAge(),obj.getId())</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .setStrictMinRows(1).setStrictMaxRows(1)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .executeUpdate();</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>boolean</span></span><span
lang=EN-US style='font-family:"Courier New"'> deleteByIdCascade(</span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>int</span></span><span
lang=EN-US style='font-family:"Courier New"'> id)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=comment1><span lang=EN-US style='font-family:"Courier New"'>// Only use when ON DELETE CASCADE is defined in foreign keys</span></span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>return</span></span><span
lang=EN-US style='font-family:"Courier New"'> contactDAO.deleteById(id);</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>boolean</span></span><span
lang=EN-US style='font-family:"Courier New"'> deleteByIdNotCascade1(</span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>int</span></span><span
lang=EN-US style='font-family:"Courier New"'> id)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>boolean</span></span><span
lang=EN-US style='font-family:"Courier New"'> res = dao.createJEPLDALQuery(</span><span
class=character1><span lang=EN-US style='font-family:"Courier New"'>&quot;DELETE FROM PERSON WHERE ID = ?&quot;</span></span><span
lang=EN-US style='font-family:"Courier New"'>)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .setStrictMinRows(0).setStrictMaxRows(1)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .addParameter(id)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .executeUpdate() &gt; 0;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>if</span></span><span
lang=EN-US style='font-family:"Courier New"'> (res) contactDAO.deleteById(id);</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>return</span></span><span
lang=EN-US style='font-family:"Courier New"'> res;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>boolean</span></span><span
lang=EN-US style='font-family:"Courier New"'> deleteByIdNotCascade2(</span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>int</span></span><span
lang=EN-US style='font-family:"Courier New"'> id)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=comment1><span lang=EN-US style='font-family:"Courier New"'>// Only MySQL</span></span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>return</span></span><span
lang=EN-US style='font-family:"Courier New"'> dao.createJEPLDALQuery(</span><span
class=character1><span lang=EN-US style='font-family:"Courier New"'>&quot;DELETE C,P FROM CONTACT C &quot;</span></span><span
lang=EN-US style='font-family:"Courier New"'> +</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                    </span><span
class=character1><span lang=EN-US style='font-family:"Courier New"'>&quot;LEFT JOIN PERSON P ON C.ID = P.ID &quot;</span></span><span
lang=EN-US style='font-family:"Courier New"'> +</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                    </span><span
class=character1><span lang=EN-US style='font-family:"Courier New"'>&quot;WHERE P.ID = ?&quot;</span></span><span
lang=EN-US style='font-family:"Courier New"'>)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .setStrictMinRows(0).setStrictMaxRows(1)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .addParameter(id)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .executeUpdate() &gt; 0;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>boolean</span></span><span
lang=EN-US style='font-family:"Courier New"'> delete(Person person)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>return</span></span><span
lang=EN-US style='font-family:"Courier New"'> deleteByIdCascade(person.getId());</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>int</span></span><span
lang=EN-US style='font-family:"Courier New"'> deleteAll()</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>return</span></span><span
lang=EN-US style='font-family:"Courier New"'> deleteAllCascade();</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>int</span></span><span
lang=EN-US style='font-family:"Courier New"'> deleteAllCascade()</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=comment1><span lang=EN-US style='font-family:"Courier New"'>// Only use when ON DELETE CASCADE is defined in foreign key</span></span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>return</span></span><span
lang=EN-US style='font-family:"Courier New"'> dao.createJEPLDALQuery(</span></pre><pre><span
class=character1><span lang=EN-US style='font-family:"Courier New"'>              &quot;DELETE FROM CONTACT WHERE CONTACT.ID IN (SELECT ID FROM PERSON)&quot;</span></span><span
lang=EN-US style='font-family:"Courier New"'>)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>               .executeUpdate();</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>int</span></span><span
lang=EN-US style='font-family:"Courier New"'> deleteAllNotCascade()</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=comment1><span lang=EN-US style='font-family:"Courier New"'>// MySQL Only</span></span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>return</span></span><span
lang=EN-US style='font-family:"Courier New"'> dao.createJEPLDALQuery(</span></pre><pre><span
class=character1><span lang=EN-US style='font-family:"Courier New"'>&quot;DELETE CONTACT,PERSON FROM CONTACT INNER JOIN PERSON WHERE CONTACT.ID = PERSON.ID&quot;</span></span><span
lang=EN-US style='font-family:"Courier New"'>).executeUpdate();</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> List&lt;Person&gt; selectAll()</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>return</span></span><span
lang=EN-US style='font-family:"Courier New"'> dao.createJEPLDAOQuery(</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>               </span><span
class=character1><span lang=EN-US style='font-family:"Courier New"'>&quot;SELECT * FROM PERSON P,CONTACT C WHERE P.ID = C.ID&quot;</span></span><span
lang=EN-US style='font-family:"Courier New"'>)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .getResultList();</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> Person selectById(</span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>int</span></span><span
lang=EN-US style='font-family:"Courier New"'> id)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>return</span></span><span
lang=EN-US style='font-family:"Courier New"'> dao.createJEPLDAOQuery(</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>              </span><span
class=character1><span lang=EN-US style='font-family:"Courier New"'>&quot;SELECT * FROM PERSON P,CONTACT C WHERE P.ID = C.ID AND P.ID = ?&quot;</span></span><span
lang=EN-US style='font-family:"Courier New"'>)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .addParameter(id)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .getSingleResult();</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> List&lt;Person&gt; selectByNameAndEMail(String name,String email)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>return</span></span><span
lang=EN-US style='font-family:"Courier New"'> dao.createJEPLDAOQuery(</span></pre><pre><span
class=character1><span lang=EN-US style='font-family:"Courier New"'>&quot;SELECT * FROM PERSON P,CONTACT C WHERE P.ID = C.ID AND C.NAME = ? AND C.EMAIL = ?&quot;</span></span><span
lang=EN-US style='font-family:"Courier New"'>)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .addParameters(name,email)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                .getResultList();</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>public</span></span><span
lang=EN-US style='font-family:"Courier New"'> </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>int</span></span><span
lang=EN-US style='font-family:"Courier New"'> selectCount()</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    {</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>        </span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>return</span></span><span
lang=EN-US style='font-family:"Courier New"'> dao.createJEPLDALQuery(</span><span
class=character1><span lang=EN-US style='font-family:"Courier New"'>&quot;SELECT COUNT(*) FROM PERSON&quot;</span></span><span
lang=EN-US style='font-family:"Courier New"'>)</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>                    .getOneRowFromSingleField(</span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>int</span></span><span
lang=EN-US style='font-family:"Courier New"'>.</span><span
class=keyword-directive1><span lang=EN-US style='font-family:"Courier New"'>class</span></span><span
lang=EN-US style='font-family:"Courier New"'>);</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>    }</span></pre><pre><span
lang=EN-US style='font-family:"Courier New"'>}</span></pre><pre><span
lang=EN-GB>&nbsp;</span></pre>

<p class=MsoNormal><span lang=EN-GB> If you take a look to the code you will see
how a </span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:
11.0pt'>ContactDAO</span></span><span lang=EN-GB> is used as an auxiliary DAO
to perform actions related to the </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>CONTACT</span></span><span lang=EN-GB>
table and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Contact</span></span><span lang=EN-GB> base class.</span></p>

<p class=MsoNormal><span lang=EN-GB>The class </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>CompanyDAO</span></span><span
lang=EN-GB> would be very similar.</span></p>

<p class=MsoNormal><span lang=EN-GB>With some more similar work we could change
</span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>ContactDAO</span></span><span
lang=EN-GB> as the DAO only for pure </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>Contact</span></span><span lang=EN-GB>
objects (not </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Company</span></span><span lang=EN-GB> or </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Person</span></span><span
lang=EN-GB>) in this case we would check ID in </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>PERSON</span></span><span
lang=EN-GB> and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>COMPANY</span></span><span lang=EN-GB> to be NULL. </span></p>

<h3><a name="_Toc339112629"><span lang=EN-GB>5.11.1 <span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-GB>Queries mixing several tables/object types in
the same hierarchy</span></a></h3>

<p class=MsoNormal><span lang=EN-GB>What if we need queries returning mixed
objects all of them inherited from </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>Contact</span></span><span lang=EN-GB>?</span></p>

<p class=MsoNormal><span lang=EN-GB>In this case we could create a mixed DAO to
manage the hierarchy of derived classes from </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>Contact</span></span><span
lang=EN-GB> and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>Contact</span></span><span lang=EN-GB> objects.</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>class</span><span lang=EN-US style='font-family:"Courier New";
color:black'> ContactTreeDAO </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>implements</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLResultSetDAOListener&lt;Contact&gt;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>{</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>protected</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLDAO&lt;Contact&gt; dao;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>protected</span><span lang=EN-US style='font-family:"Courier New";
color:black'> ContactDAO contactDAO;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>protected</span><span lang=EN-US style='font-family:"Courier New";
color:black'> PersonDAO personDAO;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>protected</span><span lang=EN-US style='font-family:"Courier New";
color:black'> CompanyDAO companyDAO;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> ContactTreeDAO(JEPLDataSource ds)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>this</span><span lang=EN-US style='font-family:"Courier New";
color:black'>.dao = ds.createJEPLDAO(Contact.</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>class</span><span lang=EN-US
style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        dao.addJEPLListener(</span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>this</span><span lang=EN-US
style='font-family:"Courier New";color:black'>);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>this</span><span lang=EN-US style='font-family:"Courier New";
color:black'>.contactDAO = </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> ContactDAO(ds);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>this</span><span lang=EN-US style='font-family:"Courier New";
color:black'>.personDAO = </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> PersonDAO(ds);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>this</span><span lang=EN-US style='font-family:"Courier New";
color:black'>.companyDAO = </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> CompanyDAO(ds);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> JEPLDAO&lt;Contact&gt; getJEPLDAO()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> setupJEPLResultSet(JEPLResultSet jrs,JEPLTask&lt;?&gt; task) </span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>throws</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact createObject(JEPLResultSet jrs) </span><span lang=EN-US
style='font-family:"Courier New";color:#0000E6'>throws</span><span lang=EN-US
style='font-family:"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        ResultSet rs = jrs.getResultSet();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-US style='font-family:"Courier New";
color:black'> (rs.getObject(</span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;P_ID&quot;</span><span lang=EN-US style='font-family:"Courier New";
color:black'>) != </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>null</span><span lang=EN-US style='font-family:"Courier New";
color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Person();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>else</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-US style='font-family:"Courier New";
color:black'>(rs.getObject(</span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;CP_ID&quot;</span><span lang=EN-US style='font-family:
"Courier New";color:black'>) != </span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>null</span><span lang=EN-US style='font-family:
"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Company();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>new</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    @Override</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>void</span><span lang=EN-US style='font-family:"Courier New";
color:black'> fillObject(Contact obj,JEPLResultSet jrs) </span><span
lang=EN-US style='font-family:"Courier New";color:#0000E6'>throws</span><span
lang=EN-US style='font-family:"Courier New";color:black'> Exception</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-US style='font-family:"Courier New";
color:black'> (obj </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>instanceof</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Person)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            personDAO.fillObject((Person)obj, jrs);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>else</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>if</span><span lang=EN-US style='font-family:"Courier New";
color:black'>(obj </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>instanceof</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Company)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            companyDAO.fillObject((Company)obj, jrs);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>else</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// Contact</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>            contactDAO.fillObject(obj, jrs);</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> deleteAll()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> deleteAllCascade();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> deleteAllCascade()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// Only use when ON DELETE CASCADE is defined in foreign keys</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDALQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;DELETE FROM CONTACT&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>).executeUpdate();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>int</span><span lang=EN-US style='font-family:"Courier New";
color:black'> deleteAllNotCascade()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// MySQL Only</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>//
http://www.haughin.com/2007/11/01/mysql-delete-across-multiple-tables-using-join/</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDALQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;DELETE C,P,CP FROM CONTACT C &quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;LEFT JOIN PERSON P ON C.ID = P.ID &quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;LEFT JOIN COMPANY CP ON C.ID = CP.ID &quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>).executeUpdate();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>boolean</span><span lang=EN-US style='font-family:"Courier New";
color:black'> deleteByIdNotCascade(</span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>int</span><span lang=EN-US style='font-family:
"Courier New";color:black'> id)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>// MySQL Only</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#969696'>//
http://www.haughin.com/2007/11/01/mysql-delete-across-multiple-tables-using-join/</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDALQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;DELETE C,P,CP FROM CONTACT C &quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;LEFT JOIN PERSON P ON C.ID = P.ID &quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;LEFT JOIN COMPANY CP ON C.ID = CP.ID &quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;WHERE C.ID = ?&quot;</span><span lang=EN-US
style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .setStrictMinRows(0).setStrictMaxRows(1)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .addParameter(id)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .executeUpdate() &gt; 0;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> List&lt;Contact&gt; selectAll()</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDAOQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;SELECT C.ID,C.EMAIL,C.NAME,C.PHONE,P.ID AS
P_ID,P.AGE,CP.ID AS CP_ID,CP.ADDRESS &quot;</span><span lang=EN-US
style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;FROM CONTACT C &quot;</span><span lang=EN-US
style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;LEFT JOIN PERSON P ON C.ID = P.ID &quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;LEFT JOIN COMPANY CP ON C.ID = CP.ID&quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getResultList();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>public</span><span lang=EN-US style='font-family:"Courier New";
color:black'> Contact selectById(</span><span lang=EN-US style='font-family:
"Courier New";color:#0000E6'>int</span><span lang=EN-US style='font-family:
"Courier New";color:black'> id)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    {</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>        </span><span lang=EN-US style='font-family:"Courier New";
color:#0000E6'>return</span><span lang=EN-US style='font-family:"Courier New";
color:black'> dao.createJEPLDAOQuery(</span><span lang=EN-US style='font-family:
"Courier New";color:#CE7B00'>&quot;SELECT C.ID,C.EMAIL,C.NAME,C.PHONE,P.ID AS
P_ID,P.AGE,CP.ID AS CP_ID,CP.ADDRESS &quot;</span><span lang=EN-US
style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;FROM CONTACT C &quot;</span><span lang=EN-US
style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;LEFT JOIN PERSON P ON C.ID = P.ID &quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;LEFT JOIN COMPANY CP ON C.ID = CP.ID &quot;</span><span
lang=EN-US style='font-family:"Courier New";color:black'> +</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                </span><span lang=EN-US style='font-family:"Courier New";
color:#CE7B00'>&quot;WHERE C.ID = ?&quot;</span><span lang=EN-US
style='font-family:"Courier New";color:black'>)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .addParameter(id)</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>                .getSingleResult();</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>    }</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Courier New";
color:black'>}</span></p>

<p class=MsoNormal align=left style='margin:0cm;margin-bottom:.0001pt;
text-align:left;background:white'><span lang=EN-US style='font-family:"Monospaced","serif";
color:black'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>As you can see only one SQL sentence is
needed to load the entire hierarchy and no column discriminator has been
needed. </span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-GB>&nbsp;</span></p>

</div>

<div><br clear=all>

<hr align=left size=1 width="33%">

<div id=ftn1>

<p class=MsoFootnoteText><a href="#_ftnref1" name="_ftn1" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[1]</span></span></span></span></a><span
lang=EN-GB> <a
href="http://static.springsource.org/spring/docs/2.5.x/reference/jdbc.html">http://static.springsource.org/spring/docs/2.5.x/reference/jdbc.html</a>
</span></p>

</div>

<div id=ftn2>

<p class=MsoFootnoteText><a href="#_ftnref2" name="_ftn2" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[2]</span></span></span></span></a><span
lang=EN-GB> </span><span lang=EN-GB><a
href="http://static.springsource.org/spring/docs/2.0.8/reference/transaction.html"><span
lang=ES>http://static.springsource.org/spring/docs/2.0.8/reference/transaction.html</span></a></span><span
lang=EN-GB> </span></p>

</div>

<div id=ftn3>

<p class=MsoFootnoteText><a href="#_ftnref3" name="_ftn3" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[3]</span></span></span></span></a><span
lang=EN-GB> </span><span lang=EN-GB><a href="http://www.mybatis.org/"><span
lang=ES>http://www.mybatis.org/</span></a></span><span lang=EN-GB> </span></p>

</div>

<div id=ftn4>

<p class=MsoFootnoteText><a href="#_ftnref4" name="_ftn4" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[4]</span></span></span></span></a><span
lang=EN-GB> </span><span lang=EN-GB><a
href="http://www.apache.org/licenses/LICENSE-2.0.html"><span lang=ES>http://www.apache.org/licenses/LICENSE-2.0.html</span></a></span><span
lang=EN-GB> </span></p>

</div>

<div id=ftn5>

<p class=MsoFootnoteText><a href="#_ftnref5" name="_ftn5" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[5]</span></span></span></span></a><span
lang=EN-GB> </span><span lang=EN-GB><a
href="http://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java"><span
lang=ES>http://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java</span></a></span><span
lang=EN-GB> </span></p>

</div>

<div id=ftn6>

<p class=MsoFootnoteText><a href="#_ftnref6" name="_ftn6" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[6]</span></span></span></span></a><span
lang=EN-GB> Current implementation in no way bounds </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAOListenerDefault</span></span><span
lang=EN-GB> to </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDataSource</span></span><span lang=EN-GB>, anyway
to prevent future changes you should create almost one </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>JEPLResultSetDAOListenerDefault</span></span><span
lang=EN-GB> per </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>JEPLDataSource </span></span><span lang=EN-GB>and
avoid reusing the same</span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'> JEPLResultSetDAOListenerDefault </span></span><span
lang=EN-GB>instance with several </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>JEPLDataSource.  </span></span></p>

</div>

<div id=ftn7>

<p class=MsoFootnoteText><a href="#_ftnref7" name="_ftn7" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[7]</span></span></span></span></a><span
lang=EN-GB> Of course meanwhile the </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>Connection</span></span><span lang=EN-GB>
is not returned to the pool, only </span><span class=CdigoFuenteCarCar><span
lang=EN-GB style='font-size:11.0pt'>PreparedStatement</span></span><span
lang=EN-GB> of the same Connection are recycled/reused </span></p>

</div>

<div id=ftn8>

<p class=MsoFootnoteText><a href="#_ftnref8" name="_ftn8" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[8]</span></span></span></span></a><span
lang=EN-GB> <a
href="http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html">http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html</a>
</span></p>

</div>

<div id=ftn9>

<p class=MsoFootnoteText><a href="#_ftnref9" name="_ftn9" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[9]</span></span></span></span></a><span
lang=EN-GB> <a
href="http://download.oracle.com/docs/cd/B32110_01/web.1013/b28221/servtran001.htm">http://download.oracle.com/docs/cd/B32110_01/web.1013/b28221/servtran001.htm</a>
</span></p>

</div>

<div id=ftn10>

<p class=MsoFootnoteText><a href="#_ftnref10" name="_ftn10" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[10]</span></span></span></span></a><span
lang=EN-GB> <a href="http://jotm.ow2.org">http://jotm.ow2.org</a> JOTM provides
JTA for any JDBC driver </span></p>

</div>

<div id=ftn11>

<p class=MsoFootnoteText><a href="#_ftnref11" name="_ftn11" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[11]</span></span></span></span></a><span
lang=EN-GB> <a
href="http://www.atomikos.com/Main/InstallingTransactionsEssentials">http://www.atomikos.com/Main/InstallingTransactionsEssentials</a>
</span></p>

</div>

<div id=ftn12>

<p class=MsoFootnoteText><a href="#_ftnref12" name="_ftn12" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[12]</span></span></span></span></a><span
lang=EN-GB> <a
href="http://stackoverflow.com/questions/6927561/standardxaconnectionhandlepreparestatement-should-not-be-used-outside-an-ejbser">http://stackoverflow.com/questions/6927561/standardxaconnectionhandlepreparestatement-should-not-be-used-outside-an-ejbser</a>
</span></p>

</div>

<div id=ftn13>

<p class=MsoFootnoteText><a href="#_ftnref13" name="_ftn13" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[13]</span></span></span></span></a><span
lang=EN-GB> <a href="http://www.atomikos.com/Documentation/ConfiguringJdbc">http://www.atomikos.com/Documentation/ConfiguringJdbc</a>
</span></p>

</div>

<div id=ftn14>

<p class=MsoFootnoteText><a href="#_ftnref14" name="_ftn14" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[14]</span></span></span></span></a><span
lang=EN-GB> For instance, in GlassFish 3 the </span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>UserTransaction</span></span><span
lang=EN-GB> singleton is registered in JNDI with “</span><span
class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>java:comp/UserTransaction</span></span><span
lang=EN-GB>” and </span><span class=CdigoFuenteCarCar><span lang=EN-GB
style='font-size:11.0pt'>TransactionManager</span></span><span lang=EN-GB> with
“</span><span class=CdigoFuenteCarCar><span lang=EN-GB style='font-size:11.0pt'>java:appserver/TransactionManager</span></span><span
lang=EN-GB>”</span></p>

</div>

<div id=ftn15>

<p class=MsoFootnoteText><a href="#_ftnref15" name="_ftn15" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[15]</span></span></span></span></a><span
lang=EN-GB> <a
href="http://java.sun.com/javaee/6/docs/api/javax/ejb/TransactionAttributeType.html">http://java.sun.com/javaee/6/docs/api/javax/ejb/TransactionAttributeType.html</a>
</span></p>

</div>

<div id=ftn16>

<p class=MsoFootnoteText><a href="#_ftnref16" name="_ftn16" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[16]</span></span></span></span></a><span
lang=EN-GB> <a
href="http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html">http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html</a>
</span></p>

</div>

<div id=ftn17>

<p class=MsoFootnoteText><a href="#_ftnref17" name="_ftn17" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[17]</span></span></span></span></a><span
lang=EN-GB> <a
href="http://download.oracle.com/docs/cd/B32110_01/web.1013/b28221/servtran001.htm">http://download.oracle.com/docs/cd/B32110_01/web.1013/b28221/servtran001.htm</a>
</span></p>

</div>

<div id=ftn18>

<p class=MsoFootnoteText><a href="#_ftnref18" name="_ftn18" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[18]</span></span></span></span></a><span
lang=EN-GB> <a
href="http://java.sun.com/javaee/6/docs/api/javax/ejb/TransactionAttributeType.html">http://java.sun.com/javaee/6/docs/api/javax/ejb/TransactionAttributeType.html</a></span></p>

</div>

<div id=ftn19>

<p class=MsoFootnoteText><a href="#_ftnref19" name="_ftn19" title=""><span
class=MsoFootnoteReference><span lang=EN-GB><span class=MsoFootnoteReference><span
lang=EN-GB style='font-size:9.0pt;font-family:"Verdana","sans-serif"'>[19]</span></span></span></span></a><span
lang=EN-GB> </span><span lang=EN-US>In some stand alone JTA environment like
JOTM Connections are ever bound to the transaction manager and order is not
important.</span></p>

</div>

</div>

</body>

</html>
